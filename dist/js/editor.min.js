!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=41)}([function(t,e,n){var i,o;!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,r){"use strict";function s(t,e){e=e||st;var n=e.createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function a(t){var e=!!t&&"length"in t&&t.length,n=yt.type(t);return"function"!==n&&!yt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function l(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function c(t,e,n){return yt.isFunction(e)?yt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?yt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?yt.grep(t,function(t){return ht.call(e,t)>-1!==n}):kt.test(e)?yt.filter(e,t,n):(e=yt.filter(e,t),yt.grep(t,function(t){return ht.call(e,t)>-1!==n&&1===t.nodeType}))}function u(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function h(t){var e={};return yt.each(t.match(At)||[],function(t,n){e[n]=!0}),e}function d(t){return t}function f(t){throw t}function p(t,e,n,i){var o;try{t&&yt.isFunction(o=t.promise)?o.call(t).done(e).fail(n):t&&yt.isFunction(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function m(){st.removeEventListener("DOMContentLoaded",m),n.removeEventListener("load",m),yt.ready()}function g(){this.expando=yt.expando+g.uid++}function v(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Ft.test(t)?JSON.parse(t):t)}function y(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Rt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=v(n)}catch(t){}Ht.set(t,e,n)}else n=void 0;return n}function b(t,e,n,i){var o,r=1,s=20,a=i?function(){return i.cur()}:function(){return yt.css(t,e,"")},l=a(),c=n&&n[3]||(yt.cssNumber[e]?"":"px"),u=(yt.cssNumber[e]||"px"!==c&&+l)&&Wt.exec(yt.css(t,e));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{r=r||".5",u/=r,yt.style(t,e,u+c)}while(r!==(r=a()/l)&&1!==r&&--s)}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}function w(t){var e,n=t.ownerDocument,i=t.nodeName,o=qt[i];return o||(e=n.body.appendChild(n.createElement(i)),o=yt.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),qt[i]=o,o)}function x(t,e){for(var n,i,o=[],r=0,s=t.length;r<s;r++)i=t[r],i.style&&(n=i.style.display,e?("none"===n&&(o[r]=Ot.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&zt(i)&&(o[r]=w(i))):"none"!==n&&(o[r]="none",Ot.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}function C(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&l(t,e)?yt.merge([t],n):n}function _(t,e){for(var n=0,i=t.length;n<i;n++)Ot.set(t[n],"globalEval",!e||Ot.get(e[n],"globalEval"))}function S(t,e,n,i,o){for(var r,s,a,l,c,u,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((r=t[f])||0===r)if("object"===yt.type(r))yt.merge(d,r.nodeType?[r]:r);else if(Yt.test(r)){for(s=s||h.appendChild(e.createElement("div")),a=(Vt.exec(r)||["",""])[1].toLowerCase(),l=Xt[a]||Xt._default,s.innerHTML=l[1]+yt.htmlPrefilter(r)+l[2],u=l[0];u--;)s=s.lastChild;yt.merge(d,s.childNodes),s=h.firstChild,s.textContent=""}else d.push(e.createTextNode(r));for(h.textContent="",f=0;r=d[f++];)if(i&&yt.inArray(r,i)>-1)o&&o.push(r);else if(c=yt.contains(r.ownerDocument,r),s=C(h.appendChild(r),"script"),c&&_(s),n)for(u=0;r=s[u++];)Kt.test(r.type||"")&&n.push(r);return h}function k(){return!0}function T(){return!1}function E(){try{return st.activeElement}catch(t){}}function L(t,e,n,i,o,r){var s,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(a in e)L(t,a,n,i,e[a],r);return t}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=T;else if(!o)return t;return 1===r&&(s=o,o=function(t){return yt().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=yt.guid++)),t.each(function(){yt.event.add(this,e,o,i,n)})}function P(t,e){return l(t,"table")&&l(11!==e.nodeType?e:e.firstChild,"tr")?yt(">tbody",t)[0]||t:t}function A(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function M(t){var e=ne.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function N(t,e){var n,i,o,r,s,a,l,c;if(1===e.nodeType){if(Ot.hasData(t)&&(r=Ot.access(t),s=Ot.set(e,r),c=r.events)){delete s.handle,s.events={};for(o in c)for(n=0,i=c[o].length;n<i;n++)yt.event.add(e,o,c[o][n])}Ht.hasData(t)&&(a=Ht.access(t),l=yt.extend({},a),Ht.set(e,l))}}function D(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ut.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function I(t,e,n,i){e=ct.apply([],e);var o,r,a,l,c,u,h=0,d=t.length,f=d-1,p=e[0],m=yt.isFunction(p);if(m||d>1&&"string"==typeof p&&!vt.checkClone&&ee.test(p))return t.each(function(o){var r=t.eq(o);m&&(e[0]=p.call(this,o,r.html())),I(r,e,n,i)});if(d&&(o=S(e,t[0].ownerDocument,!1,t,i),r=o.firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=yt.map(C(o,"script"),A),l=a.length;h<d;h++)c=o,h!==f&&(c=yt.clone(c,!0,!0),l&&yt.merge(a,C(c,"script"))),n.call(t[h],c,h);if(l)for(u=a[a.length-1].ownerDocument,yt.map(a,M),h=0;h<l;h++)c=a[h],Kt.test(c.type||"")&&!Ot.access(c,"globalEval")&&yt.contains(u,c)&&(c.src?yt._evalUrl&&yt._evalUrl(c.src):s(c.textContent.replace(ie,""),u))}return t}function O(t,e,n){for(var i,o=e?yt.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||yt.cleanData(C(i)),i.parentNode&&(n&&yt.contains(i.ownerDocument,i)&&_(C(i,"script")),i.parentNode.removeChild(i));return t}function H(t,e,n){var i,o,r,s,a=t.style;return n=n||se(t),n&&(s=n.getPropertyValue(e)||n[e],""!==s||yt.contains(t.ownerDocument,t)||(s=yt.style(t,e)),!vt.pixelMarginRight()&&re.test(s)&&oe.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function F(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function R(t){if(t in de)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=he.length;n--;)if((t=he[n]+e)in de)return t}function B(t){var e=yt.cssProps[t];return e||(e=yt.cssProps[t]=R(t)||t),e}function W(t,e,n){var i=Wt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function $(t,e,n,i,o){var r,s=0;for(r=n===(i?"border":"content")?4:"width"===e?1:0;r<4;r+=2)"margin"===n&&(s+=yt.css(t,n+$t[r],!0,o)),i?("content"===n&&(s-=yt.css(t,"padding"+$t[r],!0,o)),"margin"!==n&&(s-=yt.css(t,"border"+$t[r]+"Width",!0,o))):(s+=yt.css(t,"padding"+$t[r],!0,o),"padding"!==n&&(s+=yt.css(t,"border"+$t[r]+"Width",!0,o)));return s}function z(t,e,n){var i,o=se(t),r=H(t,e,o),s="border-box"===yt.css(t,"boxSizing",!1,o);return re.test(r)?r:(i=s&&(vt.boxSizingReliable()||r===t.style[e]),"auto"===r&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)]),(r=parseFloat(r)||0)+$(t,e,n||(s?"border":"content"),i,o)+"px")}function j(t,e,n,i,o){return new j.prototype.init(t,e,n,i,o)}function q(){pe&&(!1===st.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(q):n.setTimeout(q,yt.fx.interval),yt.fx.tick())}function U(){return n.setTimeout(function(){fe=void 0}),fe=yt.now()}function V(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)n=$t[i],o["margin"+n]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function K(t,e,n){for(var i,o=(G.tweeners[e]||[]).concat(G.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function X(t,e,n){var i,o,r,s,a,l,c,u,h="width"in e||"height"in e,d=this,f={},p=t.style,m=t.nodeType&&zt(t),g=Ot.get(t,"fxshow");n.queue||(s=yt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,yt.queue(t,"fx").length||s.empty.fire()})}));for(i in e)if(o=e[i],me.test(o)){if(delete e[i],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||yt.style(t,i)}if((l=!yt.isEmptyObject(e))||!yt.isEmptyObject(f)){h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=g&&g.display,null==c&&(c=Ot.get(t,"display")),u=yt.css(t,"display"),"none"===u&&(c?u=c:(x([t],!0),c=t.style.display||c,u=yt.css(t,"display"),x([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===yt.css(t,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1;for(i in f)l||(g?"hidden"in g&&(m=g.hidden):g=Ot.access(t,"fxshow",{display:c}),r&&(g.hidden=!m),m&&x([t],!0),d.done(function(){m||x([t]),Ot.remove(t,"fxshow");for(i in f)yt.style(t,i,f[i])})),l=K(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}}function Y(t,e){var n,i,o,r,s;for(n in t)if(i=yt.camelCase(n),o=e[i],r=t[n],Array.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(s=yt.cssHooks[i])&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function G(t,e,n){var i,o,r=0,s=G.prefilters.length,a=yt.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=fe||U(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(r);return a.notifyWith(t,[c,r,n]),r<1&&l?n:(l||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:yt.extend({},e),opts:yt.extend(!0,{specialEasing:{},easing:yt.easing._default},n),originalProperties:e,originalOptions:n,startTime:fe||U(),duration:n.duration,tweens:[],createTween:function(e,n){var i=yt.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(Y(u,c.opts.specialEasing);r<s;r++)if(i=G.prefilters[r].call(c,t,u,c.opts))return yt.isFunction(i.stop)&&(yt._queueHooks(c.elem,c.opts.queue).stop=yt.proxy(i.stop,i)),i;return yt.map(u,K,c),yt.isFunction(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),yt.fx.timer(yt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}function Q(t){return(t.match(At)||[]).join(" ")}function Z(t){return t.getAttribute&&t.getAttribute("class")||""}function J(t,e,n,i){var o;if(Array.isArray(e))yt.each(e,function(e,o){n||ke.test(t)?i(t,o):J(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,n,i)});else if(n||"object"!==yt.type(e))i(t,e);else for(o in e)J(t+"["+o+"]",e[o],n,i)}function tt(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(At)||[];if(yt.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function et(t,e,n,i){function o(a){var l;return r[a]=!0,yt.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=t===Ne;return o(e.dataTypes[0])||!r["*"]&&o("*")}function nt(t,e){var n,i,o=yt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&yt.extend(!0,t,i),t}function it(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}function ot(t,e,n,i){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}var rt=[],st=n.document,at=Object.getPrototypeOf,lt=rt.slice,ct=rt.concat,ut=rt.push,ht=rt.indexOf,dt={},ft=dt.toString,pt=dt.hasOwnProperty,mt=pt.toString,gt=mt.call(Object),vt={},yt=function(t,e){return new yt.fn.init(t,e)},bt=function(t,e){return e.toUpperCase()};yt.fn=yt.prototype={jquery:"3.2.1",constructor:yt,length:0,toArray:function(){return lt.call(this)},get:function(t){return null==t?lt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=yt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return yt.each(this,t)},map:function(t){return this.pushStack(yt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(lt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ut,sort:rt.sort,splice:rt.splice},yt.extend=yt.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||yt.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(c&&i&&(yt.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,r=n&&Array.isArray(n)?n:[]):r=n&&yt.isPlainObject(n)?n:{},s[e]=yt.extend(c,r,i)):void 0!==i&&(s[e]=i));return s},yt.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===yt.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=yt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==ft.call(t)||(e=at(t))&&("function"!=typeof(n=pt.call(e,"constructor")&&e.constructor)||mt.call(n)!==gt))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?dt[ft.call(t)]||"object":typeof t},globalEval:function(t){s(t)},camelCase:function(t){return t.replace(/^-ms-/,"ms-").replace(/-([a-z])/g,bt)},each:function(t,e){var n,i=0;if(a(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(a(Object(t))?yt.merge(n,"string"==typeof t?[t]:t):ut.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ht.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,s=!n;o<r;o++)!e(t[o],o)!==s&&i.push(t[o]);return i},map:function(t,e,n){var i,o,r=0,s=[];if(a(t))for(i=t.length;r<i;r++)null!=(o=e(t[r],r,n))&&s.push(o);else for(r in t)null!=(o=e(t[r],r,n))&&s.push(o);return ct.apply([],s)},guid:1,proxy:function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),yt.isFunction(t))return i=lt.call(arguments,2),o=function(){return t.apply(e||this,i.concat(lt.call(arguments)))},o.guid=t.guid=t.guid||yt.guid++,o},now:Date.now,support:vt}),"function"==typeof Symbol&&(yt.fn[Symbol.iterator]=rt[Symbol.iterator]),yt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){dt["[object "+e+"]"]=e.toLowerCase()});var wt=function(t){function e(t,e,n,i){var o,r,s,a,l,u,d,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!i&&((e?e.ownerDocument||e:B)!==M&&A(e),e=e||M,D)){if(11!==p&&(l=mt.exec(t)))if(o=l[1]){if(9===p){if(!(s=e.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(f&&(s=f.getElementById(o))&&F(e,s)&&s.id===o)return n.push(s),n}else{if(l[2])return G.apply(n,e.getElementsByTagName(t)),n;if((o=l[3])&&w.getElementsByClassName&&e.getElementsByClassName)return G.apply(n,e.getElementsByClassName(o)),n}if(w.qsa&&!q[t+" "]&&(!I||!I.test(t))){if(1!==p)f=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(bt,wt):e.setAttribute("id",a=R),u=S(t),r=u.length;r--;)u[r]="#"+a+" "+h(u[r]);d=u.join(","),f=gt.test(t)&&c(e.parentNode)||e}if(d)try{return G.apply(n,f.querySelectorAll(d)),n}catch(t){}finally{a===R&&e.removeAttribute("id")}}}return T(t.replace(rt,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function o(t){var e=M.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ct(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function l(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function c(t){return t&&void 0!==t.getElementsByTagName&&t}function u(){}function h(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,o=e.next,r=o||i,s=n&&"parentNode"===r,a=$++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,o);return!1}:function(e,n,l){var c,u,h,d=[W,a];if(l){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(h=e[R]||(e[R]={}),u=h[e.uniqueID]||(h[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=u[r])&&c[0]===W&&c[1]===a)return d[2]=c[2];if(u[r]=d,d[2]=t(e,n,l))return!0}return!1}}function f(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function p(t,n,i){for(var o=0,r=n.length;o<r;o++)e(t,n[o],i);return i}function m(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),c&&e.push(a)));return s}function g(t,e,n,o,r,s){return o&&!o[R]&&(o=g(o)),r&&!r[R]&&(r=g(r,s)),i(function(i,s,a,l){var c,u,h,d=[],f=[],g=s.length,v=i||p(e||"*",a.nodeType?[a]:a,[]),y=!t||!i&&e?v:m(v,d,t,a,l),b=n?r||(i?t:g||o)?[]:s:y;if(n&&n(y,b,a,l),o)for(c=m(b,f),o(c,[],a,l),u=c.length;u--;)(h=c[u])&&(b[f[u]]=!(y[f[u]]=h));if(i){if(r||t){if(r){for(c=[],u=b.length;u--;)(h=b[u])&&c.push(y[u]=h);r(null,b=[],c,l)}for(u=b.length;u--;)(h=b[u])&&(c=r?Z(i,h):d[u])>-1&&(i[c]=!(s[c]=h))}}else b=m(b===s?b.splice(g,b.length):b),r?r(null,s,b,l):G.apply(s,b)})}function v(t){for(var e,n,i,o=t.length,r=x.relative[t[0].type],s=r||x.relative[" "],a=r?1:0,l=d(function(t){return t===e},s,!0),c=d(function(t){return Z(e,t)>-1},s,!0),u=[function(t,n,i){var o=!r&&(i||n!==E)||((e=n).nodeType?l(t,n,i):c(t,n,i));return e=null,o}];a<o;a++)if(n=x.relative[t[a].type])u=[d(f(u),n)];else{if(n=x.filter[t[a].type].apply(null,t[a].matches),n[R]){for(i=++a;i<o&&!x.relative[t[i].type];i++);return g(a>1&&f(u),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(rt,"$1"),n,a<i&&v(t.slice(a,i)),i<o&&v(t=t.slice(i)),i<o&&h(t))}u.push(n)}return f(u)}function y(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,l,c){var u,h,d,f=0,p="0",g=i&&[],v=[],y=E,b=i||r&&x.find.TAG("*",c),w=W+=null==y?1:Math.random()||.1,C=b.length;for(c&&(E=s===M||s||c);p!==C&&null!=(u=b[p]);p++){if(r&&u){for(h=0,s||u.ownerDocument===M||(A(u),a=!D);d=t[h++];)if(d(u,s||M,a)){l.push(u);break}c&&(W=w)}o&&((u=!d&&u)&&f--,i&&g.push(u))}if(f+=p,o&&p!==f){for(h=0;d=n[h++];)d(g,v,s,a);if(i){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=X.call(l));v=m(v)}G.apply(l,v),c&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(l)}return c&&(W=w,E=y),g};return o?i(s):s}var b,w,x,C,_,S,k,T,E,L,P,A,M,N,D,I,O,H,F,R="sizzle"+1*new Date,B=t.document,W=0,$=0,z=n(),j=n(),q=n(),U=function(t,e){return t===e&&(P=!0),0},V={}.hasOwnProperty,K=[],X=K.pop,Y=K.push,G=K.push,Q=K.slice,Z=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",it=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",ot=new RegExp(tt+"+","g"),rt=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ct=new RegExp(it),ut=new RegExp("^"+et+"$"),ht={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),yt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},bt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},xt=function(){A()},Ct=d(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{G.apply(K=Q.call(B.childNodes),B.childNodes),K[B.childNodes.length].nodeType}catch(t){G={apply:K.length?function(t,e){Y.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},_=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},A=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:B;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,N=M.documentElement,D=!_(M),B!==M&&(n=M.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),w.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=o(function(t){return t.appendChild(M.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=pt.test(M.getElementsByClassName),w.getById=o(function(t){return N.appendChild(t).id=R,!M.getElementsByName||!M.getElementsByName(R).length}),w.getById?(x.filter.ID=function(t){var e=t.replace(vt,yt);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var n=e.getElementById(t);return n?[n]:[]}}):(x.filter.ID=function(t){var e=t.replace(vt,yt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),x.find.TAG=w.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=w.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&D)return e.getElementsByClassName(t)},O=[],I=[],(w.qsa=pt.test(M.querySelectorAll))&&(o(function(t){N.appendChild(t).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+tt+"*(?:value|"+J+")"),t.querySelectorAll("[id~="+R+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+R+"+*").length||I.push(".#.+[+~]")}),o(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=M.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),N.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(w.matchesSelector=pt.test(H=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(t){w.disconnectedMatch=H.call(t,"*"),H.call(t,"[s!='']:x"),O.push("!=",it)}),I=I.length&&new RegExp(I.join("|")),O=O.length&&new RegExp(O.join("|")),e=pt.test(N.compareDocumentPosition),F=e||pt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return P=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===M||t.ownerDocument===B&&F(B,t)?-1:e===M||e.ownerDocument===B&&F(B,e)?1:L?Z(L,t)-Z(L,e):0:4&n?-1:1)}:function(t,e){if(t===e)return P=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,a=[t],l=[e];if(!o||!r)return t===M?-1:e===M?1:o?-1:r?1:L?Z(L,t)-Z(L,e):0;if(o===r)return s(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?s(a[i],l[i]):a[i]===B?-1:l[i]===B?1:0},M):M},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==M&&A(t),n=n.replace(lt,"='$1']"),w.matchesSelector&&D&&!q[n+" "]&&(!O||!O.test(n))&&(!I||!I.test(n)))try{var i=H.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&A(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&A(t);var n=x.attrHandle[e.toLowerCase()],i=n&&V.call(x.attrHandle,e.toLowerCase())?n(t,e,!D):void 0;return void 0!==i?i:w.attributes||!D?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(bt,wt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(P=!w.detectDuplicates,L=!w.sortStable&&t.slice(0),t.sort(U),P){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return L=null,t},C=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=C(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,yt),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,yt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ct.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,yt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ot," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,f,p,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(g){if(r){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(d=g,h=d[R]||(d[R]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[t]||[],f=c[0]===W&&c[1],b=f&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){u[t]=[W,f,b];break}}else if(y&&(d=e,h=d[R]||(d[R]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[t]||[],f=c[0]===W&&c[1],b=f),!1===b)for(;(d=++f&&d&&d[m]||(b=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(h=d[R]||(d[R]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),u[t]=[W,b]),d!==e)););return(b-=o)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,n){var o,r=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[R]?r(n):r.length>1?(o=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=Z(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=k(t.replace(rt,"$1"));return o[R]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(vt,yt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:i(function(t){return ut.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,yt).toLowerCase(),function(e){var n;do{
if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[n<0?n+e:n]}),even:l(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(b);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,S=e.tokenize=function(t,n){var i,o,r,s,a,l,c,u=j[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=x.preFilter;a;){i&&!(o=st.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=at.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(rt," ")}),a=a.slice(i.length));for(s in x.filter)!(o=ht[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):j(t,l).slice(0)},k=e.compile=function(t,e){var n,i=[],o=[],r=q[t+" "];if(!r){for(e||(e=S(t)),n=e.length;n--;)r=v(e[n]),r[R]?i.push(r):o.push(r);r=q(t,y(o,i)),r.selector=t}return r},T=e.select=function(t,e,n,i){var o,r,s,a,l,u="function"==typeof t&&t,d=!i&&S(t=u.selector||t);if(n=n||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&D&&x.relative[r[1].type]){if(!(e=(x.find.ID(s.matches[0].replace(vt,yt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=ht.needsContext.test(t)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((l=x.find[a])&&(i=l(s.matches[0].replace(vt,yt),gt.test(r[0].type)&&c(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&h(r)))return G.apply(n,i),n;break}}return(u||k(t,d))(i,e,!D,n,!e||gt.test(t)&&c(e.parentNode)||e),n},w.sortStable=R.split("").sort(U).join("")===R,w.detectDuplicates=!!P,A(),w.sortDetached=o(function(t){return 1&t.compareDocumentPosition(M.createElement("fieldset"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(J,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(n);yt.find=wt,yt.expr=wt.selectors,yt.expr[":"]=yt.expr.pseudos,yt.uniqueSort=yt.unique=wt.uniqueSort,yt.text=wt.getText,yt.isXMLDoc=wt.isXML,yt.contains=wt.contains,yt.escapeSelector=wt.escape;var xt=function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&yt(t).is(n))break;i.push(t)}return i},Ct=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},_t=yt.expr.match.needsContext,St=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,kt=/^.[^:#\[\.,]*$/;yt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?yt.find.matchesSelector(i,t)?[i]:[]:yt.find.matches(t,yt.grep(e,function(t){return 1===t.nodeType}))},yt.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(yt(t).filter(function(){for(e=0;e<i;e++)if(yt.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)yt.find(t,o[e],n);return i>1?yt.uniqueSort(n):n},filter:function(t){return this.pushStack(c(this,t||[],!1))},not:function(t){return this.pushStack(c(this,t||[],!0))},is:function(t){return!!c(this,"string"==typeof t&&_t.test(t)?yt(t):t||[],!1).length}});var Tt,Et=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(yt.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||Tt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Et.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof yt?e[0]:e,yt.merge(this,yt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:st,!0)),St.test(i[1])&&yt.isPlainObject(e))for(i in e)yt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return o=st.getElementById(i[2]),o&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):yt.isFunction(t)?void 0!==n.ready?n.ready(t):t(yt):yt.makeArray(t,this)}).prototype=yt.fn,Tt=yt(st);var Lt=/^(?:parents|prev(?:Until|All))/,Pt={children:!0,contents:!0,next:!0,prev:!0};yt.fn.extend({has:function(t){var e=yt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(yt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,o=this.length,r=[],s="string"!=typeof t&&yt(t);if(!_t.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&yt.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?yt.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?ht.call(yt(t),this[0]):ht.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(yt.uniqueSort(yt.merge(this.get(),yt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),yt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return xt(t,"parentNode")},parentsUntil:function(t,e,n){return xt(t,"parentNode",n)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return xt(t,"nextSibling")},prevAll:function(t){return xt(t,"previousSibling")},nextUntil:function(t,e,n){return xt(t,"nextSibling",n)},prevUntil:function(t,e,n){return xt(t,"previousSibling",n)},siblings:function(t){return Ct((t.parentNode||{}).firstChild,t)},children:function(t){return Ct(t.firstChild)},contents:function(t){return l(t,"iframe")?t.contentDocument:(l(t,"template")&&(t=t.content||t),yt.merge([],t.childNodes))}},function(t,e){yt.fn[t]=function(n,i){var o=yt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=yt.filter(i,o)),this.length>1&&(Pt[t]||yt.uniqueSort(o),Lt.test(t)&&o.reverse()),this.pushStack(o)}});var At=/[^\x20\t\r\n\f]+/g;yt.Callbacks=function(t){t="string"==typeof t?h(t):yt.extend({},t);var e,n,i,o,r=[],s=[],a=-1,l=function(){for(o=o||t.once,i=e=!0;s.length;a=-1)for(n=s.shift();++a<r.length;)!1===r[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=r.length,n=!1);t.memory||(n=!1),e=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!e&&(a=r.length-1,s.push(n)),function e(n){yt.each(n,function(n,i){yt.isFunction(i)?t.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==yt.type(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return yt.each(arguments,function(t,e){for(var n;(n=yt.inArray(e,r,n))>-1;)r.splice(n,1),n<=a&&a--}),this},has:function(t){return t?yt.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||e||(r=n=""),this},locked:function(){return!!o},fireWith:function(t,n){return o||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},yt.extend({Deferred:function(t){var e=[["notify","progress",yt.Callbacks("memory"),yt.Callbacks("memory"),2],["resolve","done",yt.Callbacks("once memory"),yt.Callbacks("once memory"),0,"resolved"],["reject","fail",yt.Callbacks("once memory"),yt.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return yt.Deferred(function(n){yt.each(e,function(e,i){var o=yt.isFunction(t[i[4]])&&t[i[4]];r[i[1]](function(){var t=o&&o.apply(this,arguments);t&&yt.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(t,i,o){function r(t,e,i,o){return function(){var a=this,l=arguments,c=function(){var n,c;if(!(t<s)){if((n=i.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,yt.isFunction(c)?o?c.call(n,r(s,e,d,o),r(s,e,f,o)):(s++,c.call(n,r(s,e,d,o),r(s,e,f,o),r(s,e,d,e.notifyWith))):(i!==d&&(a=void 0,l=[n]),(o||e.resolveWith)(a,l))}},u=o?c:function(){try{c()}catch(n){yt.Deferred.exceptionHook&&yt.Deferred.exceptionHook(n,u.stackTrace),t+1>=s&&(i!==f&&(a=void 0,l=[n]),e.rejectWith(a,l))}};t?u():(yt.Deferred.getStackHook&&(u.stackTrace=yt.Deferred.getStackHook()),n.setTimeout(u))}}var s=0;return yt.Deferred(function(n){e[0][3].add(r(0,n,yt.isFunction(o)?o:d,n.notifyWith)),e[1][3].add(r(0,n,yt.isFunction(t)?t:d)),e[2][3].add(r(0,n,yt.isFunction(i)?i:f))}).promise()},promise:function(t){return null!=t?yt.extend(t,o):o}},r={};return yt.each(e,function(t,n){var s=n[2],a=n[5];o[n[1]]=s.add,a&&s.add(function(){i=a},e[3-t][2].disable,e[0][2].lock),s.add(n[3].fire),r[n[0]]=function(){return r[n[0]+"With"](this===r?void 0:this,arguments),this},r[n[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,n=e,i=Array(n),o=lt.call(arguments),r=yt.Deferred(),s=function(t){return function(n){i[t]=this,o[t]=arguments.length>1?lt.call(arguments):n,--e||r.resolveWith(i,o)}};if(e<=1&&(p(t,r.done(s(n)).resolve,r.reject,!e),"pending"===r.state()||yt.isFunction(o[n]&&o[n].then)))return r.then();for(;n--;)p(o[n],s(n),r.reject);return r.promise()}});var Mt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;yt.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&Mt.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},yt.readyException=function(t){n.setTimeout(function(){throw t})};var Nt=yt.Deferred();yt.fn.ready=function(t){return Nt.then(t).catch(function(t){yt.readyException(t)}),this},yt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--yt.readyWait:yt.isReady)||(yt.isReady=!0,!0!==t&&--yt.readyWait>0||Nt.resolveWith(st,[yt]))}}),yt.ready.then=Nt.then,"complete"===st.readyState||"loading"!==st.readyState&&!st.documentElement.doScroll?n.setTimeout(yt.ready):(st.addEventListener("DOMContentLoaded",m),n.addEventListener("load",m));var Dt=function(t,e,n,i,o,r,s){var a=0,l=t.length,c=null==n;if("object"===yt.type(n)){o=!0;for(a in n)Dt(t,e,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,yt.isFunction(i)||(s=!0),c&&(s?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(yt(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:c?e.call(t):l?e(t[0],n):r},It=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};g.uid=1,g.prototype={cache:function(t){var e=t[this.expando];return e||(e={},It(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[yt.camelCase(e)]=n;else for(i in e)o[yt.camelCase(i)]=e[i];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][yt.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(yt.camelCase):(e=yt.camelCase(e),e=e in i?[e]:e.match(At)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||yt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!yt.isEmptyObject(e)}};var Ot=new g,Ht=new g,Ft=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Rt=/[A-Z]/g;yt.extend({hasData:function(t){return Ht.hasData(t)||Ot.hasData(t)},data:function(t,e,n){return Ht.access(t,e,n)},removeData:function(t,e){Ht.remove(t,e)},_data:function(t,e,n){return Ot.access(t,e,n)},_removeData:function(t,e){Ot.remove(t,e)}}),yt.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=Ht.get(r),1===r.nodeType&&!Ot.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=yt.camelCase(i.slice(5)),y(r,i,o[i])));Ot.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){Ht.set(this,t)}):Dt(this,function(e){var n;if(r&&void 0===e){if(void 0!==(n=Ht.get(r,t)))return n;if(void 0!==(n=y(r,t)))return n}else this.each(function(){Ht.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ht.remove(this,t)})}}),yt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Ot.get(t,e),n&&(!i||Array.isArray(n)?i=Ot.access(t,e,yt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=yt.queue(t,e),i=n.length,o=n.shift(),r=yt._queueHooks(t,e),s=function(){yt.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Ot.get(t,n)||Ot.access(t,n,{empty:yt.Callbacks("once memory").add(function(){Ot.remove(t,[e+"queue",n])})})}}),yt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?yt.queue(this[0],t):void 0===e?this:this.each(function(){var n=yt.queue(this,t,e);yt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&yt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){yt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=yt.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Ot.get(r[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var Bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Wt=new RegExp("^(?:([+-])=|)("+Bt+")([a-z%]*)$","i"),$t=["Top","Right","Bottom","Left"],zt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&yt.contains(t.ownerDocument,t)&&"none"===yt.css(t,"display")},jt=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o},qt={};yt.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){zt(this)?yt(this).show():yt(this).hide()})}});var Ut=/^(?:checkbox|radio)$/i,Vt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Kt=/^$|\/(?:java|ecma)script/i,Xt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td;var Yt=/<|&#?\w+;/;!function(){var t=st.createDocumentFragment(),e=t.appendChild(st.createElement("div")),n=st.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),vt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",vt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Gt=st.documentElement,Qt=/^key/,Zt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Jt=/^([^.]*)(?:\.(.+)|)/;yt.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,c,u,h,d,f,p,m,g=Ot.get(t);if(g)for(n.handler&&(r=n,n=r.handler,o=r.selector),o&&yt.find.matchesSelector(Gt,o),n.guid||(n.guid=yt.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==yt&&yt.event.triggered!==e.type?yt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(At)||[""],c=e.length;c--;)a=Jt.exec(e[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f&&(h=yt.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=yt.event.special[f]||{},u=yt.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&yt.expr.match.needsContext.test(o),namespace:p.join(".")},r),(d=l[f])||(d=l[f]=[],d.delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,s)||t.addEventListener&&t.addEventListener(f,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),yt.event.global[f]=!0)},remove:function(t,e,n,i,o){var r,s,a,l,c,u,h,d,f,p,m,g=Ot.hasData(t)&&Ot.get(t);if(g&&(l=g.events)){for(e=(e||"").match(At)||[""],c=e.length;c--;)if(a=Jt.exec(e[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(h=yt.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=l[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!o&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||yt.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)yt.event.remove(t,f+e[c],n,i,!0);yt.isEmptyObject(l)&&Ot.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,s,a=yt.event.fix(t),l=new Array(arguments.length),c=(Ot.get(this,"events")||{})[a.type]||[],u=yt.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(s=yt.event.handlers.call(this,a,c),e=0;(o=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(i=((yt.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,o,r,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},n=0;n<l;n++)i=e[n],o=i.selector+" ",void 0===s[o]&&(s[o]=i.needsContext?yt(o,this).index(c)>-1:yt.find(o,this,null,[c]).length),s[o]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(yt.Event.prototype,t,{enumerable:!0,configurable:!0,get:yt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[yt.expando]?t:new yt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==E()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===E()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&l(this,"input"))return this.click(),!1},_default:function(t){return l(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},yt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},yt.Event=function(t,e){if(!(this instanceof yt.Event))return new yt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?k:T,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&yt.extend(this,e),this.timeStamp=t&&t.timeStamp||yt.now(),this[yt.expando]=!0},yt.Event.prototype={constructor:yt.Event,isDefaultPrevented:T,isPropagationStopped:T,isImmediatePropagationStopped:T,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=k,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=k,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=k,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},yt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Qt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Zt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},yt.event.addProp),yt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){yt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===i||yt.contains(i,o))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),yt.fn.extend({on:function(t,e,n,i){return L(this,t,e,n,i)},one:function(t,e,n,i){return L(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,yt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=T),this.each(function(){yt.event.remove(this,t,n,e)})}});var te=/<script|<style|<link/i,ee=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^true\/(.*)/,ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;yt.extend({htmlPrefilter:function(t){return t.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,"<$1></$2>")},clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(!0),l=yt.contains(t.ownerDocument,t);if(!(vt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||yt.isXMLDoc(t)))for(s=C(a),r=C(t),i=0,o=r.length;i<o;i++)D(r[i],s[i]);if(e)if(n)for(r=r||C(t),s=s||C(a),i=0,o=r.length;i<o;i++)N(r[i],s[i]);else N(t,a);return s=C(a,"script"),s.length>0&&_(s,!l&&C(t,"script")),a},cleanData:function(t){for(var e,n,i,o=yt.event.special,r=0;void 0!==(n=t[r]);r++)if(It(n)){if(e=n[Ot.expando]){if(e.events)for(i in e.events)o[i]?yt.event.remove(n,i):yt.removeEvent(n,i,e.handle);n[Ot.expando]=void 0}n[Ht.expando]&&(n[Ht.expando]=void 0)}}}),yt.fn.extend({detach:function(t){return O(this,t,!0)},remove:function(t){return O(this,t)},text:function(t){return Dt(this,function(t){return void 0===t?yt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return I(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||P(this,t).appendChild(t)})},prepend:function(){return I(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=P(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return I(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return I(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(yt.cleanData(C(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return yt.clone(this,t,e)})},html:function(t){return Dt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!te.test(t)&&!Xt[(Vt.exec(t)||["",""])[1].toLowerCase()]){t=yt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(yt.cleanData(C(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return I(this,arguments,function(e){var n=this.parentNode;yt.inArray(this,t)<0&&(yt.cleanData(C(this)),n&&n.replaceChild(e,this))},t)}}),yt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){yt.fn[t]=function(t){for(var n,i=[],o=yt(t),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),yt(o[s])[e](n),ut.apply(i,n.get());return this.pushStack(i)}});var oe=/^margin/,re=new RegExp("^("+Bt+")(?!px)[a-z%]+$","i"),se=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)};!function(){function t(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Gt.appendChild(s);var t=n.getComputedStyle(a);e="1%"!==t.top,r="2px"===t.marginLeft,i="4px"===t.width,a.style.marginRight="50%",o="4px"===t.marginRight,Gt.removeChild(s),a=null}}var e,i,o,r,s=st.createElement("div"),a=st.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",vt.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),yt.extend(vt,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return t(),i},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),r}}))}();var ae=/^(none|table(?!-c[ea]).+)/,le=/^--/,ce={position:"absolute",visibility:"hidden",display:"block"},ue={letterSpacing:"0",fontWeight:"400"},he=["Webkit","Moz","ms"],de=st.createElement("div").style;yt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=H(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=yt.camelCase(e),l=le.test(e),c=t.style;if(l||(e=B(a)),s=yt.cssHooks[e]||yt.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:c[e];r=typeof n,"string"===r&&(o=Wt.exec(n))&&o[1]&&(n=b(t,e,o),r="number"),null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(yt.cssNumber[a]?"":"px")),vt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var o,r,s,a=yt.camelCase(e);return le.test(e)||(e=B(a)),s=yt.cssHooks[e]||yt.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=H(t,e,i)),"normal"===o&&e in ue&&(o=ue[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),yt.each(["height","width"],function(t,e){yt.cssHooks[e]={get:function(t,n,i){if(n)return!ae.test(yt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?z(t,e,i):jt(t,ce,function(){return z(t,e,i)})},set:function(t,n,i){var o,r=i&&se(t),s=i&&$(t,e,i,"border-box"===yt.css(t,"boxSizing",!1,r),r);return s&&(o=Wt.exec(n))&&"px"!==(o[3]||"px")&&(t.style[e]=n,n=yt.css(t,e)),W(t,n,s)}}}),yt.cssHooks.marginLeft=F(vt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(H(t,"marginLeft"))||t.getBoundingClientRect().left-jt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),yt.each({margin:"",padding:"",border:"Width"},function(t,e){yt.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+$t[i]+e]=r[i]||r[i-2]||r[0];return o}},oe.test(t)||(yt.cssHooks[t+e].set=W)}),yt.fn.extend({css:function(t,e){return Dt(this,function(t,e,n){var i,o,r={},s=0;if(Array.isArray(e)){for(i=se(t),o=e.length;s<o;s++)r[e[s]]=yt.css(t,e[s],!1,i);return r}return void 0!==n?yt.style(t,e,n):yt.css(t,e)},t,e,arguments.length>1)}}),yt.Tween=j,j.prototype={constructor:j,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||yt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(yt.cssNumber[n]?"":"px")},cur:function(){var t=j.propHooks[this.prop];return t&&t.get?t.get(this):j.propHooks._default.get(this)},run:function(t){var e,n=j.propHooks[this.prop];return this.options.duration?this.pos=e=yt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=yt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){yt.fx.step[t.prop]?yt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[yt.cssProps[t.prop]]&&!yt.cssHooks[t.prop]?t.elem[t.prop]=t.now:yt.style(t.elem,t.prop,t.now+t.unit)}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},yt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},yt.fx=j.prototype.init,yt.fx.step={};var fe,pe,me=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;yt.Animation=yt.extend(G,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return b(n.elem,t,Wt.exec(e),n),n}]},tweener:function(t,e){yt.isFunction(t)?(e=t,t=["*"]):t=t.match(At);for(var n,i=0,o=t.length;i<o;i++)n=t[i],G.tweeners[n]=G.tweeners[n]||[],G.tweeners[n].unshift(e)},prefilters:[X],prefilter:function(t,e){e?G.prefilters.unshift(t):G.prefilters.push(t)}}),yt.speed=function(t,e,n){var i=t&&"object"==typeof t?yt.extend({},t):{complete:n||!n&&e||yt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!yt.isFunction(e)&&e};return yt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in yt.fx.speeds?i.duration=yt.fx.speeds[i.duration]:i.duration=yt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){yt.isFunction(i.old)&&i.old.call(this),i.queue&&yt.dequeue(this,i.queue)},i},yt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(zt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=yt.isEmptyObject(t),r=yt.speed(e,n,i),s=function(){var e=G(this,yt.extend({},t),r);(o||Ot.get(this,"finish"))&&e.stop(!0)}
;return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=yt.timers,s=Ot.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&ge.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));!e&&n||yt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Ot.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=yt.timers,s=i?i.length:0;for(n.finish=!0,yt.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),yt.each(["toggle","show","hide"],function(t,e){var n=yt.fn[e];yt.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(V(e,!0),t,i,o)}}),yt.each({slideDown:V("show"),slideUp:V("hide"),slideToggle:V("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){yt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),yt.timers=[],yt.fx.tick=function(){var t,e=0,n=yt.timers;for(fe=yt.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||yt.fx.stop(),fe=void 0},yt.fx.timer=function(t){yt.timers.push(t),yt.fx.start()},yt.fx.interval=13,yt.fx.start=function(){pe||(pe=!0,q())},yt.fx.stop=function(){pe=null},yt.fx.speeds={slow:600,fast:200,_default:400},yt.fn.delay=function(t,e){return t=yt.fx?yt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var o=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(o)}})},function(){var t=st.createElement("input"),e=st.createElement("select"),n=e.appendChild(st.createElement("option"));t.type="checkbox",vt.checkOn=""!==t.value,vt.optSelected=n.selected,t=st.createElement("input"),t.value="t",t.type="radio",vt.radioValue="t"===t.value}();var ve,ye=yt.expr.attrHandle;yt.fn.extend({attr:function(t,e){return Dt(this,yt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){yt.removeAttr(this,t)})}}),yt.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?yt.prop(t,e,n):(1===r&&yt.isXMLDoc(t)||(o=yt.attrHooks[e.toLowerCase()]||(yt.expr.match.bool.test(e)?ve:void 0)),void 0!==n?null===n?void yt.removeAttr(t,e):o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(i=o.get(t,e))?i:(i=yt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!vt.radioValue&&"radio"===e&&l(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(At);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),ve={set:function(t,e,n){return!1===e?yt.removeAttr(t,n):t.setAttribute(n,n),n}},yt.each(yt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ye[e]||yt.find.attr;ye[e]=function(t,e,i){var o,r,s=e.toLowerCase();return i||(r=ye[s],ye[s]=o,o=null!=n(t,e,i)?s:null,ye[s]=r),o}});var be=/^(?:input|select|textarea|button)$/i,we=/^(?:a|area)$/i;yt.fn.extend({prop:function(t,e){return Dt(this,yt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[yt.propFix[t]||t]})}}),yt.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&yt.isXMLDoc(t)||(e=yt.propFix[e]||e,o=yt.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=yt.find.attr(t,"tabindex");return e?parseInt(e,10):be.test(t.nodeName)||we.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),vt.optSelected||(yt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),yt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){yt.propFix[this.toLowerCase()]=this}),yt.fn.extend({addClass:function(t){var e,n,i,o,r,s,a,l=0;if(yt.isFunction(t))return this.each(function(e){yt(this).addClass(t.call(this,e,Z(this)))});if("string"==typeof t&&t)for(e=t.match(At)||[];n=this[l++];)if(o=Z(n),i=1===n.nodeType&&" "+Q(o)+" "){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=Q(i),o!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,o,r,s,a,l=0;if(yt.isFunction(t))return this.each(function(e){yt(this).removeClass(t.call(this,e,Z(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(At)||[];n=this[l++];)if(o=Z(n),i=1===n.nodeType&&" "+Q(o)+" "){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=Q(i),o!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):yt.isFunction(t)?this.each(function(n){yt(this).toggleClass(t.call(this,n,Z(this),e),e)}):this.each(function(){var e,i,o,r;if("string"===n)for(i=0,o=yt(this),r=t.match(At)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||(e=Z(this),e&&Ot.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Ot.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Q(Z(n))+" ").indexOf(e)>-1)return!0;return!1}}),yt.fn.extend({val:function(t){var e,n,i,o=this[0];return arguments.length?(i=yt.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,yt(this).val()):t,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=yt.map(o,function(t){return null==t?"":t+""})),(e=yt.valHooks[this.type]||yt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))})):o?(e=yt.valHooks[o.type]||yt.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(/\r/g,""):null==n?"":n):void 0}}),yt.extend({valHooks:{option:{get:function(t){var e=yt.find.attr(t,"value");return null!=e?e:Q(yt.text(t))}},select:{get:function(t){var e,n,i,o=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],c=s?r+1:o.length;for(i=r<0?c:s?r:0;i<c;i++)if(n=o[i],(n.selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!l(n.parentNode,"optgroup"))){if(e=yt(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=yt.makeArray(e),s=o.length;s--;)i=o[s],(i.selected=yt.inArray(yt.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),yt.each(["radio","checkbox"],function(){yt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=yt.inArray(yt(t).val(),e)>-1}},vt.checkOn||(yt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xe=/^(?:focusinfocus|focusoutblur)$/;yt.extend(yt.event,{trigger:function(t,e,i,o){var r,s,a,l,c,u,h,d=[i||st],f=pt.call(t,"type")?t.type:t,p=pt.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||st,3!==i.nodeType&&8!==i.nodeType&&!xe.test(f+yt.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),c=f.indexOf(":")<0&&"on"+f,t=t[yt.expando]?t:new yt.Event(f,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:yt.makeArray(e,[t]),h=yt.event.special[f]||{},o||!h.trigger||!1!==h.trigger.apply(i,e))){if(!o&&!h.noBubble&&!yt.isWindow(i)){for(l=h.delegateType||f,xe.test(l+f)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(i.ownerDocument||st)&&d.push(a.defaultView||a.parentWindow||n)}for(r=0;(s=d[r++])&&!t.isPropagationStopped();)t.type=r>1?l:h.bindType||f,u=(Ot.get(s,"events")||{})[t.type]&&Ot.get(s,"handle"),u&&u.apply(s,e),(u=c&&s[c])&&u.apply&&It(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=f,o||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),e)||!It(i)||c&&yt.isFunction(i[f])&&!yt.isWindow(i)&&(a=i[c],a&&(i[c]=null),yt.event.triggered=f,i[f](),yt.event.triggered=void 0,a&&(i[c]=a)),t.result}},simulate:function(t,e,n){var i=yt.extend(new yt.Event,n,{type:t,isSimulated:!0});yt.event.trigger(i,null,e)}}),yt.fn.extend({trigger:function(t,e){return this.each(function(){yt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return yt.event.trigger(t,e,n,!0)}}),yt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){yt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),yt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),vt.focusin="onfocusin"in n,vt.focusin||yt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){yt.event.simulate(e,t.target,yt.event.fix(t))};yt.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=Ot.access(i,e);o||i.addEventListener(t,n,!0),Ot.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=Ot.access(i,e)-1;o?Ot.access(i,e,o):(i.removeEventListener(t,n,!0),Ot.remove(i,e))}}});var Ce=n.location,_e=yt.now(),Se=/\?/;yt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||yt.error("Invalid XML: "+t),e};var ke=/\[\]$/,Te=/^(?:submit|button|image|reset|file)$/i,Ee=/^(?:input|select|textarea|keygen)/i;yt.param=function(t,e){var n,i=[],o=function(t,e){var n=yt.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!yt.isPlainObject(t))yt.each(t,function(){o(this.name,this.value)});else for(n in t)J(n,t[n],e,o);return i.join("&")},yt.fn.extend({serialize:function(){return yt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=yt.prop(this,"elements");return t?yt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!yt(this).is(":disabled")&&Ee.test(this.nodeName)&&!Te.test(t)&&(this.checked||!Ut.test(t))}).map(function(t,e){var n=yt(this).val();return null==n?null:Array.isArray(n)?yt.map(n,function(t){return{name:e.name,value:t.replace(/\r?\n/g,"\r\n")}}):{name:e.name,value:n.replace(/\r?\n/g,"\r\n")}}).get()}});var Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ae=/^(?:GET|HEAD)$/,Me={},Ne={},De="*/".concat("*"),Ie=st.createElement("a");Ie.href=Ce.href,yt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:Pe.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":De,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":yt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,yt.ajaxSettings),e):nt(yt.ajaxSettings,t)},ajaxPrefilter:tt(Me),ajaxTransport:tt(Ne),ajax:function(t,e){function i(t,e,i,a){var c,d,f,w,x,C=e;u||(u=!0,l&&n.clearTimeout(l),o=void 0,s=a||"",_.readyState=t>0?4:0,c=t>=200&&t<300||304===t,i&&(w=it(p,_,i)),w=ot(p,w,_,c),c?(p.ifModified&&(x=_.getResponseHeader("Last-Modified"),x&&(yt.lastModified[r]=x),(x=_.getResponseHeader("etag"))&&(yt.etag[r]=x)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=w.state,d=w.data,f=w.error,c=!f)):(f=C,!t&&C||(C="error",t<0&&(t=0))),_.status=t,_.statusText=(e||C)+"",c?v.resolveWith(m,[d,C,_]):v.rejectWith(m,[_,C,f]),_.statusCode(b),b=void 0,h&&g.trigger(c?"ajaxSuccess":"ajaxError",[_,p,c?d:f]),y.fireWith(m,[_,C]),h&&(g.trigger("ajaxComplete",[_,p]),--yt.active||yt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var o,r,s,a,l,c,u,h,d,f,p=yt.ajaxSetup({},e),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?yt(m):yt.event,v=yt.Deferred(),y=yt.Callbacks("once memory"),b=p.statusCode||{},w={},x={},C="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=Le.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(t,e){return null==u&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)_.always(t[_.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||C;return o&&o.abort(e),i(0,e),this}};if(v.promise(_),p.url=((t||p.url||Ce.href)+"").replace(/^\/\//,Ce.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(At)||[""],null==p.crossDomain){c=st.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Ie.protocol+"//"+Ie.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=yt.param(p.data,p.traditional)),et(Me,p,e,_),u)return _;h=yt.event&&p.global,h&&0==yt.active++&&yt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ae.test(p.type),r=p.url.replace(/#.*$/,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(/%20/g,"+")):(f=p.url.slice(r.length),p.data&&(r+=(Se.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(/([?&])_=[^&]*/,"$1"),f=(Se.test(r)?"&":"?")+"_="+_e+++f),p.url=r+f),p.ifModified&&(yt.lastModified[r]&&_.setRequestHeader("If-Modified-Since",yt.lastModified[r]),yt.etag[r]&&_.setRequestHeader("If-None-Match",yt.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&_.setRequestHeader("Content-Type",p.contentType),_.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+De+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)_.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,_,p)||u))return _.abort();if(C="abort",y.add(p.complete),_.done(p.success),_.fail(p.error),o=et(Ne,p,e,_)){if(_.readyState=1,h&&g.trigger("ajaxSend",[_,p]),u)return _;p.async&&p.timeout>0&&(l=n.setTimeout(function(){_.abort("timeout")},p.timeout));try{u=!1,o.send(w,i)}catch(t){if(u)throw t;i(-1,t)}}else i(-1,"No Transport");return _},getJSON:function(t,e,n){return yt.get(t,e,n,"json")},getScript:function(t,e){return yt.get(t,void 0,e,"script")}}),yt.each(["get","post"],function(t,e){yt[e]=function(t,n,i,o){return yt.isFunction(n)&&(o=o||i,i=n,n=void 0),yt.ajax(yt.extend({url:t,type:e,dataType:o,data:n,success:i},yt.isPlainObject(t)&&t))}}),yt._evalUrl=function(t){return yt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},yt.fn.extend({wrapAll:function(t){var e;return this[0]&&(yt.isFunction(t)&&(t=t.call(this[0])),e=yt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return yt.isFunction(t)?this.each(function(e){yt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=yt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=yt.isFunction(t);return this.each(function(n){yt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){yt(this).replaceWith(this.childNodes)}),this}}),yt.expr.pseudos.hidden=function(t){return!yt.expr.pseudos.visible(t)},yt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},yt.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Oe={0:200,1223:204},He=yt.ajaxSettings.xhr();vt.cors=!!He&&"withCredentials"in He,vt.ajax=He=!!He,yt.ajaxTransport(function(t){var e,i;if(vt.cors||He&&!t.crossDomain)return{send:function(o,r){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(s in o)a.setRequestHeader(s,o[s]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Oe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){e&&i()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),yt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),yt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return yt.globalEval(t),t}}}),yt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),yt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,o){e=yt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),st.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Fe=[],Re=/(=)\?(?=&|$)|\?\?/;yt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Fe.pop()||yt.expando+"_"+_e++;return this[t]=!0,t}}),yt.ajaxPrefilter("json jsonp",function(t,e,i){var o,r,s,a=!1!==t.jsonp&&(Re.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Re.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=yt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Re,"$1"+o):!1!==t.jsonp&&(t.url+=(Se.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||yt.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=n[o],n[o]=function(){s=arguments},i.always(function(){void 0===r?yt(n).removeProp(o):n[o]=r,t[o]&&(t.jsonpCallback=e.jsonpCallback,Fe.push(o)),s&&yt.isFunction(r)&&r(s[0]),s=r=void 0}),"script"}),vt.createHTMLDocument=function(){var t=st.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),yt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,o,r;return e||(vt.createHTMLDocument?(e=st.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=st.location.href,e.head.appendChild(i)):e=st),o=St.exec(t),r=!n&&[],o?[e.createElement(o[1])]:(o=S([t],e,r),r&&r.length&&yt(r).remove(),yt.merge([],o.childNodes))},yt.fn.load=function(t,e,n){var i,o,r,s=this,a=t.indexOf(" ");return a>-1&&(i=Q(t.slice(a)),t=t.slice(0,a)),yt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&yt.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?yt("<div>").append(yt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},yt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){yt.fn[e]=function(t){return this.on(e,t)}}),yt.expr.pseudos.animated=function(t){return yt.grep(yt.timers,function(e){return t===e.elem}).length},yt.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,c,u=yt.css(t,"position"),h=yt(t),d={};"static"===u&&(t.style.position="relative"),a=h.offset(),r=yt.css(t,"top"),l=yt.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1,c?(i=h.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),yt.isFunction(e)&&(e=e.call(t,n,yt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):h.css(d)}},yt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){yt.offset.setOffset(this,t,e)});var e,n,i,o,r=this[0];return r?r.getClientRects().length?(i=r.getBoundingClientRect(),e=r.ownerDocument,n=e.documentElement,o=e.defaultView,{top:i.top+o.pageYOffset-n.clientTop,left:i.left+o.pageXOffset-n.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===yt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),l(t[0],"html")||(i=t.offset()),i={top:i.top+yt.css(t[0],"borderTopWidth",!0),left:i.left+yt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-i.top-yt.css(n,"marginTop",!0),left:e.left-i.left-yt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===yt.css(t,"position");)t=t.offsetParent;return t||Gt})}}),yt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;yt.fn[t]=function(i){return Dt(this,function(t,i,o){var r;if(yt.isWindow(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):t[i]=o},t,i,arguments.length)}}),yt.each(["top","left"],function(t,e){yt.cssHooks[e]=F(vt.pixelPosition,function(t,n){if(n)return n=H(t,e),re.test(n)?yt(t).position()[e]+"px":n})}),yt.each({Height:"height",Width:"width"},function(t,e){yt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){yt.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return Dt(this,function(e,n,o){var r;return yt.isWindow(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?yt.css(e,n,a):yt.style(e,n,o,a)},e,s?o:void 0,s)}})}),yt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),yt.holdReady=function(t){t?yt.readyWait++:yt.ready(!0)},yt.isArray=Array.isArray,yt.parseJSON=JSON.parse,yt.nodeName=l,i=[],void 0!==(o=function(){return yt}.apply(e,i))&&(t.exports=o);var Be=n.jQuery,We=n.$;return yt.noConflict=function(t){return n.$===yt&&(n.$=We),t&&n.jQuery===yt&&(n.jQuery=Be),yt},r||(n.jQuery=n.$=yt),yt})},function(t,e,n){var i,o,r;!function(s){o=[n(0)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},o=function(t,e){i(t,e)||(t.className+=" "+e)},r=function(t,e){var n=" "+t.className.replace(/[\t\r\n]/g," ")+" ";if(i(t,e)){for(;n.indexOf(" "+e+" ")>=0;)n=n.replace(" "+e+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")}},s=function(t){var e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML},a=function(t){t.style.opacity="",t.style.display="block"},l=function(t){if(t&&!t.length)return a(t);for(var e=0;e<t.length;++e)a(t[e])},c=function(t){t.style.opacity="",t.style.display="none"},u=function(t){if(t&&!t.length)return c(t);for(var e=0;e<t.length;++e)c(t[e])},h=function(t,e){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1},d=function(t){t.style.left="-9999px",t.style.display="block";var e,n=t.clientHeight;return e="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(t).getPropertyValue("padding-top"),10):parseInt(t.currentStyle.padding),t.style.left="",t.style.display="none","-"+parseInt((n+e)/2)+"px"},f=function(t,e){if(+t.style.opacity<1){e=e||16,t.style.opacity=0,t.style.display="block";var n=+new Date,i=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity+(new Date-n)/100,n=+new Date,+t.style.opacity<1&&setTimeout(i,e)});i()}t.style.display="block"},p=function(t,e){e=e||16,t.style.opacity=1;var n=+new Date,i=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity-(new Date-n)/100,n=+new Date,+t.style.opacity>0?setTimeout(i,e):t.style.display="none"});i()},m=function(t){if("function"==typeof MouseEvent){var e=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});t.dispatchEvent(e)}else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),t.dispatchEvent(n)}else document.createEventObject?t.fireEvent("onclick"):"function"==typeof t.onclick&&t.onclick()},g=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):window.event&&window.event.hasOwnProperty("cancelBubble")&&(window.event.cancelBubble=!0)};e.hasClass=i,e.addClass=o,e.removeClass=r,e.escapeHtml=s,e._show=a,e.show=l,e._hide=c,e.hide=u,e.isDescendant=h,e.getTopMargin=d,e.fadeIn=f,e.fadeOut=p,e.fireClick=m,e.stopEventPropagation=g},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(2),s=n(11),a=i(s),l=n(37),c=i(l),u=function(){var t=document.createElement("div");for(t.innerHTML=c.default;t.firstChild;)document.body.appendChild(t.firstChild)},h=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=document.querySelector(".sweet-alert");return t||(u(),t=h()),t}),d=function(){var t=h();if(t)return t.querySelector("input")},f=function(){return document.querySelector(".sweet-overlay")},p=function(t,e){var n=o.hexToRgb(e);t.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},m=function(t){var e=h();r.fadeIn(f(),10),r.show(e),r.addClass(e,"showSweetAlert"),r.removeClass(e,"hideSweetAlert"),window.previousActiveElement=document.activeElement,e.querySelector("button.confirm").focus(),setTimeout(function(){r.addClass(e,"visible")},500);var n=e.getAttribute("data-timer");if("null"!==n&&""!==n){var i=t;e.timeout=setTimeout(function(){i&&"true"===e.getAttribute("data-has-done-function")?i(null):sweetAlert.close()},n)}},g=function(){var t=h(),e=d();r.removeClass(t,"show-input"),e.value=a.default.inputValue,e.setAttribute("type",a.default.inputType),e.setAttribute("placeholder",a.default.inputPlaceholder),v()},v=function(t){if(t&&13===t.keyCode)return!1;var e=h(),n=e.querySelector(".sa-input-error");r.removeClass(n,"show");var i=e.querySelector(".sa-error-container");r.removeClass(i,"show")},y=function(){h().style.marginTop=r.getTopMargin(h())};e.sweetAlertInitialize=u,e.getModal=h,e.getOverlay=f,e.getInput=d,e.setFocusStyle=p,e.openModal=m,e.resetInput=g,e.resetInputError=v,e.fixVerticalPosition=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},o=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16):null},r=function(){return window.attachEvent&&!window.addEventListener},s=function(t){window.console&&window.console.log("SweetAlert: "+t)},a=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var n,i,o="#";for(i=0;i<3;i++)n=parseInt(t.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*e),255)).toString(16),o+=("00"+n).substr(n.length);return o};e.extend=i,e.hexToRgb=o,e.isIE8=r,e.logStr=s,e.colorLuminance=a},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){var e=0,n=Array.prototype.slice;return t.cleanData=function(e){return function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{(i=t._data(o,"events"))&&i.remove&&t(o).triggerHandler("remove")}catch(t){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var o,r,s,a={},l=e.split(".")[0];e=e.split(".")[1];var c=l+"-"+e;return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},o=t[l][e],r=t[l][e]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},t.extend(r,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){if(!t.isFunction(i))return void(a[e]=i);a[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function o(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()}),r.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},a,{constructor:r,namespace:l,widgetName:e,widgetFullName:c}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,r,n._proto)}),delete o._childConstructors):n._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,o,r=n.call(arguments,1),s=0,a=r.length;s<a;s++)for(i in r[s])o=r[s][i],r[s].hasOwnProperty(i)&&void 0!==o&&(t.isPlainObject(o)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):e[i]=o);return e},t.widget.bridge=function(e,i){var o=i.prototype.widgetFullName||e;t.fn[e]=function(r){var s="string"==typeof r,a=n.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each(function(){var n,i=t.data(this,o);return"instance"===r?(l=i,!1):i?t.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,a),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):l=void 0:(a.length&&(r=t.widget.extend.apply(null,[r].concat(a))),this.each(function(){var e=t.data(this,o);e?(e.option(r||{}),e._init&&e._init()):t.data(this,o,new i(r,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),
this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,o,r,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},i=e.split("."),e=i.shift(),i.length){for(o=s[e]=t.widget.extend({},this.options[e]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(e=i.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=n}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,o;for(n in e)o=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&o&&o.length&&(i=t(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function n(n,r){var s,a;for(a=0;a<n.length;a++)s=o.classesElementLookup[n[a]]||t(),s=t(e.add?t.unique(s.get().concat(e.element.get())):s.not(e.element).get()),o.classesElementLookup[n[a]]=s,i.push(n[a]),r&&e.classes[n[a]]&&i.push(e.classes[n[a]])}var i=[],o=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&n(e.keys.match(/\S+/g)||[],!0),e.extra&&n(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,function(i,o){-1!==t.inArray(e.target,o)&&(n.classesElementLookup[i]=t(o.not(e.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof t||null===t,r={extra:o?e:n,keys:o?t:e,element:o?this.element:t,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(e,n,i){var o,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,s){function a(){if(e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.on(c,u,a):n.on(c,a)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var o,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(s)&&!1===s.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?!0===o||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&t.effects&&t.effects.effect[a]?i[e](o):a!==e&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}}),t.widget})},function(t,e,n){!function(e,n){t.exports=function(){"use strict";function t(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function e(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function n(t,n){return e(t).appendChild(n)}function i(t,e,n,i){var o=document.createElement(t);if(n&&(o.className=n),i&&(o.style.cssText=i),"string"==typeof e)o.appendChild(document.createTextNode(e));else if(e)for(var r=0;r<e.length;++r)o.appendChild(e[r]);return o}function o(t,e,n,o){var r=i(t,e,n,o);return r.setAttribute("role","presentation"),r}function r(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function s(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function a(e,n){var i=e.className;t(n).test(i)||(e.className+=(i?" ":"")+n)}function l(e,n){for(var i=e.split(" "),o=0;o<i.length;o++)i[o]&&!t(i[o]).test(n)&&(n+=" "+i[o]);return n}function c(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function u(t,e,n){e||(e={});for(var i in t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function h(t,e,n,i,o){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var r=i||0,s=o||0;;){var a=t.indexOf("\t",r);if(a<0||a>=e)return s+(e-r);s+=a-r,s+=n-s%n,r=a+1}}function d(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function f(t,e,n){for(var i=0,o=0;;){var r=t.indexOf("\t",i);-1==r&&(r=t.length);var s=r-i;if(r==t.length||o+s>=e)return i+Math.min(s,e-o);if(o+=r-i,o+=n-o%n,i=r+1,o>=e)return i}}function p(t){for(;Ts.length<=t;)Ts.push(m(Ts)+" ");return Ts[t]}function m(t){return t[t.length-1]}function g(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function v(t,e,n){for(var i=0,o=n(e);i<t.length&&n(t[i])<=o;)i++;t.splice(i,0,e)}function y(){}function b(t,e){var n;return Object.create?n=Object.create(t):(y.prototype=t,n=new y),e&&u(e,n),n}function w(t){return/\w/.test(t)||t>"Â"&&(t.toUpperCase()!=t.toLowerCase()||Es.test(t))}function x(t,e){return e?!!(e.source.indexOf("\\w")>-1&&w(t))||e.test(t):w(t)}function C(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function _(t){return t.charCodeAt(0)>=768&&Ls.test(t)}function S(t,e,n){for(;(n<0?e>0:e<t.length)&&_(t.charAt(e));)e+=n;return e}function k(t,e,n){for(;;){if(Math.abs(e-n)<=1)return t(e)?e:n;var i=Math.floor((e+n)/2);t(i)?n=i:e=i}}function T(t,e,n){var r=this;this.input=n,r.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=i("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=o("div",null,"CodeMirror-code"),r.selectionDiv=i("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=i("div",null,"CodeMirror-cursors"),r.measure=i("div",null,"CodeMirror-measure"),r.lineMeasure=i("div",null,"CodeMirror-measure"),r.lineSpace=o("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none");var s=o("div",[r.lineSpace],"CodeMirror-lines");r.mover=i("div",[s],null,"position: relative"),r.sizer=i("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=i("div",null,null,"position: absolute; height: "+xs+"px; width: 1px;"),r.gutters=i("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=i("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=i("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),Qr&&Zr<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),Jr||Kr&&ls||(r.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(r.wrapper):t(r.wrapper)),r.viewFrom=r.viewTo=e.first,r.reportedViewFrom=r.reportedViewTo=e.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function E(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var o=n.children[i],r=o.chunkSize();if(e<r){n=o;break}e-=r}return n.lines[e]}function L(t,e,n){var i=[],o=e.line;return t.iter(e.line,n.line+1,function(t){var r=t.text;o==n.line&&(r=r.slice(0,n.ch)),o==e.line&&(r=r.slice(e.ch)),i.push(r),++o}),i}function P(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function A(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function M(t){if(null==t.parent)return null;for(var e=t.parent,n=d(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var o=0;i.children[o]!=e;++o)n+=i.children[o].chunkSize();return n+e.first}function N(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var o=t.children[i],r=o.height;if(e<r){t=o;continue t}e-=r,n+=o.chunkSize()}return n}while(!t.lines);for(var s=0;s<t.lines.length;++s){var a=t.lines[s],l=a.height;if(e<l)break;e-=l}return n+s}function D(t,e){return e>=t.first&&e<t.first+t.size}function I(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function O(t,e,n){if(void 0===n&&(n=null),!(this instanceof O))return new O(t,e,n);this.line=t,this.ch=e,this.sticky=n}function H(t,e){return t.line-e.line||t.ch-e.ch}function F(t,e){return t.sticky==e.sticky&&0==H(t,e)}function R(t){return O(t.line,t.ch)}function B(t,e){return H(t,e)<0?e:t}function W(t,e){return H(t,e)<0?t:e}function $(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function z(t,e){if(e.line<t.first)return O(t.first,0);var n=t.first+t.size-1;return e.line>n?O(n,E(t,n).text.length):j(e,E(t,e.line).text.length)}function j(t,e){var n=t.ch;return null==n||n>e?O(t.line,e):n<0?O(t.line,0):t}function q(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=z(t,e[i]);return n}function U(){Ps=!0}function V(){As=!0}function K(t,e,n){this.marker=t,this.from=e,this.to=n}function X(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Y(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function G(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Q(t,e,n){var i;if(t)for(var o=0;o<t.length;++o){var r=t[o],s=r.marker,a=null==r.from||(s.inclusiveLeft?r.from<=e:r.from<e);if(a||r.from==e&&"bookmark"==s.type&&(!n||!r.marker.insertLeft)){var l=null==r.to||(s.inclusiveRight?r.to>=e:r.to>e);(i||(i=[])).push(new K(s,r.from,l?null:r.to))}}return i}function Z(t,e,n){var i;if(t)for(var o=0;o<t.length;++o){var r=t[o],s=r.marker,a=null==r.to||(s.inclusiveRight?r.to>=e:r.to>e);if(a||r.from==e&&"bookmark"==s.type&&(!n||r.marker.insertLeft)){var l=null==r.from||(s.inclusiveLeft?r.from<=e:r.from<e);(i||(i=[])).push(new K(s,l?null:r.from-e,null==r.to?null:r.to-e))}}return i}function J(t,e){if(e.full)return null;var n=D(t,e.from.line)&&E(t,e.from.line).markedSpans,i=D(t,e.to.line)&&E(t,e.to.line).markedSpans;if(!n&&!i)return null;var o=e.from.ch,r=e.to.ch,s=0==H(e.from,e.to),a=Q(n,o,s),l=Z(i,r,s),c=1==e.text.length,u=m(e.text).length+(c?o:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(null==d.to){var f=X(l,d.marker);f?c&&(d.to=null==f.to?null:f.to+u):d.to=o}}if(l)for(var p=0;p<l.length;++p){var g=l[p];if(null!=g.to&&(g.to+=u),null==g.from){var v=X(a,g.marker);v||(g.from=u,c&&(a||(a=[])).push(g))}else g.from+=u,c&&(a||(a=[])).push(g)}a&&(a=tt(a)),l&&l!=a&&(l=tt(l));var y=[a];if(!c){var b,w=e.text.length-2;if(w>0&&a)for(var x=0;x<a.length;++x)null==a[x].to&&(b||(b=[])).push(new K(a[x].marker,null,null));for(var C=0;C<w;++C)y.push(b);y.push(l)}return y}function tt(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function et(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=d(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var o=[{from:e,to:n}],r=0;r<i.length;++r)for(var s=i[r],a=s.find(0),l=0;l<o.length;++l){var c=o[l];if(!(H(c.to,a.from)<0||H(c.from,a.to)>0)){var u=[l,1],h=H(c.from,a.from),f=H(c.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(f>0||!s.inclusiveRight&&!f)&&u.push({from:a.to,to:c.to}),o.splice.apply(o,u),l+=u.length-3}}return o}function nt(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function it(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function ot(t){return t.inclusiveLeft?-1:0}function rt(t){return t.inclusiveRight?1:0}function st(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),o=e.find(),r=H(i.from,o.from)||ot(t)-ot(e);return r?-r:H(i.to,o.to)||rt(t)-rt(e)||e.id-t.id}function at(t,e){var n,i=As&&t.markedSpans;if(i)for(var o=void 0,r=0;r<i.length;++r)o=i[r],o.marker.collapsed&&null==(e?o.from:o.to)&&(!n||st(n,o.marker)<0)&&(n=o.marker);return n}function lt(t){return at(t,!0)}function ct(t){return at(t,!1)}function ut(t,e,n,i,o){var r=E(t,e),s=As&&r.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=H(c.from,n)||ot(l.marker)-ot(o),h=H(c.to,i)||rt(l.marker)-rt(o);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&o.inclusiveLeft?H(c.to,n)>=0:H(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&o.inclusiveLeft?H(c.from,i)<=0:H(c.from,i)<0)))return!0}}}function ht(t){for(var e;e=lt(t);)t=e.find(-1,!0).line;return t}function dt(t){for(var e;e=ct(t);)t=e.find(1,!0).line;return t}function ft(t){for(var e,n;e=ct(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}function pt(t,e){var n=E(t,e),i=ht(n);return n==i?e:M(i)}function mt(t,e){if(e>t.lastLine())return e;var n,i=E(t,e);if(!gt(t,i))return e;for(;n=ct(i);)i=n.find(1,!0).line;return M(i)+1}function gt(t,e){var n=As&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)if(i=n[o],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&vt(t,e,i))return!0}}function vt(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return vt(t,i.line,X(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var o=void 0,r=0;r<e.markedSpans.length;++r)if(o=e.markedSpans[r],o.marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(null==o.to||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&vt(t,e,o))return!0}function yt(t){t=ht(t);for(var e=0,n=t.parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==t)break;e+=o.height}for(var r=n.parent;r;n=r,r=n.parent)for(var s=0;s<r.children.length;++s){var a=r.children[s];if(a==n)break;e+=a.height}return e}function bt(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=lt(i);){var o=e.find(0,!0);i=o.from.line,n+=o.from.ch-o.to.ch}for(i=t;e=ct(i);){var r=e.find(0,!0);n-=i.text.length-r.from.ch,i=r.to.line,n+=i.text.length-r.to.ch}return n}function wt(t){var e=t.display,n=t.doc;e.maxLine=E(n,n.first),e.maxLineLength=bt(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=bt(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function xt(t,e,n,i){if(!t)return i(e,n,"ltr");for(var o=!1,r=0;r<t.length;++r){var s=t[r];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr"),o=!0)}o||i(e,n,"ltr")}function Ct(t,e,n){var i;Ms=null;for(var o=0;o<t.length;++o){var r=t[o];if(r.from<e&&r.to>e)return o;r.to==e&&(r.from!=r.to&&"before"==n?i=o:Ms=o),r.from==e&&(r.from!=r.to&&"before"!=n?i=o:Ms=o)}return null!=i?i:Ms}function _t(t,e){var n=t.order;return null==n&&(n=t.order=Ns(t.text,e)),n}function St(t,e,n){var i=S(t.text,e+n,n);return i<0||i>t.text.length?null:i}function kt(t,e,n){var i=St(t,e.ch,n);return null==i?null:new O(e.line,i,n<0?"after":"before")}function Tt(t,e,n,i,o){if(t){var r=_t(n,e.doc.direction);if(r){var s,a=o<0?m(r):r[0],l=o<0==(1==a.level),c=l?"after":"before";if(a.level>0){var u=Ge(e,n);s=o<0?n.text.length-1:0;var h=Qe(e,u,s).top;s=k(function(t){return Qe(e,u,t).top==h},o<0==(1==a.level)?a.from:a.to-1,s),"before"==c&&(s=St(n,s,1,!0))}else s=o<0?a.to:a.from;return new O(i,s,c)}}return new O(i,o<0?n.text.length:0,o<0?"before":"after")}function Et(t,e,n,i){var o=_t(e,t.doc.direction);if(!o)return kt(e,n,i);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var r=Ct(o,n.ch,n.sticky),s=o[r];if("ltr"==t.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return kt(e,n,i);var a,l=function(t,n){return St(e,t instanceof O?t.ch:t,n)},c=function(n){return t.options.lineWrapping?(a=a||Ge(t,e),gn(t,e,a,n)):{begin:0,end:e.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==t.doc.direction||1==s.level){var h=1==s.level==i<0,d=l(n,h?1:-1);if(null!=d&&(h?d<=s.to&&d<=u.end:d>=s.from&&d>=u.begin)){var f=h?"before":"after";return new O(n.line,d,f)}}var p=function(t,e,i){for(var r=function(t,e){return e?new O(n.line,l(t,1),"before"):new O(n.line,t,"after")};t>=0&&t<o.length;t+=e){var s=o[t],a=e>0==(1!=s.level),c=a?i.begin:l(i.end,-1);if(s.from<=c&&c<s.to)return r(c,a);if(c=a?s.from:l(s.to,-1),i.begin<=c&&c<i.end)return r(c,a)}},m=p(r+i,i,u);if(m)return m;var g=i>0?u.end:l(u.begin,-1);return null==g||i>0&&g==e.text.length||!(m=p(i>0?0:o.length-1,i,c(g)))?null:m}function Lt(t,e){return t._handlers&&t._handlers[e]||Ds}function Pt(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,o=i&&i[e];if(o){var r=d(o,n);r>-1&&(i[e]=o.slice(0,r).concat(o.slice(r+1)))}}}function At(t,e){var n=Lt(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,i)}function Mt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),At(t,n||e.type,t,e),Ft(e)||e.codemirrorIgnore}function Nt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==d(n,e[i])&&n.push(e[i])}function Dt(t,e){return Lt(t,e).length>0}function It(t){t.prototype.on=function(t,e){Is(this,t,e)},t.prototype.off=function(t,e){Pt(this,t,e)}}function Ot(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Ht(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Ft(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Rt(t){Ot(t),Ht(t)}function Bt(t){return t.target||t.srcElement}function Wt(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),cs&&t.ctrlKey&&1==e&&(e=3),e}function $t(t){if(null==bs){var e=i("span","â");n(t,i("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(bs=e.offsetWidth<=1&&e.offsetHeight>2&&!(Qr&&Zr<8))}var o=bs?i("span","â"):i("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return o.setAttribute("cm-text",""),o}function zt(t){if(null!=ws)return ws;var i=n(t,document.createTextNode("AØ®A")),o=fs(i,0,1).getBoundingClientRect(),r=fs(i,1,2).getBoundingClientRect();return e(t),!(!o||o.left==o.right)&&(ws=r.right-o.right<3)}function jt(t){if(null!=Bs)return Bs;var e=n(t,i("span","x")),o=e.getBoundingClientRect(),r=fs(e,0,1).getBoundingClientRect();return Bs=Math.abs(o.left-r.left)>1}function qt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Ws[t]=e}function Ut(t,e){$s[t]=e}function Vt(t){if("string"==typeof t&&$s.hasOwnProperty(t))t=$s[t];else if(t&&"string"==typeof t.name&&$s.hasOwnProperty(t.name)){var e=$s[t.name];"string"==typeof e&&(e={name:e}),t=b(e,t),t.name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Vt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Vt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Kt(t,e){e=Vt(e);var n=Ws[e.name];if(!n)return Kt(t,"text/plain");var i=n(t,e);if(zs.hasOwnProperty(e.name)){var o=zs[e.name];for(var r in o)o.hasOwnProperty(r)&&(i.hasOwnProperty(r)&&(i["_"+r]=i[r]),i[r]=o[r])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)i[s]=e.modeProps[s];return i}function Xt(t,e){u(e,zs.hasOwnProperty(t)?zs[t]:zs[t]={})}function Yt(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var o=e[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function Gt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Qt(t,e,n){return!t.startState||t.startState(e,n)}function Zt(t,e,n,i){var o=[t.state.modeGen],r={};se(t,e.text,t.doc.mode,n,function(t,e){return o.push(t,e)},r,i);for(var s=0;s<t.state.overlays.length;++s)!function(n){var i=t.state.overlays[n],s=1,a=0;se(t,e.text,i.mode,!0,function(t,e){for(var n=s;a<t;){var r=o[s];r>t&&o.splice(s,1,t,o[s+1],r),s+=2,a=Math.min(t,r)}if(e)if(i.opaque)o.splice(n,s-n,t,"overlay "+e),s=n+2;else for(;n<s;n+=2){var l=o[n+1];o[n+1]=(l?l+" ":"")+"overlay "+e}},r)}(s);return{styles:o,classes:r.bgClass||r.textClass?r:null}}function Jt(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=te(t,M(e)),o=Zt(t,e,e.text.length>t.options.maxHighlightLength?Yt(t.doc.mode,i):i);e.stateAfter=i,e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.frontier&&t.doc.frontier++}return e.styles}function te(t,e,n){var i=t.doc,o=t.display;if(!i.mode.startState)return!0;var r=ae(t,e,n),s=r>i.first&&E(i,r-1).stateAfter;return s=s?Yt(i.mode,s):Qt(i.mode),i.iter(r,e,function(n){ee(t,n.text,s);var a=r==e-1||r%5==0||r>=o.viewFrom&&r<o.viewTo;n.stateAfter=a?Yt(i.mode,s):null,++r}),n&&(i.frontier=r),s}function ee(t,e,n,i){var o=t.doc.mode,r=new js(e,t.options.tabSize);for(r.start=r.pos=i||0,""==e&&ne(o,n);!r.eol();)ie(o,r,n),r.start=r.pos}function ne(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Gt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function ie(t,e,n,i){for(var o=0;o<10;o++){i&&(i[0]=Gt(t,n).mode);var r=t.token(e,n);if(e.pos>e.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}function oe(t,e,n,i){var o,r=function(t){return{start:h.start,end:h.pos,string:h.current(),type:o||null,state:t?Yt(s.mode,u):u}},s=t.doc,a=s.mode;e=z(s,e);var l,c=E(s,e.line),u=te(t,e.line,n),h=new js(c.text,t.options.tabSize);for(i&&(l=[]);(i||h.pos<e.ch)&&!h.eol();)h.start=h.pos,o=ie(a,h,u),i&&l.push(r(!0));return i?l:r()}function re(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function se(t,e,n,i,o,r,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var l,c=0,u=null,h=new js(e,t.options.tabSize),d=t.options.addModeClass&&[null];for(""==e&&re(ne(n,i),r);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,s&&ee(t,e,i,h.pos),h.pos=e.length,l=null):l=re(ie(n,h,i,d),r),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e3),o(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e3);o(p,u),c=p}}function ae(t,e,n){for(var i,o,r=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=r.first)return r.first;var l=E(r,a-1);if(l.stateAfter&&(!n||a<=r.frontier))return a;var c=h(l.text,null,t.options.tabSize);(null==o||i>c)&&(o=a-1,i=c)}return o}function le(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),nt(t),it(t,n);var o=i?i(t):1;o!=t.height&&A(t,o)}function ce(t){t.parent=null,nt(t)}function ue(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Ks:Vs;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function he(t,e){var n=o("span",null,null,Jr?"padding-right: .1px":null),i={pre:o("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:(Qr||Jr)&&t.getOption("lineWrapping")};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var s=r?e.rest[r-1]:e.line,a=void 0;i.pos=0,i.addToken=fe,zt(t.display.measure)&&(a=_t(s,t.doc.direction))&&(i.addToken=me(i.addToken,a)),i.map=[],ve(s,i,Jt(t,s,e!=t.display.externalMeasured&&M(s))),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=l(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=l(s.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild($t(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(Jr){var c=i.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return At(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=l(i.pre.className,i.textClass||"")),i}function de(t){var e=i("span","â¢","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function fe(t,e,n,o,r,s,a){if(e){var l,c=t.splitSpaces?pe(e,t.trailingSpace):e,u=t.cm.state.specialChars,h=!1;if(u.test(e)){l=document.createDocumentFragment();for(var d=0;;){u.lastIndex=d;var f=u.exec(e),m=f?f.index-d:e.length-d;if(m){var g=document.createTextNode(c.slice(d,d+m));Qr&&Zr<9?l.appendChild(i("span",[g])):l.appendChild(g),t.map.push(t.pos,t.pos+m,g),t.col+=m,t.pos+=m}if(!f)break;d+=m+1;var v=void 0;if("\t"==f[0]){var y=t.cm.options.tabSize,b=y-t.col%y;v=l.appendChild(i("span",p(b),"cm-tab")),v.setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),t.col+=b}else"\r"==f[0]||"\n"==f[0]?(v=l.appendChild(i("span","\r"==f[0]?"â":"â¤","cm-invalidchar")),v.setAttribute("cm-text",f[0]),t.col+=1):(v=t.cm.options.specialCharPlaceholder(f[0]),v.setAttribute("cm-text",f[0]),Qr&&Zr<9?l.appendChild(i("span",[v])):l.appendChild(v),t.col+=1);t.map.push(t.pos,t.pos+1,v),t.pos++}}else t.col+=e.length,l=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,l),Qr&&Zr<9&&(h=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||o||r||h||a){var w=n||"";o&&(w+=o),r&&(w+=r);var x=i("span",[l],w,a);return s&&(x.title=s),t.content.appendChild(x)}t.content.appendChild(l)}}function pe(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,i="",o=0;o<t.length;o++){var r=t.charAt(o);" "!=r||!n||o!=t.length-1&&32!=t.charCodeAt(o+1)||(r="Â "),i+=r,n=" "==r}return i}function me(t,e){return function(n,i,o,r,s,a,l){o=o?o+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var h=void 0,d=0;d<e.length&&(h=e[d],!(h.to>c&&h.from<=c));d++);if(h.to>=u)return t(n,i,o,r,s,a,l);t(n,i.slice(0,h.to-c),o,r,null,a,l),r=null,i=i.slice(h.to-c),c=h.to}}}function ge(t,e,n,i){var o=!i&&n.widgetNode;o&&t.map.push(t.pos,t.pos+e,o),!i&&t.cm.display.input.needsContentAttribute&&(o||(o=t.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",n.id)),o&&(t.cm.display.input.setUneditable(o),t.content.appendChild(o)),t.pos+=e,t.trailingSpace=!1}function ve(t,e,n){var i=t.markedSpans,o=t.text,r=0;if(i)for(var s,a,l,c,u,h,d,f=o.length,p=0,m=1,g="",v=0;;){if(v==p){l=c=u=h=a="",d=null,v=1/0;for(var y=[],b=void 0,w=0;w<i.length;++w){var x=i[w],C=x.marker;"bookmark"==C.type&&x.from==p&&C.widgetNode?y.push(C):x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),C.className&&(l+=" "+C.className),C.css&&(a=(a?a+";":"")+C.css),C.startStyle&&x.from==p&&(u+=" "+C.startStyle),C.endStyle&&x.to==v&&(b||(b=[])).push(C.endStyle,x.to),C.title&&!h&&(h=C.title),C.collapsed&&(!d||st(d.marker,C)<0)&&(d=x)):x.from>p&&v>x.from&&(v=x.from)}if(b)for(var _=0;_<b.length;_+=2)b[_+1]==v&&(c+=" "+b[_]);if(!d||d.from==p)for(var S=0;S<y.length;++S)ge(e,0,y[S]);if(d&&(d.from||0)==p){if(ge(e,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var k=Math.min(f,v);;){if(g){var T=p+g.length;if(!d){var E=T>k?g.slice(0,k-p):g;e.addToken(e,E,s?s+l:l,u,p+E.length==v?c:"",h,a)}if(T>=k){g=g.slice(k-p),p=k;break}p=T,u=""}g=o.slice(r,r=n[m++]),s=ue(n[m++],e.cm.options)}}else for(var L=1;L<n.length;L+=2)e.addToken(e,o.slice(r,r=n[L]),ue(n[L+1],e.cm.options))}function ye(t,e,n){this.line=e,this.rest=ft(e),this.size=this.rest?M(m(this.rest))-n+1:1,this.node=this.text=null,this.hidden=gt(t,e)}function be(t,e,n){for(var i,o=[],r=e;r<n;r=i){var s=new ye(t.doc,E(t.doc,r),r);i=r+s.size,o.push(s)}return o}function we(t){Xs?Xs.ops.push(t):t.ownsGroup=Xs={ops:[t],delayedCallbacks:[]}}function xe(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var o=t.ops[i];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(n<e.length)}function Ce(t,e){var n=t.ownsGroup;if(n)try{xe(n)}finally{Xs=null,e(n)}}function _e(t,e){var n=Lt(t,e);if(n.length){var i,o=Array.prototype.slice.call(arguments,2);Xs?i=Xs.delayedCallbacks:Ys?i=Ys:(i=Ys=[],setTimeout(Se,0));for(var r=0;r<n.length;++r)!function(t){i.push(function(){return n[t].apply(null,o)})}(r)}}function Se(){var t=Ys;Ys=null;for(var e=0;e<t.length;++e)t[e]()}function ke(t,e,n,i){for(var o=0;o<e.changes.length;o++){var r=e.changes[o];"text"==r?Pe(t,e):"gutter"==r?Me(t,e,n,i):"class"==r?Ae(t,e):"widget"==r&&Ne(t,e,i)}e.changes=null}function Te(t){return t.node==t.text&&(t.node=i("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),Qr&&Zr<8&&(t.node.style.zIndex=2)),t.node}function Ee(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var o=Te(e);e.background=o.insertBefore(i("div",null,n),o.firstChild),t.display.input.setUneditable(e.background)}}function Le(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):he(t,e)}function Pe(t,e){var n=e.text.className,i=Le(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,Ae(t,e)):n&&(e.text.className=n)}function Ae(t,e){Ee(t,e),e.line.wrapClass?Te(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}
function Me(t,e,n,o){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var r=Te(e);e.gutterBackground=i("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),r.insertBefore(e.gutterBackground,e.text)}var s=e.line.gutterMarkers;if(t.options.lineNumbers||s){var a=Te(e),l=e.gutter=i("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(t.display.input.setUneditable(l),a.insertBefore(l,e.text),e.line.gutterClass&&(l.className+=" "+e.line.gutterClass),!t.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(e.lineNumber=l.appendChild(i("div",I(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),s)for(var c=0;c<t.options.gutters.length;++c){var u=t.options.gutters[c],h=s.hasOwnProperty(u)&&s[u];h&&l.appendChild(i("div",[h],"CodeMirror-gutter-elt","left: "+o.gutterLeft[u]+"px; width: "+o.gutterWidth[u]+"px"))}}}function Ne(t,e,n){e.alignable&&(e.alignable=null);for(var i=e.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,"CodeMirror-linewidget"==i.className&&e.node.removeChild(i);Ie(t,e,n)}function De(t,e,n,i){var o=Le(t,e);return e.text=e.node=o.pre,o.bgClass&&(e.bgClass=o.bgClass),o.textClass&&(e.textClass=o.textClass),Ae(t,e),Me(t,e,n,i),Ie(t,e,i),e.node}function Ie(t,e,n){if(Oe(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)Oe(t,e.rest[i],e,n,!1)}function Oe(t,e,n,o,r){if(e.widgets)for(var s=Te(n),a=0,l=e.widgets;a<l.length;++a){var c=l[a],u=i("div",[c.node],"CodeMirror-linewidget");c.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),He(c,u,n,o),t.display.input.setUneditable(u),r&&c.above?s.insertBefore(u,n.gutter||n.text):s.appendChild(u),_e(c,"redraw")}}function He(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var o=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(o-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=o+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function Fe(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!r(document.body,t.node)){var o="position: relative;";t.coverGutter&&(o+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(o+="width: "+e.display.wrapper.clientWidth+"px;"),n(e.display.measure,i("div",[t.node],null,o))}return t.height=t.node.parentNode.offsetHeight}function Re(t,e){for(var n=Bt(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function Be(t){return t.lineSpace.offsetTop}function We(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function $e(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=n(t.measure,i("pre","x")),o=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(o.paddingLeft),right:parseInt(o.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function ze(t){return xs-t.display.nativeBarWidth}function je(t){return t.display.scroller.clientWidth-ze(t)-t.display.barWidth}function qe(t){return t.display.scroller.clientHeight-ze(t)-t.display.barHeight}function Ue(t,e,n){var i=t.options.lineWrapping,o=i&&je(t);if(!e.measure.heights||i&&e.measure.width!=o){var r=e.measure.heights=[];if(i){e.measure.width=o;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&r.push((l.bottom+c.top)/2-n.top)}}r.push(n.bottom-n.top)}}function Ve(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var o=0;o<t.rest.length;o++)if(M(t.rest[o])>n)return{map:t.measure.maps[o],cache:t.measure.caches[o],before:!0}}function Ke(t,e){e=ht(e);var i=M(e),o=t.display.externalMeasured=new ye(t.doc,e,i);o.lineN=i;var r=o.built=he(t,o);return o.text=r.pre,n(t.display.lineMeasure,r.pre),o}function Xe(t,e,n,i){return Qe(t,Ge(t,e),n,i)}function Ye(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[kn(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Ge(t,e){var n=M(e),i=Ye(t,n);i&&!i.text?i=null:i&&i.changes&&(ke(t,i,n,wn(t)),t.curOp.forceUpdate=!0),i||(i=Ke(t,e));var o=Ve(i,e,n);return{line:e,view:i,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Qe(t,e,n,i,o){e.before&&(n=-1);var r,s=n+(i||"");return e.cache.hasOwnProperty(s)?r=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Ue(t,e.view,e.rect),e.hasHeights=!0),r=tn(t,e,n,i),r.bogus||(e.cache[s]=r)),{left:r.left,right:r.right,top:o?r.rtop:r.top,bottom:o?r.rbottom:r.bottom}}function Ze(t,e,n){for(var i,o,r,s,a,l,c=0;c<t.length;c+=3)if(a=t[c],l=t[c+1],e<a?(o=0,r=1,s="left"):e<l?(o=e-a,r=o+1):(c==t.length-3||e==l&&t[c+3]>e)&&(r=l-a,o=r-1,e>=l&&(s="right")),null!=o){if(i=t[c+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==o)for(;c&&t[c-2]==t[c-3]&&t[c-1].insertLeft;)i=t[2+(c-=3)],s="left";if("right"==n&&o==l-a)for(;c<t.length-3&&t[c+3]==t[c+4]&&!t[c+5].insertLeft;)i=t[(c+=3)+2],s="right";break}return{node:i,start:o,end:r,collapse:s,coverStart:a,coverEnd:l}}function Je(t,e){var n=Gs;if("left"==e)for(var i=0;i<t.length&&(n=t[i]).left==n.right;i++);else for(var o=t.length-1;o>=0&&(n=t[o]).left==n.right;o--);return n}function tn(t,e,n,i){var o,r=Ze(e.map,n,i),s=r.node,a=r.start,l=r.end,c=r.collapse;if(3==s.nodeType){for(var u=0;u<4;u++){for(;a&&_(e.line.text.charAt(r.coverStart+a));)--a;for(;r.coverStart+l<r.coverEnd&&_(e.line.text.charAt(r.coverStart+l));)++l;if(o=Qr&&Zr<9&&0==a&&l==r.coverEnd-r.coverStart?s.parentNode.getBoundingClientRect():Je(fs(s,a,l).getClientRects(),i),o.left||o.right||0==a)break;l=a,a-=1,c="right"}Qr&&Zr<11&&(o=en(t.display.measure,o))}else{a>0&&(c=i="right");var h;o=t.options.lineWrapping&&(h=s.getClientRects()).length>1?h["right"==i?h.length-1:0]:s.getBoundingClientRect()}if(Qr&&Zr<9&&!a&&(!o||!o.left&&!o.right)){var d=s.parentNode.getClientRects()[0];o=d?{left:d.left,right:d.left+bn(t.display),top:d.top,bottom:d.bottom}:Gs}for(var f=o.top-e.rect.top,p=o.bottom-e.rect.top,m=(f+p)/2,g=e.view.measure.heights,v=0;v<g.length-1&&!(m<g[v]);v++);var y=v?g[v-1]:0,b=g[v],w={left:("right"==c?o.right:o.left)-e.rect.left,right:("left"==c?o.left:o.right)-e.rect.left,top:y,bottom:b};return o.left||o.right||(w.bogus=!0),t.options.singleCursorHeightPerLine||(w.rtop=f,w.rbottom=p),w}function en(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!jt(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}function nn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function on(t){t.display.externalMeasure=null,e(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)nn(t.display.view[n])}function rn(t){on(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function sn(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function an(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ln(t,e,n,i,o){if(!o&&e.widgets)for(var r=0;r<e.widgets.length;++r)if(e.widgets[r].above){var s=Fe(e.widgets[r]);n.top+=s,n.bottom+=s}if("line"==i)return n;i||(i="local");var a=yt(e);if("local"==i?a+=Be(t.display):a-=t.display.viewOffset,"page"==i||"window"==i){var l=t.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==i?0:an());var c=l.left+("window"==i?0:sn());n.left+=c,n.right+=c}return n.top+=a,n.bottom+=a,n}function cn(t,e,n){if("div"==n)return e;var i=e.left,o=e.top;if("page"==n)i-=sn(),o-=an();else if("local"==n||!n){var r=t.display.sizer.getBoundingClientRect();i+=r.left,o+=r.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:o-s.top}}function un(t,e,n,i,o){return i||(i=E(t.doc,e.line)),ln(t,i,Xe(t,i,e.ch,o),n)}function hn(t,e,n,i,o,r){function s(e,s){var a=Qe(t,o,e,s?"right":"left",r);return s?a.left=a.right:a.right=a.left,ln(t,i,a,n)}function a(t,e,n){var i=l[e],o=i.level%2!=0;return s(n?t-1:t,o!=n)}i=i||E(t.doc,e.line),o||(o=Ge(t,i));var l=_t(i,t.doc.direction),c=e.ch,u=e.sticky;if(c>=i.text.length?(c=i.text.length,u="before"):c<=0&&(c=0,u="after"),!l)return s("before"==u?c-1:c,"before"==u);var h=Ct(l,c,u),d=Ms,f=a(c,h,"before"==u);return null!=d&&(f.other=a(c,d,"before"!=u)),f}function dn(t,e){var n=0;e=z(t.doc,e),t.options.lineWrapping||(n=bn(t.display)*e.ch);var i=E(t.doc,e.line),o=yt(i)+Be(t.display);return{left:n,right:n,top:o,bottom:o+i.height}}function fn(t,e,n,i,o){var r=O(t,e,n);return r.xRel=o,i&&(r.outside=!0),r}function pn(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return fn(i.first,0,null,!0,-1);var o=N(i,n),r=i.first+i.size-1;if(o>r)return fn(i.first+i.size-1,E(i,r).text.length,null,!0,1);e<0&&(e=0);for(var s=E(i,o);;){var a=vn(t,s,o,e,n),l=ct(s),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;o=M(s=c.to.line)}}function mn(t,e,n,i){var o=function(i){return ln(t,e,Qe(t,n,i),"line")},r=e.text.length,s=k(function(t){return o(t-1).bottom<=i},r,0);return r=k(function(t){return o(t).top>i},s,r),{begin:s,end:r}}function gn(t,e,n,i){return mn(t,e,n,ln(t,e,Qe(t,n,i),"line").top)}function vn(t,e,n,i,o){o-=yt(e);var r,s=0,a=e.text.length,l=Ge(t,e);if(_t(e,t.doc.direction)){if(t.options.lineWrapping){var c;c=mn(t,e,l,o),s=c.begin,a=c.end}r=new O(n,s);var u,h,d=hn(t,r,"line",e,l).left,f=d<i?1:-1,p=d-i;do{if(u=p,h=r,null==(r=Et(t,e,r,f))||r.ch<s||a<=("before"==r.sticky?r.ch-1:r.ch)){r=h;break}p=hn(t,r,"line",e,l).left-i}while(f<0!=p<0&&Math.abs(p)<=Math.abs(u));if(Math.abs(p)>Math.abs(u)){if(p<0==u<0)throw new Error("Broke out of infinite loop in coordsCharInner");r=h}}else{var m=k(function(n){var r=ln(t,e,Qe(t,l,n),"line");return r.top>o?(a=Math.min(n,a),!0):!(r.bottom<=o)&&(r.left>i||!(r.right<i)&&i-r.left<r.right-i)},s,a);m=S(e.text,m,1),r=new O(n,m,m==a?"before":"after")}var g=hn(t,r,"line",e,l);return(o<g.top||g.bottom<o)&&(r.outside=!0),r.xRel=i<g.left?-1:i>g.right?1:0,r}function yn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Us){Us=i("pre");for(var o=0;o<49;++o)Us.appendChild(document.createTextNode("x")),Us.appendChild(i("br"));Us.appendChild(document.createTextNode("x"))}n(t.measure,Us);var r=Us.offsetHeight/50;return r>3&&(t.cachedTextHeight=r),e(t.measure),r||1}function bn(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=i("span","xxxxxxxxxx"),o=i("pre",[e]);n(t.measure,o);var r=e.getBoundingClientRect(),s=(r.right-r.left)/10;return s>2&&(t.cachedCharWidth=s),s||10}function wn(t){for(var e=t.display,n={},i={},o=e.gutters.clientLeft,r=e.gutters.firstChild,s=0;r;r=r.nextSibling,++s)n[t.options.gutters[s]]=r.offsetLeft+r.clientLeft+o,i[t.options.gutters[s]]=r.clientWidth;return{fixedPos:xn(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function xn(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function Cn(t){var e=yn(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/bn(t.display)-3);return function(o){if(gt(t.doc,o))return 0;var r=0;if(o.widgets)for(var s=0;s<o.widgets.length;s++)o.widgets[s].height&&(r+=o.widgets[s].height);return n?r+(Math.ceil(o.text.length/i)||1)*e:r+e}}function _n(t){var e=t.doc,n=Cn(t);e.iter(function(t){var e=n(t);e!=t.height&&A(t,e)})}function Sn(t,e,n,i){var o=t.display;if(!n&&"true"==Bt(e).getAttribute("cm-not-content"))return null;var r,s,a=o.lineSpace.getBoundingClientRect();try{r=e.clientX-a.left,s=e.clientY-a.top}catch(e){return null}var l,c=pn(t,r,s);if(i&&1==c.xRel&&(l=E(t.doc,c.line).text).length==c.ch){var u=h(l,l.length,t.options.tabSize)-l.length;c=O(c.line,Math.max(0,Math.round((r-$e(t.display).left)/bn(t.display))-u))}return c}function kn(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function Tn(t){t.display.input.showSelection(t.display.input.prepareSelection())}function En(t,e){for(var n=t.doc,i={},o=i.cursors=document.createDocumentFragment(),r=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(!1!==e||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var l=a.empty();(l||t.options.showCursorWhenSelecting)&&Ln(t,a.head,o),l||Pn(t,a,r)}}return i}function Ln(t,e,n){var o=hn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(i("div","Â ","CodeMirror-cursor"));if(r.style.left=o.left+"px",r.style.top=o.top+"px",r.style.height=Math.max(0,o.bottom-o.top)*t.options.cursorHeight+"px",o.other){var s=n.appendChild(i("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=o.other.left+"px",s.style.top=o.other.top+"px",s.style.height=.85*(o.other.bottom-o.other.top)+"px"}}function Pn(t,e,n){function o(t,e,n,o){e<0&&(e=0),e=Math.round(e),o=Math.round(o),l.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?h-t:n)+"px;\n                             height: "+(o-e)+"px"))}function r(e,n,i){function r(n,i){return un(t,O(e,n),"div",c,i)}var s,l,c=E(a,e),d=c.text.length;return xt(_t(c,a.direction),n||0,null==i?d:i,function(t,e,a){var c,f,p,m=r(t,"left");if(t==e)c=m,f=p=m.left;else{if(c=r(e-1,"right"),"rtl"==a){var g=m;m=c,c=g}f=m.left,p=c.right}null==n&&0==t&&(f=u),c.top-m.top>3&&(o(f,m.top,null,m.bottom),f=u,m.bottom<c.top&&o(f,m.bottom,null,c.top)),null==i&&e==d&&(p=h),(!s||m.top<s.top||m.top==s.top&&m.left<s.left)&&(s=m),(!l||c.bottom>l.bottom||c.bottom==l.bottom&&c.right>l.right)&&(l=c),f<u+1&&(f=u),o(f,c.top,p-f,c.bottom)}),{start:s,end:l}}var s=t.display,a=t.doc,l=document.createDocumentFragment(),c=$e(t.display),u=c.left,h=Math.max(s.sizerWidth,je(t)-s.sizer.offsetLeft)-c.right,d=e.from(),f=e.to();if(d.line==f.line)r(d.line,d.ch,f.ch);else{var p=E(a,d.line),m=E(a,f.line),g=ht(p)==ht(m),v=r(d.line,d.ch,g?p.text.length+1:null).end,y=r(f.line,g?0:null,f.ch).start;g&&(v.top<y.top-2?(o(v.right,v.top,null,v.bottom),o(u,y.top,y.left,y.bottom)):o(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&o(u,v.bottom,null,y.top)}n.appendChild(l)}function An(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Mn(t){t.state.focused||(t.display.input.focus(),Dn(t))}function Nn(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,In(t))},100)}function Dn(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(At(t,"focus",t,e),t.state.focused=!0,a(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),Jr&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),An(t))}function In(t,e){t.state.delayingBlurEvent||(t.state.focused&&(At(t,"blur",t,e),t.state.focused=!1,gs(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function On(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=xn(e)-e.scroller.scrollLeft+t.doc.scrollLeft,o=e.gutters.offsetWidth,r=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=r),n[s].gutterBackground&&(n[s].gutterBackground.style.left=r));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=r}t.options.fixedGutter&&(e.gutters.style.left=i+o+"px")}}function Hn(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=I(t.options,e.first+e.size-1),o=t.display;if(n.length!=o.lineNumChars){var r=o.measure.appendChild(i("div",[i("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=r.firstChild.offsetWidth,a=r.offsetWidth-s;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(s,o.lineGutter.offsetWidth-a)+1,o.lineNumWidth=o.lineNumInnerWidth+a,o.lineNumChars=o.lineNumInnerWidth?n.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",Ei(t),!0}return!1}function Fn(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var o=e.view[i],r=void 0;if(!o.hidden){if(Qr&&Zr<8){var s=o.node.offsetTop+o.node.offsetHeight;r=s-n,n=s}else{var a=o.node.getBoundingClientRect();r=a.bottom-a.top}var l=o.line.height-r;if(r<2&&(r=yn(e)),(l>.001||l<-.001)&&(A(o.line,r),Rn(o.line),o.rest))for(var c=0;c<o.rest.length;c++)Rn(o.rest[c])}}}function Rn(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.parentNode.offsetHeight}function Bn(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-Be(t));var o=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,r=N(e,i),s=N(e,o);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<r?(r=a,s=N(e,yt(E(e,a))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=s&&(r=N(e,yt(E(e,l))-t.wrapper.clientHeight),s=l)}return{from:r,to:Math.max(s,r+1)}}function Wn(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Kr||ki(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbars.setScrollTop(e),Kr&&ki(t),wi(t,100))}function $n(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,On(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function zn(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function jn(t){var e=zn(t);return e.x*=Zs,e.y*=Zs,e}function qn(t,e){var n=zn(e),i=n.x,o=n.y,r=t.display,s=r.scroller,a=s.scrollWidth>s.clientWidth,l=s.scrollHeight>s.clientHeight;if(i&&a||o&&l){if(o&&cs&&Jr)t:for(var c=e.target,u=r.view;c!=s;c=c.parentNode)for(var h=0;h<u.length;h++)if(u[h].node==c){t.display.currentWheelTarget=c;break t}if(i&&!Kr&&!ns&&null!=Zs)return o&&l&&Wn(t,Math.max(0,Math.min(s.scrollTop+o*Zs,s.scrollHeight-s.clientHeight))),$n(t,Math.max(0,Math.min(s.scrollLeft+i*Zs,s.scrollWidth-s.clientWidth))),(!o||o&&l)&&Ot(e),void(r.wheelStartX=null);if(o&&null!=Zs){var d=o*Zs,f=t.doc.scrollTop,p=f+r.wrapper.clientHeight;d<0?f=Math.max(0,f+d-50):p=Math.min(t.doc.height,p+d+50),ki(t,{top:f,bottom:p})}Qs<20&&(null==r.wheelStartX?(r.wheelStartX=s.scrollLeft,r.wheelStartY=s.scrollTop,r.wheelDX=i,r.wheelDY=o,setTimeout(function(){if(null!=r.wheelStartX){var t=s.scrollLeft-r.wheelStartX,e=s.scrollTop-r.wheelStartY,n=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Zs=(Zs*Qs+n)/(Qs+1),++Qs)}},200)):(r.wheelDX+=i,r.wheelDY+=o))}}function Un(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+We(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+ze(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}function Vn(t,e){e||(e=Un(t));var n=t.display.barWidth,i=t.display.barHeight;Kn(t,e);for(var o=0;o<4&&n!=t.display.barWidth||i!=t.display.barHeight;o++)n!=t.display.barWidth&&t.options.lineWrapping&&Fn(t),Kn(t,Un(t)),n=t.display.barWidth,i=t.display.barHeight}function Kn(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}function Xn(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&gs(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new ea[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Is(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?$n(t,e):Wn(t,e)},t),t.display.scrollbars.addClass&&a(t.display.wrapper,t.display.scrollbars.addClass)}function Yn(t,e){if(!Mt(t,"scrollCursorIntoView")){var n=t.display,o=n.sizer.getBoundingClientRect(),r=null;if(e.top+o.top<0?r=!0:e.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!rs){var s=i("div","â",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-Be(t.display))+"px;\n                         height: "+(e.bottom-e.top+ze(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(s),s.scrollIntoView(r),t.display.lineSpace.removeChild(s)}}}function Gn(t,e,n,i){null==i&&(i=0);for(var o,r=0;r<5;r++){var s=!1,a=hn(t,e),l=n&&n!=e?hn(t,n):a;o={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i};var c=Zn(t,o),u=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=c.scrollTop&&(Wn(t,c.scrollTop),Math.abs(t.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&($n(t,c.scrollLeft),Math.abs(t.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return o}function Qn(t,e){var n=Zn(t,e);null!=n.scrollTop&&Wn(t,n.scrollTop),null!=n.scrollLeft&&$n(t,n.scrollLeft)}function Zn(t,e){var n=t.display,i=yn(t.display);e.top<0&&(e.top=0);var o=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,r=qe(t),s={};e.bottom-e.top>r&&(e.bottom=e.top+r);var a=t.doc.height+We(n),l=e.top<i,c=e.bottom>a-i;if(e.top<o)s.scrollTop=l?0:e.top;else if(e.bottom>o+r){var u=Math.min(e.top,(c?a:e.bottom)-r);u!=o&&(s.scrollTop=u)}var h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,d=je(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),f=e.right-e.left>d;return f&&(e.right=e.left+d),e.left<10?s.scrollLeft=0:e.left<h?s.scrollLeft=Math.max(0,e.left-(f?0:10)):e.right>d+h-3&&(s.scrollLeft=e.right+(f?0:10)-d),s}function Jn(t,e,n){null==e&&null==n||ei(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=n&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function ti(t){ei(t);var e=t.getCursor(),n=e,i=e;t.options.lineWrapping||(n=e.ch?O(e.line,e.ch-1):e,i=O(e.line,e.ch+1)),t.curOp.scrollToPos={from:n,to:i,margin:t.options.cursorScrollMargin}}function ei(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var n=dn(t,e.from),i=dn(t,e.to),o=Zn(t,{left:Math.min(n.left,i.left),top:Math.min(n.top,i.top)-e.margin,right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)+e.margin});t.scrollTo(o.scrollLeft,o.scrollTop)}}function ni(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++na},we(t.curOp)}function ii(t){Ce(t.curOp,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;oi(t)})}function oi(t){for(var e=t.ops,n=0;n<e.length;n++)ri(e[n]);for(var i=0;i<e.length;i++)si(e[i]);for(var o=0;o<e.length;o++)ai(e[o]);for(var r=0;r<e.length;r++)li(e[r]);for(var s=0;s<e.length;s++)ci(e[s])}function ri(t){var e=t.cm,n=e.display;Ci(e),t.updateMaxLine&&wt(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new ia(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function si(t){t.updatedDisplay=t.mustUpdate&&_i(t.cm,t.update)}function ai(t){var e=t.cm,n=e.display;t.updatedDisplay&&Fn(e),t.barMeasure=Un(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Xe(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+ze(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-je(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection(t.focus))}function li(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&$n(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==s()&&(!document.hasFocus||document.hasFocus());t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Vn(e,t.barMeasure),t.updatedDisplay&&Li(e,t.barMeasure),t.selectionChanged&&An(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&Mn(t.cm)}function ci(t){var e=t.cm,n=e.display,i=e.doc;t.updatedDisplay&&Si(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==t.scrollTop||n.scroller.scrollTop==t.scrollTop&&!t.forceScroll||(i.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,t.scrollTop)),n.scrollbars.setScrollTop(i.scrollTop),n.scroller.scrollTop=i.scrollTop),null==t.scrollLeft||n.scroller.scrollLeft==t.scrollLeft&&!t.forceScroll||(i.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,t.scrollLeft)),n.scrollbars.setScrollLeft(i.scrollLeft),n.scroller.scrollLeft=i.scrollLeft,On(e)),t.scrollToPos&&Yn(e,Gn(e,z(i,t.scrollToPos.from),z(i,t.scrollToPos.to),t.scrollToPos.margin));var o=t.maybeHiddenMarkers,r=t.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||At(o[s],"hide");if(r)for(var a=0;a<r.length;++a)r[a].lines.length&&At(r[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&At(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function ui(t,e){if(t.curOp)return e();ni(t);try{return e()}finally{ii(t)}}function hi(t,e){return function(){if(t.curOp)return e.apply(t,arguments);ni(t);try{return e.apply(t,arguments)}finally{ii(t)}}}function di(t){return function(){if(this.curOp)return t.apply(this,arguments);ni(this);try{return t.apply(this,arguments)}finally{ii(this)}}}function fi(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);ni(e);try{return t.apply(this,arguments)}finally{ii(e)}}}function pi(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var o=t.display;if(i&&n<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>e)&&(o.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=o.viewTo)As&&pt(t.doc,e)<o.viewTo&&gi(t);else if(n<=o.viewFrom)As&&mt(t.doc,n+i)>o.viewFrom?gi(t):(o.viewFrom+=i,o.viewTo+=i);else if(e<=o.viewFrom&&n>=o.viewTo)gi(t);else if(e<=o.viewFrom){var r=vi(t,n,n+i,1);r?(o.view=o.view.slice(r.index),o.viewFrom=r.lineN,o.viewTo+=i):gi(t)}else if(n>=o.viewTo){var s=vi(t,e,e,-1);s?(o.view=o.view.slice(0,s.index),o.viewTo=s.lineN):gi(t)}else{var a=vi(t,e,e,-1),l=vi(t,n,n+i,1);a&&l?(o.view=o.view.slice(0,a.index).concat(be(t,a.lineN,l.lineN)).concat(o.view.slice(l.index)),o.viewTo+=i):gi(t)}var c=o.externalMeasured;c&&(n<c.lineN?c.lineN+=i:e<c.lineN+c.size&&(o.externalMeasured=null))}function mi(t,e,n){t.curOp.viewChanged=!0;var i=t.display,o=t.display.externalMeasured;if(o&&e>=o.lineN&&e<o.lineN+o.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var r=i.view[kn(t,e)];if(null!=r.node){var s=r.changes||(r.changes=[]);-1==d(s,n)&&s.push(n)}}}function gi(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function vi(t,e,n,i){var o,r=kn(t,e),s=t.display.view;if(!As||n==t.doc.first+t.doc.size)return{index:r,lineN:n};for(var a=t.display.viewFrom,l=0;l<r;l++)a+=s[l].size;if(a!=e){if(i>0){if(r==s.length-1)return null;o=a+s[r].size-e,r++}else o=a-e;e+=o,n+=o}for(;pt(t.doc,n)!=n;){if(r==(i<0?0:s.length-1))return null;n+=i*s[r-(i<0?1:0)].size,r+=i}return{index:r,lineN:n}}function yi(t,e,n){var i=t.display;0==i.view.length||e>=i.viewTo||n<=i.viewFrom?(i.view=be(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=be(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(kn(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(be(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,kn(t,n)))),i.viewTo=n}function bi(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var o=e[i];o.hidden||o.node&&!o.changes||++n}return n}function wi(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,c(xi,t))}function xi(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=Yt(e.mode,te(t,e.frontier)),o=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(r){if(e.frontier>=t.display.viewFrom){var s=r.styles,a=r.text.length>t.options.maxHighlightLength,l=Zt(t,r,a?Yt(e.mode,i):i,!0);r.styles=l.styles;var c=r.styleClasses,u=l.classes;u?r.styleClasses=u:c&&(r.styleClasses=null);for(var h=!s||s.length!=r.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!h&&d<s.length;++d)h=s[d]!=r.styles[d];h&&o.push(e.frontier),r.stateAfter=a?i:Yt(e.mode,i)}else r.text.length<=t.options.maxHighlightLength&&ee(t,r.text,i),r.stateAfter=e.frontier%5==0?Yt(e.mode,i):null;if(++e.frontier,+new Date>n)return wi(t,t.options.workDelay),!0}),o.length&&ui(t,function(){for(var e=0;e<o.length;e++)mi(t,o[e],"text")})}}function Ci(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=ze(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=ze(t)+"px",e.scrollbarsClipped=!0)}function _i(t,n){var i=t.display,o=t.doc;if(n.editorIsHidden)return gi(t),!1;if(!n.force&&n.visible.from>=i.viewFrom&&n.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==bi(t))return!1;Hn(t)&&(gi(t),n.dims=wn(t));var r=o.first+o.size,a=Math.max(n.visible.from-t.options.viewportMargin,o.first),l=Math.min(r,n.visible.to+t.options.viewportMargin);i.viewFrom<a&&a-i.viewFrom<20&&(a=Math.max(o.first,i.viewFrom)),i.viewTo>l&&i.viewTo-l<20&&(l=Math.min(r,i.viewTo)),As&&(a=pt(t.doc,a),l=mt(t.doc,l));var c=a!=i.viewFrom||l!=i.viewTo||i.lastWrapHeight!=n.wrapperHeight||i.lastWrapWidth!=n.wrapperWidth;yi(t,a,l),
i.viewOffset=yt(E(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var u=bi(t);if(!c&&0==u&&!n.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var h=s();return u>4&&(i.lineDiv.style.display="none"),Ti(t,i.updateLineNumbers,n.dims),u>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,h&&s()!=h&&h.offsetHeight&&h.focus(),e(i.cursorDiv),e(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,c&&(i.lastWrapHeight=n.wrapperHeight,i.lastWrapWidth=n.wrapperWidth,wi(t,400)),i.updateLineNumbers=null,!0}function Si(t,e){for(var n=e.viewport,i=!0;(i&&t.options.lineWrapping&&e.oldDisplayWidth!=je(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+We(t.display)-qe(t),n.top)}),e.visible=Bn(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&_i(t,e);i=!1){Fn(t);var o=Un(t);Tn(t),Vn(t,o),Li(t,o)}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ki(t,e){var n=new ia(t,e);if(_i(t,n)){Fn(t),Si(t,n);var i=Un(t);Tn(t),Vn(t,i),Li(t,i),n.finish()}}function Ti(t,n,i){function o(e){var n=e.nextSibling;return Jr&&cs&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var r=t.display,s=t.options.lineNumbers,a=r.lineDiv,l=a.firstChild,c=r.view,u=r.viewFrom,h=0;h<c.length;h++){var f=c[h];if(f.hidden);else if(f.node&&f.node.parentNode==a){for(;l!=f.node;)l=o(l);var p=s&&null!=n&&n<=u&&f.lineNumber;f.changes&&(d(f.changes,"gutter")>-1&&(p=!1),ke(t,f,u,i)),p&&(e(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(I(t.options,u)))),l=f.node.nextSibling}else{var m=De(t,f,u,i);a.insertBefore(m,l)}u+=f.size}for(;l;)l=o(l)}function Ei(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function Li(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+ze(t)+"px"}function Pi(t){var n=t.display.gutters,o=t.options.gutters;e(n);for(var r=0;r<o.length;++r){var s=o[r],a=n.appendChild(i("div",null,"CodeMirror-gutter "+s));"CodeMirror-linenumbers"==s&&(t.display.lineGutter=a,a.style.width=(t.display.lineNumWidth||1)+"px")}n.style.display=r?"":"none",Ei(t)}function Ai(t){var e=d(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function Mi(t,e){var n=t[e];t.sort(function(t,e){return H(t.from(),e.from())}),e=d(t,n);for(var i=1;i<t.length;i++){var o=t[i],r=t[i-1];if(H(r.to(),o.from())>=0){var s=W(r.from(),o.from()),a=B(r.to(),o.to()),l=r.empty()?o.from()==o.head:r.from()==r.head;i<=e&&--e,t.splice(--i,2,new ra(l?a:s,l?s:a))}}return new oa(t,e)}function Ni(t,e){return new oa([new ra(t,e||t)],0)}function Di(t){return t.text?O(t.from.line+t.text.length-1,m(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Ii(t,e){if(H(t,e.from)<0)return t;if(H(t,e.to)<=0)return Di(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=Di(e).ch-e.to.ch),O(n,i)}function Oi(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var o=t.sel.ranges[i];n.push(new ra(Ii(o.anchor,e),Ii(o.head,e)))}return Mi(n,t.sel.primIndex)}function Hi(t,e,n){return t.line==e.line?O(n.line,t.ch-e.ch+n.ch):O(n.line+(t.line-e.line),t.ch)}function Fi(t,e,n){for(var i=[],o=O(t.first,0),r=o,s=0;s<e.length;s++){var a=e[s],l=Hi(a.from,o,r),c=Hi(Di(a),o,r);if(o=a.to,r=c,"around"==n){var u=t.sel.ranges[s],h=H(u.head,u.anchor)<0;i[s]=new ra(h?c:l,h?l:c)}else i[s]=new ra(l,l)}return new oa(i,t.sel.primIndex)}function Ri(t){t.doc.mode=Kt(t.options,t.doc.modeOption),Bi(t)}function Bi(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,wi(t,100),t.state.modeGen++,t.curOp&&pi(t)}function Wi(t,e){return 0==e.from.ch&&0==e.to.ch&&""==m(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function $i(t,e,n,i){function o(t){return n?n[t]:null}function r(t,n,o){le(t,n,o,i),_e(t,"change",t,e)}function s(t,e){for(var n=[],r=t;r<e;++r)n.push(new qs(c[r],o(r),i));return n}var a=e.from,l=e.to,c=e.text,u=E(t,a.line),h=E(t,l.line),d=m(c),f=o(c.length-1),p=l.line-a.line;if(e.full)t.insert(0,s(0,c.length)),t.remove(c.length,t.size-c.length);else if(Wi(t,e)){var g=s(0,c.length-1);r(h,h.text,f),p&&t.remove(a.line,p),g.length&&t.insert(a.line,g)}else if(u==h)if(1==c.length)r(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),f);else{var v=s(1,c.length-1);v.push(new qs(d+u.text.slice(l.ch),f,i)),r(u,u.text.slice(0,a.ch)+c[0],o(0)),t.insert(a.line+1,v)}else if(1==c.length)r(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),o(0)),t.remove(a.line+1,p);else{r(u,u.text.slice(0,a.ch)+c[0],o(0)),r(h,d+h.text.slice(l.ch),f);var y=s(1,c.length-1);p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,y)}_e(t,"change",t,e)}function zi(t,e,n){function i(t,o,r){if(t.linked)for(var s=0;s<t.linked.length;++s){var a=t.linked[s];if(a.doc!=o){var l=r&&a.sharedHist;n&&!l||(e(a.doc,l),i(a.doc,t,l))}}}i(t,null,!0)}function ji(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,_n(t),Ri(t),qi(t),t.options.lineWrapping||wt(t),t.options.mode=e.modeOption,pi(t)}function qi(t){("rtl"==t.doc.direction?a:gs)(t.display.lineDiv,"CodeMirror-rtl")}function Ui(t){ui(t,function(){qi(t),pi(t)})}function Vi(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Ki(t,e){var n={from:R(e.from),to:Di(e),text:L(t,e.from,e.to)};return to(t,n,e.from.line,e.to.line+1),zi(t,function(t){return to(t,n,e.from.line,e.to.line+1)},!0),n}function Xi(t){for(;t.length&&m(t).ranges;)t.pop()}function Yi(t,e){return e?(Xi(t.done),m(t.done)):t.done.length&&!m(t.done).ranges?m(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),m(t.done)):void 0}function Gi(t,e,n,i){var o=t.history;o.undone.length=0;var r,s,a=+new Date;if((o.lastOp==i||o.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&o.lastModTime>a-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(r=Yi(o,o.lastOp==i)))s=m(r.changes),0==H(e.from,e.to)&&0==H(e.from,s.to)?s.to=Di(e):r.changes.push(Ki(t,e));else{var l=m(o.done);for(l&&l.ranges||Ji(t.sel,o.done),r={changes:[Ki(t,e)],generation:o.generation},o.done.push(r);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(n),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=a,o.lastOp=o.lastSelOp=i,o.lastOrigin=o.lastSelOrigin=e.origin,s||At(t,"historyAdded")}function Qi(t,e,n,i){var o=e.charAt(0);return"*"==o||"+"==o&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function Zi(t,e,n,i){var o=t.history,r=i&&i.origin;n==o.lastSelOp||r&&o.lastSelOrigin==r&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==r||Qi(t,r,m(o.done),e))?o.done[o.done.length-1]=e:Ji(e,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=r,o.lastSelOp=n,i&&!1!==i.clearRedo&&Xi(o.undone)}function Ji(t,e){var n=m(e);n&&n.ranges&&n.equals(t)||e.push(t)}function to(t,e,n,i){var o=e["spans_"+t.id],r=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),function(n){n.markedSpans&&((o||(o=e["spans_"+t.id]={}))[r]=n.markedSpans),++r})}function eo(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function no(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],o=0;o<e.text.length;++o)i.push(eo(n[o]));return i}function io(t,e){var n=no(t,e),i=J(t,e);if(!n)return i;if(!i)return n;for(var o=0;o<n.length;++o){var r=n[o],s=i[o];if(r&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<r.length;++c)if(r[c].marker==l.marker)continue t;r.push(l)}else s&&(n[o]=s)}return n}function oo(t,e,n){for(var i=[],o=0;o<t.length;++o){var r=t[o];if(r.ranges)i.push(n?oa.prototype.deepCopy.call(r):r);else{var s=r.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),e)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&d(e,Number(u[1]))>-1&&(m(a)[h]=c[h],delete c[h])}}}return i}function ro(t,e,n,i){if(t.cm&&t.cm.display.shift||t.extend){var o=e.anchor;if(i){var r=H(n,o)<0;r!=H(i,o)<0?(o=n,n=i):r!=H(n,i)<0&&(n=i)}return new ra(o,n)}return new ra(i||n,n)}function so(t,e,n,i){fo(t,new oa([ro(t,t.sel.primary(),e,n)],0),i)}function ao(t,e,n){for(var i=[],o=0;o<t.sel.ranges.length;o++)i[o]=ro(t,t.sel.ranges[o],e[o],null);fo(t,Mi(i,t.sel.primIndex),n)}function lo(t,e,n,i){var o=t.sel.ranges.slice(0);o[e]=n,fo(t,Mi(o,t.sel.primIndex),i)}function co(t,e,n,i){fo(t,Ni(e,n),i)}function uo(t,e,n){var i={ranges:e.ranges,update:function(e){var n=this;this.ranges=[];for(var i=0;i<e.length;i++)n.ranges[i]=new ra(z(t,e[i].anchor),z(t,e[i].head))},origin:n&&n.origin};return At(t,"beforeSelectionChange",t,i),t.cm&&At(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?Mi(i.ranges,i.ranges.length-1):e}function ho(t,e,n){var i=t.history.done,o=m(i);o&&o.ranges?(i[i.length-1]=e,po(t,e,n)):fo(t,e,n)}function fo(t,e,n){po(t,e,n),Zi(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function po(t,e,n){(Dt(t,"beforeSelectionChange")||t.cm&&Dt(t.cm,"beforeSelectionChange"))&&(e=uo(t,e,n)),mo(t,vo(t,e,n&&n.bias||(H(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!t.cm||ti(t.cm)}function mo(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,Nt(t.cm)),_e(t,"cursorActivity",t))}function go(t){mo(t,vo(t,t.sel,null,!1),_s)}function vo(t,e,n,i){for(var o,r=0;r<e.ranges.length;r++){var s=e.ranges[r],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[r],l=bo(t,s.anchor,a&&a.anchor,n,i),c=bo(t,s.head,a&&a.head,n,i);(o||l!=s.anchor||c!=s.head)&&(o||(o=e.ranges.slice(0,r)),o[r]=new ra(l,c))}return o?Mi(o,e.primIndex):e}function yo(t,e,n,i,o){var r=E(t,e.line);if(r.markedSpans)for(var s=0;s<r.markedSpans.length;++s){var a=r.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(l.inclusiveRight?a.to>=e.ch:a.to>e.ch))){if(o&&(At(l,"beforeCursorEnter"),l.explicitlyCleared)){if(r.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var c=l.find(i<0?1:-1),u=void 0;if((i<0?l.inclusiveRight:l.inclusiveLeft)&&(c=wo(t,c,-i,c&&c.line==e.line?r:null)),c&&c.line==e.line&&(u=H(c,n))&&(i<0?u<0:u>0))return yo(t,c,e,i,o)}var h=l.find(i<0?-1:1);return(i<0?l.inclusiveLeft:l.inclusiveRight)&&(h=wo(t,h,i,h.line==e.line?r:null)),h?yo(t,h,e,i,o):null}}return e}function bo(t,e,n,i,o){var r=i||1;return yo(t,e,n,r,o)||!o&&yo(t,e,n,r,!0)||yo(t,e,n,-r,o)||!o&&yo(t,e,n,-r,!0)||(t.cantEdit=!0,O(t.first,0))}function wo(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?z(t,O(e.line-1)):null:n>0&&e.ch==(i||E(t,e.line)).text.length?e.line<t.first+t.size-1?O(e.line+1,0):null:new O(e.line,e.ch+n)}function xo(t){t.setSelection(O(t.firstLine(),0),O(t.lastLine()),_s)}function Co(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(e,n,o,r){e&&(i.from=z(t,e)),n&&(i.to=z(t,n)),o&&(i.text=o),void 0!==r&&(i.origin=r)}),At(t,"beforeChange",t,i),t.cm&&At(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function _o(t,e,n){if(t.cm){if(!t.cm.curOp)return hi(t.cm,_o)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(Dt(t,"beforeChange")||t.cm&&Dt(t.cm,"beforeChange"))||(e=Co(t,e,!0))){var i=Ps&&!n&&et(t,e.from,e.to);if(i)for(var o=i.length-1;o>=0;--o)So(t,{from:i[o].from,to:i[o].to,text:o?[""]:e.text});else So(t,e)}}function So(t,e){if(1!=e.text.length||""!=e.text[0]||0!=H(e.from,e.to)){var n=Oi(t,e);Gi(t,e,n,t.cm?t.cm.curOp.id:NaN),Eo(t,e,n,J(t,e));var i=[];zi(t,function(t,n){n||-1!=d(i,t.history)||(No(t.history,e),i.push(t.history)),Eo(t,e,null,J(t,e))})}}function ko(t,e,n){if(!t.cm||!t.cm.state.suppressEdits||n){for(var i,o=t.history,r=t.sel,s="undo"==e?o.done:o.undone,a="undo"==e?o.undone:o.done,l=0;l<s.length&&(i=s[l],n?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;i=s.pop(),i.ranges;){if(Ji(i,a),n&&!i.equals(t.sel))return void fo(t,i,{clearRedo:!1});r=i}var c=[];Ji(r,a),a.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var u=Dt(t,"beforeChange")||t.cm&&Dt(t.cm,"beforeChange"),h=i.changes.length-1;h>=0;--h){var f=function(n){var o=i.changes[n];if(o.origin=e,u&&!Co(t,o,!1))return s.length=0,{};c.push(Ki(t,o));var r=n?Oi(t,o):m(s);Eo(t,o,r,io(t,o)),!n&&t.cm&&t.cm.scrollIntoView({from:o.from,to:Di(o)});var a=[];zi(t,function(t,e){e||-1!=d(a,t.history)||(No(t.history,o),a.push(t.history)),Eo(t,o,null,io(t,o))})}(h);if(f)return f.v}}}}function To(t,e){if(0!=e&&(t.first+=e,t.sel=new oa(g(t.sel.ranges,function(t){return new ra(O(t.anchor.line+e,t.anchor.ch),O(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){pi(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)mi(t.cm,i,"gutter")}}function Eo(t,e,n,i){if(t.cm&&!t.cm.curOp)return hi(t.cm,Eo)(t,e,n,i);if(e.to.line<t.first)return void To(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var o=e.text.length-1-(t.first-e.from.line);To(t,o),e={from:O(t.first,0),to:O(e.to.line+o,e.to.ch),text:[m(e.text)],origin:e.origin}}var r=t.lastLine();e.to.line>r&&(e={from:e.from,to:O(r,E(t,r).text.length),text:[e.text[0]],origin:e.origin}),e.removed=L(t,e.from,e.to),n||(n=Oi(t,e)),t.cm?Lo(t.cm,e,i):$i(t,e,i),po(t,n,_s)}}function Lo(t,e,n){var i=t.doc,o=t.display,r=e.from,s=e.to,a=!1,l=r.line;t.options.lineWrapping||(l=M(ht(E(i,r.line))),i.iter(l,s.line+1,function(t){if(t==o.maxLine)return a=!0,!0})),i.sel.contains(e.from,e.to)>-1&&Nt(t),$i(i,e,n,Cn(t)),t.options.lineWrapping||(i.iter(l,r.line+e.text.length,function(t){var e=bt(t);e>o.maxLineLength&&(o.maxLine=t,o.maxLineLength=e,o.maxLineChanged=!0,a=!1)}),a&&(t.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,r.line),wi(t,400);var c=e.text.length-(s.line-r.line)-1;e.full?pi(t):r.line!=s.line||1!=e.text.length||Wi(t.doc,e)?pi(t,r.line,s.line+1,c):mi(t,r.line,"text");var u=Dt(t,"changes"),h=Dt(t,"change");if(h||u){var d={from:r,to:s,text:e.text,removed:e.removed,origin:e.origin};h&&_e(t,"change",t,d),u&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}function Po(t,e,n,i,o){if(i||(i=n),H(i,n)<0){var r=i;i=n,n=r}"string"==typeof e&&(e=t.splitLines(e)),_o(t,{from:n,to:i,text:e,origin:o})}function Ao(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function Mo(t,e,n,i){for(var o=0;o<t.length;++o){var r=t[o],s=!0;if(r.ranges){r.copied||(r=t[o]=r.deepCopy(),r.copied=!0);for(var a=0;a<r.ranges.length;a++)Ao(r.ranges[a].anchor,e,n,i),Ao(r.ranges[a].head,e,n,i)}else{for(var l=0;l<r.changes.length;++l){var c=r.changes[l];if(n<c.from.line)c.from=O(c.from.line+i,c.from.ch),c.to=O(c.to.line+i,c.to.ch);else if(e<=c.to.line){s=!1;break}}s||(t.splice(0,o+1),o=0)}}}function No(t,e){var n=e.from.line,i=e.to.line,o=e.text.length-(i-n)-1;Mo(t.done,n,i,o),Mo(t.undone,n,i,o)}function Do(t,e,n,i){var o=e,r=e;return"number"==typeof e?r=E(t,$(t,e)):o=M(e),null==o?null:(i(r,o)&&t.cm&&mi(t.cm,o,n),r)}function Io(t,e,n){yt(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Jn(t,null,n)}function Oo(t,e,n,i){var o=new la(t,n,i),r=t.cm;return r&&o.noHScroll&&(r.display.alignWidgets=!0),Do(t,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==o.insertAt?n.push(o):n.splice(Math.min(n.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,r&&!gt(t,e)){var i=yt(e)<t.scrollTop;A(e,e.height+Fe(o)),i&&Jn(r,null,o.height),r.curOp.forceUpdate=!0}return!0}),_e(r,"lineWidgetAdded",r,o,"number"==typeof e?e:M(e)),o}function Ho(t,e,n,i,r){if(i&&i.shared)return Fo(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return hi(t.cm,Ho)(t,e,n,i,r);var s=new ua(t,r),a=H(e,n);if(i&&u(i,s,!1),a>0||0==a&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=o("span",[s.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(ut(t,e.line,e,n,s)||e.line!=n.line&&ut(t,n.line,e,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");V()}s.addToHistory&&Gi(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var l,c=e.line,h=t.cm;if(t.iter(c,n.line+1,function(t){h&&s.collapsed&&!h.options.lineWrapping&&ht(t)==h.display.maxLine&&(l=!0),s.collapsed&&c!=e.line&&A(t,0),G(t,new K(s,c==e.line?e.ch:null,c==n.line?n.ch:null)),++c}),s.collapsed&&t.iter(e.line,n.line+1,function(e){gt(t,e)&&A(e,0)}),s.clearOnEnter&&Is(s,"beforeCursorEnter",function(){return s.clear()}),s.readOnly&&(U(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),s.collapsed&&(s.id=++ca,s.atomic=!0),h){if(l&&(h.curOp.updateMaxLine=!0),s.collapsed)pi(h,e.line,n.line+1);else if(s.className||s.title||s.startStyle||s.endStyle||s.css)for(var d=e.line;d<=n.line;d++)mi(h,d,"text");s.atomic&&go(h.doc),_e(h,"markerAdded",h,s)}return s}function Fo(t,e,n,i,o){i=u(i),i.shared=!1;var r=[Ho(t,e,n,i,o)],s=r[0],a=i.widgetNode;return zi(t,function(t){a&&(i.widgetNode=a.cloneNode(!0)),r.push(Ho(t,z(t,e),z(t,n),i,o));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=m(r)}),new ha(r,s)}function Ro(t){return t.findMarks(O(t.first,0),t.clipPos(O(t.lastLine())),function(t){return t.parent})}function Bo(t,e){for(var n=0;n<e.length;n++){var i=e[n],o=i.find(),r=t.clipPos(o.from),s=t.clipPos(o.to);if(H(r,s)){var a=Ho(t,r,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function Wo(t){for(var e=0;e<t.length;e++)!function(e){var n=t[e],i=[n.primary.doc];zi(n.primary.doc,function(t){return i.push(t)});for(var o=0;o<n.markers.length;o++){var r=n.markers[o];-1==d(i,r.doc)&&(r.parent=null,n.markers.splice(o--,1))}}(e)}function $o(t){var e=this;if(qo(e),!Mt(e,t)&&!Re(e.display,t)){Ot(t),Qr&&(pa=+new Date);var n=Sn(e,t,!0),i=t.dataTransfer.files;if(n&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,r=Array(o),s=0,a=0;a<o;++a)!function(t,i){if(!e.options.allowDropFileTypes||-1!=d(e.options.allowDropFileTypes,t.type)){var a=new FileReader;a.onload=hi(e,function(){var t=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),r[i]=t,++s==o){n=z(e.doc,n);var l={from:n,to:n,text:e.doc.splitLines(r.join(e.doc.lineSeparator())),origin:"paste"};_o(e.doc,l),ho(e.doc,Ni(n,Di(l)))}}),a.readAsText(t)}}(i[a],a);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var l=t.dataTransfer.getData("Text");if(l){var c;if(e.state.draggingText&&!e.state.draggingText.copy&&(c=e.listSelections()),po(e.doc,Ni(n,n)),c)for(var u=0;u<c.length;++u)Po(e.doc,"",c[u].anchor,c[u].head,"drag");e.replaceSelection(l,"around","paste"),e.display.input.focus()}}catch(t){}}}}function zo(t,e){if(Qr&&(!t.state.draggingText||+new Date-pa<100))return void Rt(e);if(!Mt(t,e)&&!Re(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!is)){var n=i("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ns&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),ns&&n.parentNode.removeChild(n)}}function jo(t,e){var o=Sn(t,e);if(o){var r=document.createDocumentFragment();Ln(t,o,r),t.display.dragCursor||(t.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),n(t.display.dragCursor,r)}}function qo(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Uo(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var i=e[n].CodeMirror;i&&t(i)}}function Vo(){ma||(Ko(),ma=!0)}function Ko(){var t;Is(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Uo(Xo)},100))}),Is(window,"blur",function(){return Uo(In)})}function Xo(t){var e=t.display;e.lastWrapHeight==e.wrapper.clientHeight&&e.lastWrapWidth==e.wrapper.clientWidth||(e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize())}function Yo(t){var e=t.split(/-(?!$)/);t=e[e.length-1];for(var n,i,o,r,s=0;s<e.length-1;s++){var a=e[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);o=!0}}return n&&(t="Alt-"+t),i&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),o&&(t="Shift-"+t),t}function Go(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var o=g(n.split(" "),Yo),r=0;r<o.length;r++){var s=void 0,a=void 0;r==o.length-1?(a=o.join(" "),s=i):(a=o.slice(0,r+1).join(" "),s="...");var l=e[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else e[a]=s}delete t[n]}for(var c in e)t[c]=e[c];return t}function Qo(t,e,n,i){e=tr(e);var o=e.call?e.call(t,i):e[t];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Qo(t,e.fallthrough,n,i);for(var r=0;r<e.fallthrough.length;r++){var s=Qo(t,e.fallthrough[r],n,i);if(s)return s}}}function Zo(t){var e="string"==typeof t?t:ga[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Jo(t,e){if(ns&&34==t.keyCode&&t.char)return!1;var n=ga[t.keyCode],i=n;return null!=i&&!t.altGraphKey&&(t.altKey&&"Alt"!=n&&(i="Alt-"+i),(ps?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(i="Ctrl-"+i),(ps?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(i="Cmd-"+i),!e&&t.shiftKey&&"Shift"!=n&&(i="Shift-"+i),i)}function tr(t){return"string"==typeof t?wa[t]:t}function er(t,e){for(var n=t.doc.sel.ranges,i=[],o=0;o<n.length;o++){for(var r=e(n[o]);i.length&&H(r.from,m(i).to)<=0;){var s=i.pop();if(H(s.from,r.from)<0){r.from=s.from;break}}i.push(r)}ui(t,function(){for(var e=i.length-1;e>=0;e--)Po(t.doc,"",i[e].from,i[e].to,"+delete");ti(t)})}function nr(t,e){var n=E(t.doc,e),i=ht(n);return i!=n&&(e=M(i)),Tt(!0,t,i,e,1)}function ir(t,e){var n=E(t.doc,e),i=dt(n);return i!=n&&(e=M(i)),Tt(!0,t,n,e,-1)}function or(t,e){var n=nr(t,e.line),i=E(t.doc,n.line),o=_t(i,t.doc.direction);if(!o||0==o[0].level){var r=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=r&&e.ch;return O(n.line,s?0:r,n.sticky)}return n}function rr(t,e,n){if("string"==typeof e&&!(e=_a[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,o=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),o=e(t)!=Cs}finally{t.display.shift=i,t.state.suppressEdits=!1}return o}function sr(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var o=Qo(e,t.state.keyMaps[i],n,t);if(o)return o}return t.options.extraKeys&&Qo(e,t.options.extraKeys,n,t)||Qo(e,t.options.keyMap,n,t)}function ar(t,e,n,i){var o=t.state.keySeq;if(o){if(Zo(e))return"handled";Sa.set(50,function(){t.state.keySeq==o&&(t.state.keySeq=null,t.display.input.reset())}),e=o+" "+e}var r=sr(t,e,i);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&_e(t,"keyHandled",t,e,n),"handled"!=r&&"multi"!=r||(Ot(n),An(t)),o&&!r&&/\'$/.test(e)?(Ot(n),!0):!!r}function lr(t,e){var n=Jo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?ar(t,"Shift-"+n,e,function(e){return rr(t,e,!0)})||ar(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return rr(t,e)}):ar(t,n,e,function(e){return rr(t,e)}))}function cr(t,e,n){return ar(t,"'"+n+"'",e,function(e){return rr(t,e,!0)})}function ur(t){var e=this;if(e.curOp.focus=s(),!Mt(e,t)){Qr&&Zr<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var i=lr(e,t);ns&&(ka=i?n:null,!i&&88==n&&!Rs&&(cs?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||hr(e)}}function hr(t){function e(t){18!=t.keyCode&&t.altKey||(gs(n,"CodeMirror-crosshair"),Pt(document,"keyup",e),Pt(document,"mouseover",e))}var n=t.display.lineDiv;a(n,"CodeMirror-crosshair"),Is(document,"keyup",e),Is(document,"mouseover",e)}function dr(t){16==t.keyCode&&(this.doc.sel.shift=!1),Mt(this,t)}function fr(t){var e=this;if(!(Re(e.display,t)||Mt(e,t)||t.ctrlKey&&!t.altKey||cs&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(ns&&n==ka)return ka=null,void Ot(t);if(!ns||t.which&&!(t.which<10)||!lr(e,t)){var o=String.fromCharCode(null==i?n:i);"\b"!=o&&(cr(e,t,o)||e.display.input.onKeyPress(t))}}}function pr(t){var e=this,n=e.display;if(!(Mt(e,t)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=t.shiftKey,Re(n,t))return void(Jr||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!br(e,t)){var i=Sn(e,t);switch(window.focus(),Wt(t)){case 1:e.state.selectingText?e.state.selectingText(t):i?mr(e,t,i):Bt(t)==n.scroller&&Ot(t);break;case 2:Jr&&(e.state.lastMiddleDown=+new Date),i&&so(e.doc,i),setTimeout(function(){return n.input.focus()},20),Ot(t);break;case 3:ms?wr(e,t):Nn(e)}}}}function mr(t,e,n){Qr?setTimeout(c(Mn,t),0):t.curOp.focus=s();var i,o=+new Date;Ca&&Ca.time>o-400&&0==H(Ca.pos,n)?i="triple":xa&&xa.time>o-400&&0==H(xa.pos,n)?(i="double",Ca={time:o,pos:n}):(i="single",xa={time:o,pos:n});var r,a=t.doc.sel,l=cs?e.metaKey:e.ctrlKey;t.options.dragDrop&&Os&&!t.isReadOnly()&&"single"==i&&(r=a.contains(n))>-1&&(H((r=a.ranges[r]).from(),n)<0||n.xRel>0)&&(H(r.to(),n)>0||n.xRel<0)?gr(t,e,n,l):vr(t,e,n,i,l)}function gr(t,e,n,i){var o=t.display,r=+new Date,s=hi(t,function(a){Jr&&(o.scroller.draggable=!1),t.state.draggingText=!1,Pt(document,"mouseup",s),Pt(o.scroller,"drop",s),Math.abs(e.clientX-a.clientX)+Math.abs(e.clientY-a.clientY)<10&&(Ot(a),!i&&+new Date-200<r&&so(t.doc,n),Jr||Qr&&9==Zr?setTimeout(function(){document.body.focus(),o.input.focus()},20):o.input.focus())});Jr&&(o.scroller.draggable=!0),t.state.draggingText=s,s.copy=cs?e.altKey:e.ctrlKey,o.scroller.dragDrop&&o.scroller.dragDrop(),Is(document,"mouseup",s),Is(o.scroller,"drop",s)}function vr(t,e,n,i,o){function r(e){if(0!=H(b,e))if(b=e,"rect"==i){for(var o=[],r=t.options.tabSize,s=h(E(u,n.line).text,n.ch,r),a=h(E(u,e.line).text,e.ch,r),l=Math.min(s,a),c=Math.max(s,a),g=Math.min(n.line,e.line),v=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=v;g++){var y=E(u,g).text,w=f(y,l,r);l==c?o.push(new ra(O(g,w),O(g,w))):y.length>w&&o.push(new ra(O(g,w),O(g,f(y,c,r))))}o.length||o.push(new ra(n,n)),fo(u,Mi(m.ranges.slice(0,p).concat(o),p),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var x=d,C=x.anchor,_=e;if("single"!=i){var S;S="double"==i?t.findWordAt(e):new ra(O(e.line,0),z(u,O(e.line+1,0))),H(S.anchor,C)>0?(_=S.head,C=W(x.from(),S.anchor)):(_=S.anchor,C=B(x.to(),S.head))}var k=m.ranges.slice(0);k[p]=new ra(z(u,C),_),fo(u,Mi(k,p),Ss)}}function a(e){var n=++x,o=Sn(t,e,!0,"rect"==i);if(o)if(0!=H(o,b)){t.curOp.focus=s(),r(o);var l=Bn(c,u);(o.line>=l.to||o.line<l.from)&&setTimeout(hi(t,function(){x==n&&a(e)}),150)}else{var h=e.clientY<w.top?-20:e.clientY>w.bottom?20:0;h&&setTimeout(hi(t,function(){x==n&&(c.scroller.scrollTop+=h,a(e))}),50)}}function l(e){t.state.selectingText=!1,x=1/0,Ot(e),c.input.focus(),Pt(document,"mousemove",C),Pt(document,"mouseup",_),u.history.lastSelOrigin=null}var c=t.display,u=t.doc;Ot(e);var d,p,m=u.sel,g=m.ranges;if(o&&!e.shiftKey?(p=u.sel.contains(n),d=p>-1?g[p]:new ra(n,n)):(d=u.sel.primary(),p=u.sel.primIndex),us?e.shiftKey&&e.metaKey:e.altKey)i="rect",o||(d=new ra(n,n)),n=Sn(t,e,!0,!0),p=-1;else if("double"==i){var v=t.findWordAt(n);d=t.display.shift||u.extend?ro(u,d,v.anchor,v.head):v}else if("triple"==i){var y=new ra(O(n.line,0),z(u,O(n.line+1,0)));d=t.display.shift||u.extend?ro(u,d,y.anchor,y.head):y}else d=ro(u,d,n);o?-1==p?(p=g.length,fo(u,Mi(g.concat([d]),p),{scroll:!1,origin:"*mouse"})):g.length>1&&g[p].empty()&&"single"==i&&!e.shiftKey?(fo(u,Mi(g.slice(0,p).concat(g.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),m=u.sel):lo(u,p,d,Ss):(p=0,fo(u,new oa([d],0),Ss),m=u.sel);var b=n,w=c.wrapper.getBoundingClientRect(),x=0,C=hi(t,function(t){Wt(t)?a(t):l(t)}),_=hi(t,l);t.state.selectingText=_,Is(document,"mousemove",C),Is(document,"mouseup",_)}function yr(t,e,n,i){var o,r;try{o=e.clientX,r=e.clientY}catch(e){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&Ot(e);var s=t.display,a=s.lineDiv.getBoundingClientRect();if(r>a.bottom||!Dt(t,n))return Ft(e);r-=a.top-s.viewOffset;for(var l=0;l<t.options.gutters.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=o)return At(t,n,t,N(t.doc,r),t.options.gutters[l],e),Ft(e)}}function br(t,e){return yr(t,e,"gutterClick",!0)}function wr(t,e){Re(t.display,e)||xr(t,e)||Mt(t,e,"contextmenu")||t.display.input.onContextMenu(e)}function xr(t,e){return!!Dt(t,"gutterContextMenu")&&yr(t,e,"gutterContextMenu",!1)}function Cr(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),rn(t)}function _r(t){Pi(t),pi(t),On(t)}function Sr(t,e,n){if(!e!=!(n&&n!=Ta)){var i=t.display.dragFunctions,o=e?Is:Pt;o(t.display.scroller,"dragstart",i.start),o(t.display.scroller,"dragenter",i.enter),o(t.display.scroller,"dragover",i.over),o(t.display.scroller,"dragleave",i.leave),o(t.display.scroller,"drop",i.drop)}}function kr(t){t.options.lineWrapping?(a(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(gs(t.display.wrapper,"CodeMirror-wrap"),wt(t)),_n(t),pi(t),rn(t),setTimeout(function(){return Vn(t)},100)}function Tr(t,e){var n=this;if(!(this instanceof Tr))return new Tr(t,e);this.options=e=e?u(e):{},u(Ea,e,!1),Ai(e);var i=e.value;"string"==typeof i&&(i=new fa(i,e.mode,null,e.lineSeparator,e.direction)),this.doc=i;var o=new Tr.inputStyles[e.inputStyle](this),r=this.display=new T(t,i,o);r.wrapper.CodeMirror=this,Pi(this),Cr(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Xn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new ys,keySeq:null,specialChars:null},e.autofocus&&!ls&&r.input.focus(),Qr&&Zr<11&&setTimeout(function(){return n.display.input.reset(!0)},20),Er(this),Vo(),ni(this),this.curOp.forceUpdate=!0,ji(this,i),e.autofocus&&!ls||this.hasFocus()?setTimeout(c(Dn,this),20):In(this);for(var s in La)La.hasOwnProperty(s)&&La[s](n,e[s],Ta);Hn(this),e.finishInit&&e.finishInit(this);for(var a=0;a<Pa.length;++a)Pa[a](n);ii(this),Jr&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering&&(r.lineDiv.style.textRendering="auto")}function Er(t){function e(){o.activeTouch&&(r=setTimeout(function(){return o.activeTouch=null},1e3),s=o.activeTouch,s.end=+new Date)}function n(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function i(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return n*n+i*i>400}var o=t.display;Is(o.scroller,"mousedown",hi(t,pr)),Qr&&Zr<11?Is(o.scroller,"dblclick",hi(t,function(e){if(!Mt(t,e)){var n=Sn(t,e);if(n&&!br(t,e)&&!Re(t.display,e)){Ot(e);var i=t.findWordAt(n);so(t.doc,i.anchor,i.head)}}})):Is(o.scroller,"dblclick",function(e){return Mt(t,e)||Ot(e)}),
ms||Is(o.scroller,"contextmenu",function(e){return wr(t,e)});var r,s={end:0};Is(o.scroller,"touchstart",function(e){if(!Mt(t,e)&&!n(e)){o.input.ensurePolled(),clearTimeout(r);var i=+new Date;o.activeTouch={start:i,moved:!1,prev:i-s.end<=300?s:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY)}}),Is(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),Is(o.scroller,"touchend",function(n){var r=o.activeTouch;if(r&&!Re(o,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=t.coordsChar(o.activeTouch,"page");s=!r.prev||i(r,r.prev)?new ra(a,a):!r.prev.prev||i(r,r.prev.prev)?t.findWordAt(a):new ra(O(a.line,0),z(t.doc,O(a.line+1,0))),t.setSelection(s.anchor,s.head),t.focus(),Ot(n)}e()}),Is(o.scroller,"touchcancel",e),Is(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Wn(t,o.scroller.scrollTop),$n(t,o.scroller.scrollLeft,!0),At(t,"scroll",t))}),Is(o.scroller,"mousewheel",function(e){return qn(t,e)}),Is(o.scroller,"DOMMouseScroll",function(e){return qn(t,e)}),Is(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(e){Mt(t,e)||Rt(e)},over:function(e){Mt(t,e)||(jo(t,e),Rt(e))},start:function(e){return zo(t,e)},drop:hi(t,$o),leave:function(e){Mt(t,e)||qo(t)}};var a=o.input.getField();Is(a,"keyup",function(e){return dr.call(t,e)}),Is(a,"keydown",hi(t,ur)),Is(a,"keypress",hi(t,fr)),Is(a,"focus",function(e){return Dn(t,e)}),Is(a,"blur",function(e){return In(t,e)})}function Lr(t,e,n,i){var o,r=t.doc;null==n&&(n="add"),"smart"==n&&(r.mode.indent?o=te(t,e):n="prev");var s=t.options.tabSize,a=E(r,e),l=h(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((c=r.mode.indent(o,a.text.slice(u.length),a.text))==Cs||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=e>r.first?h(E(r,e-1).text,null,s):0:"add"==n?c=l+t.options.indentUnit:"subtract"==n?c=l-t.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",f=0;if(t.options.indentWithTabs)for(var m=Math.floor(c/s);m;--m)f+=s,d+="\t";if(f<c&&(d+=p(c-f)),d!=u)return Po(r,d,O(e,0),O(e,u.length),"+input"),a.stateAfter=null,!0;for(var g=0;g<r.sel.ranges.length;g++){var v=r.sel.ranges[g];if(v.head.line==e&&v.head.ch<u.length){var y=O(e,u.length);lo(r,g,new ra(y,y));break}}}function Pr(t){Aa=t}function Ar(t,e,n,i,o){var r=t.doc;t.display.shift=!1,i||(i=r.sel);var s=t.state.pasteIncoming||"paste"==o,a=Hs(e),l=null;if(s&&i.ranges.length>1)if(Aa&&Aa.text.join("\n")==e){if(i.ranges.length%Aa.text.length==0){l=[];for(var c=0;c<Aa.text.length;c++)l.push(r.splitLines(Aa.text[c]))}}else a.length==i.ranges.length&&(l=g(a,function(t){return[t]}));for(var u,h=i.ranges.length-1;h>=0;h--){var d=i.ranges[h],f=d.from(),p=d.to();d.empty()&&(n&&n>0?f=O(f.line,f.ch-n):t.state.overwrite&&!s?p=O(p.line,Math.min(E(r,p.line).text.length,p.ch+m(a).length)):Aa&&Aa.lineWise&&Aa.text.join("\n")==e&&(f=p=O(f.line,0))),u=t.curOp.updateInput;var v={from:f,to:p,text:l?l[h%l.length]:a,origin:o||(s?"paste":t.state.cutIncoming?"cut":"+input")};_o(t.doc,v),_e(t,"inputRead",t,v)}e&&!s&&Nr(t,e),ti(t),t.curOp.updateInput=u,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function Mr(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||ui(e,function(){return Ar(e,n,0,null,"paste")}),!0}function Nr(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;i>=0;i--){var o=n.ranges[i];if(!(o.head.ch>100||i&&n.ranges[i-1].head.line==o.head.line)){var r=t.getModeAt(o.head),s=!1;if(r.electricChars){for(var a=0;a<r.electricChars.length;a++)if(e.indexOf(r.electricChars.charAt(a))>-1){s=Lr(t,o.head.line,"smart");break}}else r.electricInput&&r.electricInput.test(E(t.doc,o.head.line).text.slice(0,o.head.ch))&&(s=Lr(t,o.head.line,"smart"));s&&_e(t,"electricInput",t,o.head.line)}}}function Dr(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var o=t.doc.sel.ranges[i].head.line,r={anchor:O(o,0),head:O(o+1,0)};n.push(r),e.push(t.getRange(r.anchor,r.head))}return{text:e,ranges:n}}function Ir(t,e){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck",!!e)}function Or(){var t=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=i("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Jr?t.style.width="1000px":t.setAttribute("wrap","off"),ss&&(t.style.border="1px solid black"),Ir(t),e}function Hr(t,e,n,i,o){function r(){var i=e.line+n;return!(i<t.first||i>=t.first+t.size)&&(e=new O(i,e.ch,e.sticky),c=E(t,i))}function s(i){var s;if(null==(s=o?Et(t.cm,c,e,n):kt(c,e,n))){if(i||!r())return!1;e=Tt(o,t.cm,c,e.line,n)}else e=s;return!0}var a=e,l=n,c=E(t,e.line);if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var u=null,h="group"==i,d=t.cm&&t.cm.getHelper(e,"wordChars"),f=!0;!(n<0)||s(!f);f=!1){var p=c.text.charAt(e.ch)||"\n",m=x(p,d)?"w":h&&"\n"==p?"n":!h||/\s/.test(p)?null:"p";if(!h||f||m||(m="s"),u&&u!=m){n<0&&(n=1,s(),e.sticky="after");break}if(m&&(u=m),n>0&&!s(!f))break}var g=bo(t,e,a,l,!0);return F(a,g)&&(g.hitSide=!0),g}function Fr(t,e,n,i){var o,r=t.doc,s=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(a-.5*yn(t.display),3);o=(n>0?e.bottom:e.top)+n*l}else"line"==i&&(o=n>0?e.bottom+3:e.top-3);for(var c;c=pn(t,s,o),c.outside;){if(n<0?o<=0:o>=r.height){c.hitSide=!0;break}o+=5*n}return c}function Rr(t,e){var n=Ye(t,e.line);if(!n||n.hidden)return null;var i=E(t.doc,e.line),o=Ve(n,i,e.line),r=_t(i,t.doc.direction),s="left";r&&(s=Ct(r,e.ch)%2?"right":"left");var a=Ze(o.map,e.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Br(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}function Wr(t,e){return e&&(t.bad=!0),t}function $r(t,e,n,i,o){function r(t){return function(e){return e.id==t}}function s(){u&&(c+=h,u=!1)}function a(t){t&&(s(),c+=t)}function l(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(null!=n)return void a(n||e.textContent.replace(/\u200b/g,""));var c,d=e.getAttribute("cm-marker");if(d){var f=t.findMarks(O(i,0),O(o+1,0),r(+d));return void(f.length&&(c=f[0].find())&&a(L(t.doc,c.from,c.to).join(h)))}if("false"==e.getAttribute("contenteditable"))return;var p=/^(pre|div|p)$/i.test(e.nodeName);p&&s();for(var m=0;m<e.childNodes.length;m++)l(e.childNodes[m]);p&&(u=!0)}else 3==e.nodeType&&a(e.nodeValue)}for(var c="",u=!1,h=t.doc.lineSeparator();l(e),e!=n;)e=e.nextSibling;return c}function zr(t,e,n){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[n]))return Wr(t.clipPos(O(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var o=0;o<t.display.view.length;o++){var r=t.display.view[o];if(r.node==i)return jr(r,e,n)}}function jr(t,e,n){function i(e,n,i){for(var o=-1;o<(h?h.length:0);o++)for(var r=o<0?u.map:h[o],s=0;s<r.length;s+=3){var a=r[s+2];if(a==e||a==n){var l=M(o<0?t.line:t.rest[o]),c=r[s]+i;return(i<0||a!=e)&&(c=r[s+(i?1:0)]),O(l,c)}}}var o=t.text.firstChild,s=!1;if(!e||!r(o,e))return Wr(O(M(t.line),0),!0);if(e==o&&(s=!0,e=o.childNodes[n],n=0,!e)){var a=t.rest?m(t.rest):t.line;return Wr(O(M(a),a.text.length),s)}var l=3==e.nodeType?e:null,c=e;for(l||1!=e.childNodes.length||3!=e.firstChild.nodeType||(l=e.firstChild,n&&(n=l.nodeValue.length));c.parentNode!=o;)c=c.parentNode;var u=t.measure,h=u.maps,d=i(l,c,n);if(d)return Wr(d,s);for(var f=c.nextSibling,p=l?l.nodeValue.length-n:0;f;f=f.nextSibling){if(d=i(f,f.firstChild,0))return Wr(O(d.line,d.ch-p),s);p+=f.textContent.length}for(var g=c.previousSibling,v=n;g;g=g.previousSibling){if(d=i(g,g.firstChild,-1))return Wr(O(d.line,d.ch+v),s);v+=g.textContent.length}}function qr(t,e){function n(){t.value=l.getValue()}if(e=e?u(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=s();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}var o;if(t.form&&(Is(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var r=t.form;o=r.submit;try{var a=r.submit=function(){n(),r.submit=o,r.submit(),r.submit=a}}catch(t){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Pt(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var l=Tr(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return l}var Ur=navigator.userAgent,Vr=navigator.platform,Kr=/gecko\/\d/i.test(Ur),Xr=/MSIE \d/.test(Ur),Yr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ur),Gr=/Edge\/(\d+)/.exec(Ur),Qr=Xr||Yr||Gr,Zr=Qr&&(Xr?document.documentMode||6:+(Gr||Yr)[1]),Jr=!Gr&&/WebKit\//.test(Ur),ts=Jr&&/Qt\/\d+\.\d+/.test(Ur),es=!Gr&&/Chrome\//.test(Ur),ns=/Opera\//.test(Ur),is=/Apple Computer/.test(navigator.vendor),os=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Ur),rs=/PhantomJS/.test(Ur),ss=!Gr&&/AppleWebKit/.test(Ur)&&/Mobile\/\w+/.test(Ur),as=/Android/.test(Ur),ls=ss||as||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Ur),cs=ss||/Mac/.test(Vr),us=/\bCrOS\b/.test(Ur),hs=/win/i.test(Vr),ds=ns&&Ur.match(/Version\/(\d*\.\d*)/);ds&&(ds=Number(ds[1])),ds&&ds>=15&&(ns=!1,Jr=!0);var fs,ps=cs&&(ts||ns&&(null==ds||ds<12.11)),ms=Kr||Qr&&Zr>=9,gs=function(e,n){var i=e.className,o=t(n).exec(i);if(o){var r=i.slice(o.index+o[0].length);e.className=i.slice(0,o.index)+(r?o[1]+r:"")}};fs=document.createRange?function(t,e,n,i){var o=document.createRange();return o.setEnd(i||t,n),o.setStart(t,e),o}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var vs=function(t){t.select()};ss?vs=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:Qr&&(vs=function(t){try{t.select()}catch(t){}});var ys=function(){this.id=null};ys.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var bs,ws,xs=30,Cs={toString:function(){return"CodeMirror.Pass"}},_s={scroll:!1},Ss={origin:"*mouse"},ks={origin:"+move"},Ts=[""],Es=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ls=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Ps=!1,As=!1,Ms=null,Ns=function(){function t(t){return t<=247?n.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1785?i.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,n){this.level=t,this.from=e,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,l=/[1n]/;return function(n,i){var c="ltr"==i?"L":"R";if(0==n.length||"ltr"==i&&!o.test(n))return!1;for(var u=n.length,h=[],d=0;d<u;++d)h.push(t(n.charCodeAt(d)));for(var f=0,p=c;f<u;++f){var g=h[f];"m"==g?h[f]=p:p=g}for(var v=0,y=c;v<u;++v){var b=h[v];"1"==b&&"r"==y?h[v]="n":s.test(b)&&(y=b,"r"==b&&(h[v]="R"))}for(var w=1,x=h[0];w<u-1;++w){var C=h[w];"+"==C&&"1"==x&&"1"==h[w+1]?h[w]="1":","!=C||x!=h[w+1]||"1"!=x&&"n"!=x||(h[w]=x),x=C}for(var _=0;_<u;++_){var S=h[_];if(","==S)h[_]="N";else if("%"==S){var k=void 0;for(k=_+1;k<u&&"%"==h[k];++k);for(var T=_&&"!"==h[_-1]||k<u&&"1"==h[k]?"1":"N",E=_;E<k;++E)h[E]=T;_=k-1}}for(var L=0,P=c;L<u;++L){var A=h[L];"L"==P&&"1"==A?h[L]="L":s.test(A)&&(P=A)}for(var M=0;M<u;++M)if(r.test(h[M])){var N=void 0;for(N=M+1;N<u&&r.test(h[N]);++N);for(var D="L"==(M?h[M-1]:c),I="L"==(N<u?h[N]:c),O=D==I?D?"L":"R":c,H=M;H<N;++H)h[H]=O;M=N-1}for(var F,R=[],B=0;B<u;)if(a.test(h[B])){var W=B;for(++B;B<u&&a.test(h[B]);++B);R.push(new e(0,W,B))}else{var $=B,z=R.length;for(++B;B<u&&"L"!=h[B];++B);for(var j=$;j<B;)if(l.test(h[j])){$<j&&R.splice(z,0,new e(1,$,j));var q=j;for(++j;j<B&&l.test(h[j]);++j);R.splice(z,0,new e(2,q,j)),$=j}else++j;$<B&&R.splice(z,0,new e(1,$,B))}return 1==R[0].level&&(F=n.match(/^\s+/))&&(R[0].from=F[0].length,R.unshift(new e(0,0,F[0].length))),1==m(R).level&&(F=n.match(/\s+$/))&&(m(R).to-=F[0].length,R.push(new e(0,u-F[0].length,u))),"rtl"==i?R.reverse():R}}(),Ds=[],Is=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||Ds).concat(n)}},Os=function(){if(Qr&&Zr<9)return!1;var t=i("div");return"draggable"in t||"dragDrop"in t}(),Hs=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var o=t.indexOf("\n",e);-1==o&&(o=t.length);var r=t.slice(e,"\r"==t.charAt(o-1)?o-1:o),s=r.indexOf("\r");-1!=s?(n.push(r.slice(0,s)),e+=s+1):(n.push(r),e=o+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Fs=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Rs=function(){var t=i("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Bs=null,Ws={},$s={},zs={},js=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};js.prototype.eol=function(){return this.pos>=this.string.length},js.prototype.sol=function(){return this.pos==this.lineStart},js.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},js.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},js.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},js.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},js.prototype.eatSpace=function(){for(var t=this,e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++t.pos;return this.pos>e},js.prototype.skipToEnd=function(){this.pos=this.string.length},js.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},js.prototype.backUp=function(t){this.pos-=t},js.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=h(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?h(this.string,this.lineStart,this.tabSize):0)},js.prototype.indentation=function(){return h(this.string,null,this.tabSize)-(this.lineStart?h(this.string,this.lineStart,this.tabSize):0)},js.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var o=function(t){return n?t.toLowerCase():t};if(o(this.string.substr(this.pos,t.length))==o(t))return!1!==e&&(this.pos+=t.length),!0},js.prototype.current=function(){return this.string.slice(this.start,this.pos)},js.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}};var qs=function(t,e,n){this.text=t,it(this,e),this.height=n?n(this):1};qs.prototype.lineNo=function(){return M(this)},It(qs);var Us,Vs={},Ks={},Xs=null,Ys=null,Gs={left:0,right:0,top:0,bottom:0},Qs=0,Zs=null;Qr?Zs=-.53:Kr?Zs=15:es?Zs=-.7:is&&(Zs=-1/3);var Js=function(t,e,n){this.cm=n;var o=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t(o),t(r),Is(o,"scroll",function(){o.clientHeight&&e(o.scrollTop,"vertical")}),Is(r,"scroll",function(){r.clientWidth&&e(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,Qr&&Zr<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Js.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var o=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var r=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+r)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},Js.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},Js.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},Js.prototype.zeroWidthHack=function(){var t=cs&&!os?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ys,this.disableVert=new ys},Js.prototype.enableZeroWidthBar=function(t,e){function n(){var i=t.getBoundingClientRect();document.elementFromPoint(i.left+1,i.bottom-1)!=t?t.style.pointerEvents="none":e.set(1e3,n)}t.style.pointerEvents="auto",e.set(1e3,n)},Js.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var ta=function(){};ta.prototype.update=function(){return{bottom:0,right:0}},ta.prototype.setScrollLeft=function(){},ta.prototype.setScrollTop=function(){},ta.prototype.clear=function(){};var ea={native:Js,null:ta},na=0,ia=function(t,e,n){var i=t.display;this.viewport=e,this.visible=Bn(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=je(t),this.force=n,this.dims=wn(t),this.events=[]};ia.prototype.signal=function(t,e){Dt(t,e)&&this.events.push(arguments)},ia.prototype.finish=function(){for(var t=this,e=0;e<this.events.length;e++)At.apply(null,t.events[e])};var oa=function(t,e){this.ranges=t,this.primIndex=e};oa.prototype.primary=function(){return this.ranges[this.primIndex]},oa.prototype.equals=function(t){var e=this;if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var i=e.ranges[n],o=t.ranges[n];if(!F(i.anchor,o.anchor)||!F(i.head,o.head))return!1}return!0},oa.prototype.deepCopy=function(){for(var t=this,e=[],n=0;n<this.ranges.length;n++)e[n]=new ra(R(t.ranges[n].anchor),R(t.ranges[n].head));return new oa(e,this.primIndex)},oa.prototype.somethingSelected=function(){for(var t=this,e=0;e<this.ranges.length;e++)if(!t.ranges[e].empty())return!0;return!1},oa.prototype.contains=function(t,e){var n=this;e||(e=t);for(var i=0;i<this.ranges.length;i++){var o=n.ranges[i];if(H(e,o.from())>=0&&H(t,o.to())<=0)return i}return-1};var ra=function(t,e){this.anchor=t,this.head=e};ra.prototype.from=function(){return W(this.anchor,this.head)},ra.prototype.to=function(){return B(this.anchor,this.head)},ra.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};var sa=function(t){var e=this;this.lines=t,this.parent=null;for(var n=0,i=0;i<t.length;++i)t[i].parent=e,n+=t[i].height;this.height=n};sa.prototype.chunkSize=function(){return this.lines.length},sa.prototype.removeInner=function(t,e){for(var n=this,i=t,o=t+e;i<o;++i){var r=n.lines[i];n.height-=r.height,ce(r),_e(r,"delete")}this.lines.splice(t,e)},sa.prototype.collapse=function(t){t.push.apply(t,this.lines)},sa.prototype.insertInner=function(t,e,n){var i=this;this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var o=0;o<e.length;++o)e[o].parent=i},sa.prototype.iterN=function(t,e,n){for(var i=this,o=t+e;t<o;++t)if(n(i.lines[t]))return!0};var aa=function(t){var e=this;this.children=t;for(var n=0,i=0,o=0;o<t.length;++o){var r=t[o];n+=r.chunkSize(),i+=r.height,r.parent=e}this.size=n,this.height=i,this.parent=null};aa.prototype.chunkSize=function(){return this.size},aa.prototype.removeInner=function(t,e){var n=this;this.size-=e;for(var i=0;i<this.children.length;++i){var o=n.children[i],r=o.chunkSize();if(t<r){var s=Math.min(e,r-t),a=o.height;if(o.removeInner(t,s),n.height-=a-o.height,r==s&&(n.children.splice(i--,1),o.parent=null),0==(e-=s))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof sa))){var l=[];this.collapse(l),this.children=[new sa(l)],this.children[0].parent=this}},aa.prototype.collapse=function(t){for(var e=this,n=0;n<this.children.length;++n)e.children[n].collapse(t)},aa.prototype.insertInner=function(t,e,n){var i=this;this.size+=e.length,this.height+=n;for(var o=0;o<this.children.length;++o){var r=i.children[o],s=r.chunkSize();if(t<=s){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,l=a;l<r.lines.length;){var c=new sa(r.lines.slice(l,l+=25));r.height-=c.height,i.children.splice(++o,0,c),c.parent=i}r.lines=r.lines.slice(0,a),i.maybeSpill()}break}t-=s}},aa.prototype.maybeSpill=function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new aa(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=d(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var o=new aa(t.children);o.parent=t,t.children=[o,n],t=o}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},aa.prototype.iterN=function(t,e,n){for(var i=this,o=0;o<this.children.length;++o){var r=i.children[o],s=r.chunkSize();if(t<s){var a=Math.min(e,s-t);if(r.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=s}};var la=function(t,e,n){var i=this;if(n)for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);this.doc=t,this.node=e};la.prototype.clear=function(){var t=this,e=this.doc.cm,n=this.line.widgets,i=this.line,o=M(i);if(null!=o&&n){for(var r=0;r<n.length;++r)n[r]==t&&n.splice(r--,1);n.length||(i.widgets=null);var s=Fe(this);A(i,Math.max(0,i.height-s)),e&&(ui(e,function(){Io(e,i,-s),mi(e,o,"widget")}),_e(e,"lineWidgetCleared",e,this,o))}},la.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var o=Fe(this)-e;o&&(A(i,i.height+o),n&&ui(n,function(){n.curOp.forceUpdate=!0,Io(n,i,o),_e(n,"lineWidgetChanged",n,t,M(i))}))},It(la);var ca=0,ua=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++ca};ua.prototype.clear=function(){var t=this;if(!this.explicitlyCleared){var e=this.doc.cm,n=e&&!e.curOp;if(n&&ni(e),Dt(this,"clear")){var i=this.find();i&&_e(this,"clear",i.from,i.to)}for(var o=null,r=null,s=0;s<this.lines.length;++s){var a=t.lines[s],l=X(a.markedSpans,t);e&&!t.collapsed?mi(e,M(a),"text"):e&&(null!=l.to&&(r=M(a)),null!=l.from&&(o=M(a))),a.markedSpans=Y(a.markedSpans,l),null==l.from&&t.collapsed&&!gt(t.doc,a)&&e&&A(a,yn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var u=ht(t.lines[c]),h=bt(u);h>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=h,e.display.maxLineChanged=!0)}null!=o&&e&&this.collapsed&&pi(e,o,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&go(e.doc)),e&&_e(e,"markerCleared",e,this,o,r),n&&ii(e),this.parent&&this.parent.clear()}},ua.prototype.find=function(t,e){var n=this;null==t&&"bookmark"==this.type&&(t=1);for(var i,o,r=0;r<this.lines.length;++r){var s=n.lines[r],a=X(s.markedSpans,n);if(null!=a.from&&(i=O(e?s:M(s),a.from),-1==t))return i;if(null!=a.to&&(o=O(e?s:M(s),a.to),1==t))return o}return i&&{from:i,to:o}},ua.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,i=this.doc.cm;e&&i&&ui(i,function(){var o=e.line,r=M(e.line),s=Ye(i,r);if(s&&(nn(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!gt(n.doc,o)&&null!=n.height){var a=n.height;n.height=null;var l=Fe(n)-a;l&&A(o,o.height+l)}_e(i,"markerChanged",i,t)})},ua.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=d(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},ua.prototype.detachLine=function(t){if(this.lines.splice(d(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},It(ua);var ha=function(t,e){var n=this;this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=n};ha.prototype.clear=function(){var t=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)t.markers[e].clear();_e(this,"clear")}},ha.prototype.find=function(t,e){return this.primary.find(t,e)},It(ha);var da=0,fa=function(t,e,n,i,o){if(!(this instanceof fa))return new fa(t,e,n,i,o);null==n&&(n=0),aa.call(this,[new sa([new qs("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=O(n,0);this.sel=Ni(r),this.history=new Vi(null),this.id=++da,this.modeOption=e,this.lineSep=i,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),$i(this,{from:r,to:r,text:t}),fo(this,Ni(r),_s)};fa.prototype=b(aa.prototype,{constructor:fa,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=P(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:fi(function(t){var e=O(this.first,0),n=this.first+this.size-1;_o(this,{from:e,to:O(n,E(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),fo(this,Ni(e))}),replaceRange:function(t,e,n,i){e=z(this,e),n=n?z(this,n):e,Po(this,t,e,n,i)},getRange:function(t,e,n){var i=L(this,z(this,t),z(this,e));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(D(this,t))return E(this,t)},getLineNumber:function(t){return M(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=E(this,t)),ht(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return z(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:fi(function(t,e,n){co(this,z(this,"number"==typeof t?O(t,e||0):t),null,n)}),setSelection:fi(function(t,e,n){co(this,z(this,t),z(this,e||t),n)}),extendSelection:fi(function(t,e,n){so(this,z(this,t),e&&z(this,e),n)}),extendSelections:fi(function(t,e){ao(this,q(this,t),e)}),extendSelectionsBy:fi(function(t,e){ao(this,q(this,g(this.sel.ranges,t)),e)}),setSelections:fi(function(t,e,n){var i=this;if(t.length){for(var o=[],r=0;r<t.length;r++)o[r]=new ra(z(i,t[r].anchor),z(i,t[r].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),fo(this,Mi(o,e),n)}}),addSelection:fi(function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new ra(z(this,t),z(this,e||t))),fo(this,Mi(i,i.length-1),n)}),getSelection:function(t){for(var e,n=this,i=this.sel.ranges,o=0;o<i.length;o++){var r=L(n,i[o].from(),i[o].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=this,n=[],i=this.sel.ranges,o=0;o<i.length;o++){var r=L(e,i[o].from(),i[o].to());!1!==t&&(r=r.join(t||e.lineSeparator())),n[o]=r}return n},replaceSelection:function(t,e,n){for(var i=[],o=0;o<this.sel.ranges.length;o++)i[o]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:fi(function(t,e,n){for(var i=this,o=[],r=this.sel,s=0;s<r.ranges.length;s++){var a=r.ranges[s];o[s]={from:a.from(),to:a.to(),text:i.splitLines(t[s]),origin:n}}for(var l=e&&"end"!=e&&Fi(this,o,e),c=o.length-1;c>=0;c--)_o(i,o[c]);l?ho(this,l):this.cm&&ti(this.cm)}),undo:fi(function(){ko(this,"undo")}),redo:fi(function(){ko(this,"redo")}),undoSelection:fi(function(){ko(this,"undo",!0)}),redoSelection:fi(function(){ko(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var o=0;o<t.undone.length;o++)t.undone[o].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Vi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:oo(this.history.done),undone:oo(this.history.undone)}},setHistory:function(t){var e=this.history=new Vi(this.history.maxGeneration);e.done=oo(t.done.slice(0),null,!0),e.undone=oo(t.undone.slice(0),null,!0)},setGutterMarker:fi(function(t,e,n){
return Do(this,t,"gutter",function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&C(i)&&(t.gutterMarkers=null),!0})}),clearGutter:fi(function(t){var e=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&Do(e,n,"gutter",function(){return n.gutterMarkers[t]=null,C(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!D(this,t))return null;if(e=t,!(t=E(this,t)))return null}else if(null==(e=M(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:fi(function(e,n,i){return Do(this,e,"gutter"==n?"gutter":"class",function(e){var o="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[o]){if(t(i).test(e[o]))return!1;e[o]+=" "+i}else e[o]=i;return!0})}),removeLineClass:fi(function(e,n,i){return Do(this,e,"gutter"==n?"gutter":"class",function(e){var o="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",r=e[o];if(!r)return!1;if(null==i)e[o]=null;else{var s=r.match(t(i));if(!s)return!1;var a=s.index+s[0].length;e[o]=r.slice(0,s.index)+(s.index&&a!=r.length?" ":"")+r.slice(a)||null}return!0})}),addLineWidget:fi(function(t,e,n){return Oo(this,t,e,n)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Ho(this,z(this,t),z(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return t=z(this,t),Ho(this,t,t,n,"bookmark")},findMarksAt:function(t){t=z(this,t);var e=[],n=E(this,t.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=t.ch)&&(null==o.to||o.to>=t.ch)&&e.push(o.marker.parent||o.marker)}return e},findMarks:function(t,e,n){t=z(this,t),e=z(this,e);var i=[],o=t.line;return this.iter(t.line,e.line+1,function(r){var s=r.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&o==t.line&&t.ch>=l.to||null==l.from&&o!=t.line||null!=l.from&&o==e.line&&l.from>=e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++o}),i},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)}),t},posFromIndex:function(t){var e,n=this.first,i=this.lineSeparator().length;return this.iter(function(o){var r=o.text.length+i;if(r>t)return e=t,!0;t-=r,++n}),z(this,O(n,e))},indexFromPos:function(t){t=z(this,t);var e=t.ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new fa(P(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new fa(P(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],Bo(i,Ro(this)),i},unlinkDoc:function(t){var e=this;if(t instanceof Tr&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=e.linked[n];if(i.doc==t){e.linked.splice(n,1),t.unlinkDoc(e),Wo(Ro(e));break}}if(t.history==this.history){var o=[t.id];zi(t,function(t){return o.push(t.id)},!0),t.history=new Vi(null),t.history.done=oo(this.history.done,o),t.history.undone=oo(this.history.undone,o)}},iterLinkedDocs:function(t){zi(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Hs(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:fi(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&Ui(this.cm))})}),fa.prototype.eachLine=fa.prototype.iter;for(var pa=0,ma=!1,ga={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},va=0;va<10;va++)ga[va+48]=ga[va+96]=String(va);for(var ya=65;ya<=90;ya++)ga[ya]=String.fromCharCode(ya);for(var ba=1;ba<=12;ba++)ga[ba+111]=ga[ba+63235]="F"+ba;var wa={};wa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},wa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},wa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},wa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},wa.default=cs?wa.macDefault:wa.pcDefault;var xa,Ca,_a={selectAll:xo,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),_s)},killLine:function(t){return er(t,function(e){if(e.empty()){var n=E(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:O(e.head.line+1,0)}:{from:e.head,to:O(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return er(t,function(e){return{from:O(e.from().line,0),to:z(t.doc,O(e.to().line+1,0))}})},delLineLeft:function(t){return er(t,function(t){return{from:O(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return er(t,function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}})},delWrappedLineRight:function(t){return er(t,function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(O(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(O(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return nr(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return or(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return ir(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},ks)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},ks)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?or(t,e.head):i},ks)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,o=0;o<n.length;o++){var r=n[o].from(),s=h(t.getLine(r.line),r.ch,i);e.push(p(i-s%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return ui(t,function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++)if(e[i].empty()){var o=e[i].head,r=E(t.doc,o.line).text;if(r)if(o.ch==r.length&&(o=new O(o.line,o.ch-1)),o.ch>0)o=new O(o.line,o.ch+1),t.replaceRange(r.charAt(o.ch-1)+r.charAt(o.ch-2),O(o.line,o.ch-2),o,"+transpose");else if(o.line>t.doc.first){var s=E(t.doc,o.line-1).text;s&&(o=new O(o.line,1),t.replaceRange(r.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),O(o.line-1,s.length-1),o,"+transpose"))}n.push(new ra(o,o))}t.setSelections(n)})},newlineAndIndent:function(t){return ui(t,function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var i=0;i<e.length;i++)t.indentLine(e[i].from().line,null,!0);ti(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}},Sa=new ys,ka=null,Ta={toString:function(){return"CodeMirror.Init"}},Ea={},La={};Tr.defaults=Ea,Tr.optionHandlers=La;var Pa=[];Tr.defineInitHook=function(t){return Pa.push(t)};var Aa=null,Ma=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ys,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ma.prototype.init=function(t){function e(t){if(!Mt(o,t)){if(o.somethingSelected())Pr({lineWise:!1,text:o.getSelections()}),"cut"==t.type&&o.replaceSelection("",null,"cut");else{if(!o.options.lineWiseCopyCut)return;var e=Dr(o);Pr({lineWise:!0,text:e.text}),"cut"==t.type&&o.operation(function(){o.setSelections(e.ranges,0,_s),o.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var n=Aa.text.join("\n");if(t.clipboardData.setData("Text",n),t.clipboardData.getData("Text")==n)return void t.preventDefault()}var s=Or(),a=s.firstChild;o.display.lineSpace.insertBefore(s,o.display.lineSpace.firstChild),a.value=Aa.text.join("\n");var l=document.activeElement;vs(a),setTimeout(function(){o.display.lineSpace.removeChild(s),l.focus(),l==r&&i.showPrimarySelection()},50)}}var n=this,i=this,o=i.cm,r=i.div=t.lineDiv;Ir(r,o.options.spellcheck),Is(r,"paste",function(t){Mt(o,t)||Mr(t,o)||Zr<=11&&setTimeout(hi(o,function(){return n.updateFromDOM()}),20)}),Is(r,"compositionstart",function(t){n.composing={data:t.data,done:!1}}),Is(r,"compositionupdate",function(t){n.composing||(n.composing={data:t.data,done:!1})}),Is(r,"compositionend",function(t){n.composing&&(t.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),Is(r,"touchstart",function(){return i.forceCompositionEnd()}),Is(r,"input",function(){n.composing||n.readFromDOMSoon()}),Is(r,"copy",e),Is(r,"cut",e)},Ma.prototype.prepareSelection=function(){var t=En(this.cm,!1);return t.focus=this.cm.state.focused,t},Ma.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Ma.prototype.showPrimarySelection=function(){var t=window.getSelection(),e=this.cm.doc.sel.primary(),n=zr(this.cm,t.anchorNode,t.anchorOffset),i=zr(this.cm,t.focusNode,t.focusOffset);if(!n||n.bad||!i||i.bad||0!=H(W(n,i),e.from())||0!=H(B(n,i),e.to())){var o=Rr(this.cm,e.from()),r=Rr(this.cm,e.to());if(!o&&!r)return void t.removeAllRanges();var s=this.cm.display.view,a=t.rangeCount&&t.getRangeAt(0);if(o){if(!r){var l=s[s.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;r={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else o={node:s[0].measure.map[2],offset:0};var u;try{u=fs(o.node,o.offset,r.offset,r.node)}catch(t){}u&&(!Kr&&this.cm.state.focused?(t.collapse(o.node,o.offset),u.collapsed||(t.removeAllRanges(),t.addRange(u))):(t.removeAllRanges(),t.addRange(u)),a&&null==t.anchorNode?t.addRange(a):Kr&&this.startGracePeriod()),this.rememberSelection()}},Ma.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Ma.prototype.showMultipleSelections=function(t){n(this.cm.display.cursorDiv,t.cursors),n(this.cm.display.selectionDiv,t.selection)},Ma.prototype.rememberSelection=function(){var t=window.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Ma.prototype.selectionInEditor=function(){var t=window.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return r(this.div,e)},Ma.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ma.prototype.blur=function(){this.div.blur()},Ma.prototype.getField=function(){return this.div},Ma.prototype.supportsTouch=function(){return!0},Ma.prototype.receivedFocus=function(){function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}var e=this;this.selectionInEditor()?this.pollSelection():ui(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,t)},Ma.prototype.selectionChanged=function(){var t=window.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Ma.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=window.getSelection(),e=this.cm;if(as&&es&&this.cm.options.gutters.length&&Br(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=zr(e,t.anchorNode,t.anchorOffset),i=zr(e,t.focusNode,t.focusOffset);n&&i&&ui(e,function(){fo(e.doc,Ni(n,i),_s),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)})}}},Ma.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,e=t.display,n=t.doc.sel.primary(),i=n.from(),o=n.to();if(0==i.ch&&i.line>t.firstLine()&&(i=O(i.line-1,E(t.doc,i.line-1).length)),o.ch==E(t.doc,o.line).text.length&&o.line<t.lastLine()&&(o=O(o.line+1,0)),i.line<e.viewFrom||o.line>e.viewTo-1)return!1;var r,s,a;i.line==e.viewFrom||0==(r=kn(t,i.line))?(s=M(e.view[0].line),a=e.view[0].node):(s=M(e.view[r].line),a=e.view[r-1].node.nextSibling);var l,c,u=kn(t,o.line);if(u==e.view.length-1?(l=e.viewTo-1,c=e.lineDiv.lastChild):(l=M(e.view[u+1].line)-1,c=e.view[u+1].node.previousSibling),!a)return!1;for(var h=t.doc.splitLines($r(t,a,c,s,l)),d=L(t.doc,O(s,0),O(l,E(t.doc,l).text.length));h.length>1&&d.length>1;)if(m(h)==m(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),s++}for(var f=0,p=0,g=h[0],v=d[0],y=Math.min(g.length,v.length);f<y&&g.charCodeAt(f)==v.charCodeAt(f);)++f;for(var b=m(h),w=m(d),x=Math.min(b.length-(1==h.length?f:0),w.length-(1==d.length?f:0));p<x&&b.charCodeAt(b.length-p-1)==w.charCodeAt(w.length-p-1);)++p;if(1==h.length&&1==d.length&&s==i.line)for(;f&&f>i.ch&&b.charCodeAt(b.length-p-1)==w.charCodeAt(w.length-p-1);)f--,p++;h[h.length-1]=b.slice(0,b.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(f).replace(/\u200b+$/,"");var C=O(s,f),_=O(l,d.length?m(d).length-p:0);return h.length>1||h[0]||H(C,_)?(Po(t.doc,h,C,_,"+input"),!0):void 0},Ma.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ma.prototype.reset=function(){this.forceCompositionEnd()},Ma.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ma.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Ma.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||ui(this.cm,function(){return pi(t.cm)})},Ma.prototype.setUneditable=function(t){t.contentEditable="false"},Ma.prototype.onKeyPress=function(t){0!=t.charCode&&(t.preventDefault(),this.cm.isReadOnly()||hi(this.cm,Ar)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Ma.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Ma.prototype.onContextMenu=function(){},Ma.prototype.resetPosition=function(){},Ma.prototype.needsContentAttribute=!0;var Na=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new ys,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null};Na.prototype.init=function(t){function e(t){if(!Mt(o,t)){if(o.somethingSelected())Pr({lineWise:!1,text:o.getSelections()}),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,s.value=Aa.text.join("\n"),vs(s));else{if(!o.options.lineWiseCopyCut)return;var e=Dr(o);Pr({lineWise:!0,text:e.text}),"cut"==t.type?o.setSelections(e.ranges,null,_s):(i.prevInput="",s.value=e.text.join("\n"),vs(s))}"cut"==t.type&&(o.state.cutIncoming=!0)}}var n=this,i=this,o=this.cm,r=this.wrapper=Or(),s=this.textarea=r.firstChild;t.wrapper.insertBefore(r,t.wrapper.firstChild),ss&&(s.style.width="0px"),Is(s,"input",function(){Qr&&Zr>=9&&n.hasSelection&&(n.hasSelection=null),i.poll()}),Is(s,"paste",function(t){Mt(o,t)||Mr(t,o)||(o.state.pasteIncoming=!0,i.fastPoll())}),Is(s,"cut",e),Is(s,"copy",e),Is(t.scroller,"paste",function(e){Re(t,e)||Mt(o,e)||(o.state.pasteIncoming=!0,i.focus())}),Is(t.lineSpace,"selectstart",function(e){Re(t,e)||Ot(e)}),Is(s,"compositionstart",function(){var t=o.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:o.markText(t,o.getCursor("to"),{className:"CodeMirror-composing"})}}),Is(s,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Na.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=En(t);if(t.options.moveInputWithCursor){var o=hn(t,n.sel.primary().head,"div"),r=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,o.top+s.top-r.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,o.left+s.left-r.left))}return i},Na.prototype.showSelection=function(t){var e=this.cm,i=e.display;n(i.cursorDiv,t.cursors),n(i.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Na.prototype.reset=function(t){if(!this.contextMenuPending){var e,n,i=this.cm,o=i.doc;if(i.somethingSelected()){this.prevInput="";var r=o.sel.primary();e=Rs&&(r.to().line-r.from().line>100||(n=i.getSelection()).length>1e3);var s=e?"-":n||i.getSelection();this.textarea.value=s,i.state.focused&&vs(this.textarea),Qr&&Zr>=9&&(this.hasSelection=s)}else t||(this.prevInput=this.textarea.value="",Qr&&Zr>=9&&(this.hasSelection=null));this.inaccurateSelection=e}},Na.prototype.getField=function(){return this.textarea},Na.prototype.supportsTouch=function(){return!1},Na.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ls||s()!=this.textarea))try{this.textarea.focus()}catch(t){}},Na.prototype.blur=function(){this.textarea.blur()},Na.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Na.prototype.receivedFocus=function(){this.slowPoll()},Na.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},Na.prototype.fastPoll=function(){function t(){n.poll()||e?(n.pollingFast=!1,n.slowPoll()):(e=!0,n.polling.set(60,t))}var e=!1,n=this;n.pollingFast=!0,n.polling.set(20,t)},Na.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||Fs(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var o=n.value;if(o==i&&!e.somethingSelected())return!1;if(Qr&&Zr>=9&&this.hasSelection===o||cs&&/[\uf700-\uf7ff]/.test(o))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var r=o.charCodeAt(0);if(8203!=r||i||(i="â"),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var s=0,a=Math.min(i.length,o.length);s<a&&i.charCodeAt(s)==o.charCodeAt(s);)++s;return ui(e,function(){Ar(e,o.slice(s),i.length-s,null,t.composing?"*compose":null),o.length>1e3||o.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=o,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Na.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Na.prototype.onKeyPress=function(){Qr&&Zr>=9&&(this.hasSelection=null),this.fastPoll()},Na.prototype.onContextMenu=function(t){function e(){if(null!=s.selectionStart){var t=o.somethingSelected(),e="â"+(t?s.value:"");s.value="â",s.value=e,i.prevInput=t?"":"â",s.selectionStart=1,s.selectionEnd=e.length,r.selForContextMenu=o.doc.sel}}function n(){if(i.contextMenuPending=!1,i.wrapper.style.cssText=u,s.style.cssText=c,Qr&&Zr<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),null!=s.selectionStart){(!Qr||Qr&&Zr<9)&&e();var t=0,n=function(){r.selForContextMenu==o.doc.sel&&0==s.selectionStart&&s.selectionEnd>0&&"â"==i.prevInput?hi(o,xo)(o):t++<10?r.detectingSelectAll=setTimeout(n,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(n,200)}}var i=this,o=i.cm,r=o.display,s=i.textarea,a=Sn(o,t),l=r.scroller.scrollTop;if(a&&!ns){o.options.resetSelectionOnContextMenu&&-1==o.doc.sel.contains(a)&&hi(o,fo)(o.doc,Ni(a),_s);var c=s.style.cssText,u=i.wrapper.style.cssText;i.wrapper.style.cssText="position: absolute";var h=i.wrapper.getBoundingClientRect();s.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-h.top-5)+"px; left: "+(t.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(Qr?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var d;if(Jr&&(d=window.scrollY),r.input.focus(),Jr&&window.scrollTo(null,d),r.input.reset(),o.somethingSelected()||(s.value=i.prevInput=" "),i.contextMenuPending=!0,r.selForContextMenu=o.doc.sel,clearTimeout(r.detectingSelectAll),Qr&&Zr>=9&&e(),ms){Rt(t);var f=function(){Pt(window,"mouseup",f),setTimeout(n,20)};Is(window,"mouseup",f)}else setTimeout(n,50)}},Na.prototype.readOnlyChanged=function(t){t||this.reset()},Na.prototype.setUneditable=function(){},Na.prototype.needsContentAttribute=!1,function(t){function e(e,i,o,r){t.defaults[e]=i,o&&(n[e]=r?function(t,e,n){n!=Ta&&o(t,e,n)}:o)}var n=t.optionHandlers;t.defineOption=e,t.Init=Ta,e("value","",function(t,e){return t.setValue(e)},!0),e("mode",null,function(t,e){t.doc.modeOption=e,Ri(t)},!0),e("indentUnit",2,Ri,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){Bi(t),rn(t),pi(t)},!0),e("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var n=[],i=t.doc.first;t.doc.iter(function(t){for(var o=0;;){var r=t.text.indexOf(e,o);if(-1==r)break;o=r+e.length,n.push(O(i,r))}i++});for(var o=n.length-1;o>=0;o--)Po(t.doc,e,n[o],O(n[o].line,n[o].ch+e.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=Ta&&t.refresh()}),e("specialCharPlaceholder",de,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",ls?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),e("rtlMoveVisually",!hs),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){Cr(t),_r(t)},!0),e("keyMap","default",function(t,e,n){var i=tr(e),o=n!=Ta&&tr(n);o&&o.detach&&o.detach(t,i),i.attach&&i.attach(t,o||null)}),e("extraKeys",null),e("lineWrapping",!1,kr,!0),e("gutters",[],function(t){Ai(t.options),_r(t)},!0),e("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?xn(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return Vn(t)},!0),e("scrollbarStyle","native",function(t){Xn(t),Vn(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t){Ai(t.options),_r(t)},!0),e("firstLineNumber",1,_r,!0),e("lineNumberFormatter",function(t){return t},_r,!0),e("showCursorWhenSelecting",!1,Tn,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("readOnly",!1,function(t,e){"nocursor"==e?(In(t),t.display.input.blur(),t.display.disabled=!0):t.display.disabled=!1,t.display.input.readOnlyChanged(e)}),e("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),e("dragDrop",!0,Sr),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,Tn,!0),e("singleCursorHeightPerLine",!0,Tn,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,Bi,!0),e("addModeClass",!1,Bi,!0),e("pollInterval",100),e("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,Bi,!0),e("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),e("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),e("autofocus",null),e("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0)}(Tr),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,o=i[t];i[t]==n&&"mode"!=t||(i[t]=n,e.hasOwnProperty(t)&&hi(this,e[t])(this,n,o),At(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](tr(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:di(function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");v(this.state.overlays,{mode:i,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},function(t){return t.priority}),this.state.modeGen++,pi(this)}),removeOverlay:di(function(t){for(var e=this,n=this.state.overlays,i=0;i<n.length;++i){var o=n[i].modeSpec;if(o==t||"string"==typeof t&&o.name==t)return n.splice(i,1),e.state.modeGen++,void pi(e)}}),indentLine:di(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),D(this.doc,t)&&Lr(this,t,e,n)}),indentSelection:di(function(t){for(var e=this,n=this.doc.sel.ranges,i=-1,o=0;o<n.length;o++){var r=n[o];if(r.empty())r.head.line>i&&(Lr(e,r.head.line,t,!0),i=r.head.line,o==e.doc.sel.primIndex&&ti(e));else{var s=r.from(),a=r.to(),l=Math.max(i,s.line);i=Math.min(e.lastLine(),a.line-(a.ch?0:1))+1;for(var c=l;c<i;++c)Lr(e,c,t);var u=e.doc.sel.ranges;0==s.ch&&n.length==u.length&&u[o].from().ch>0&&lo(e.doc,o,new ra(s,u[o].to()),_s)}}}),getTokenAt:function(t,e){return oe(this,t,e)},getLineTokens:function(t,e){return oe(this,O(t),e,!0)},getTokenTypeAt:function(t){t=z(this.doc,t);var e,n=Jt(this,E(this.doc,t.line)),i=0,o=(n.length-1)/2,r=t.ch;if(0==r)e=n[2];else for(;;){var s=i+o>>1;if((s?n[2*s-1]:0)>=r)o=s;else{if(!(n[2*s+1]<r)){e=n[2*s+2];break}i=s+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=this,o=[];if(!n.hasOwnProperty(e))return o;var r=n[e],s=this.getModeAt(t);if("string"==typeof s[e])r[s[e]]&&o.push(r[s[e]]);else if(s[e])for(var a=0;a<s[e].length;a++){var l=r[s[e][a]];l&&o.push(l)}else s.helperType&&r[s.helperType]?o.push(r[s.helperType]):r[s.name]&&o.push(r[s.name]);for(var c=0;c<r._global.length;c++){var u=r._global[c];u.pred(s,i)&&-1==d(o,u.val)&&o.push(u.val)}return o},getStateAfter:function(t,e){var n=this.doc;return t=$(n,null==t?n.first+n.size-1:t),te(this,t+1,e)},cursorCoords:function(t,e){var n,i=this.doc.sel.primary();return n=null==t?i.head:"object"==typeof t?z(this.doc,t):t?i.from():i.to(),hn(this,n,e||"page")},charCoords:function(t,e){return un(this,z(this.doc,t),e||"page")},coordsChar:function(t,e){return t=cn(this,t,e||"page"),pn(this,t.left,t.top)},lineAtHeight:function(t,e){return t=cn(this,{top:t,left:0},e||"page").top,N(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,o=!1;if("number"==typeof t){var r=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>r&&(t=r,o=!0),i=E(this.doc,t)}else i=t;return ln(this,i,{top:0,left:0},e||"page",n||o).top+(o?this.doc.height-yt(i):0)},defaultTextHeight:function(){return yn(this.display)},defaultCharWidth:function(){
return bn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,o){var r=this.display;t=hn(this,z(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),r.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var l=Math.max(r.wrapper.clientHeight,this.doc.height),c=Math.max(r.sizer.clientWidth,r.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==o?(a=r.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==o?a=0:"middle"==o&&(a=(r.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),n&&Qn(this,{left:a,top:s,right:a+e.offsetWidth,bottom:s+e.offsetHeight})},triggerOnKeyDown:di(ur),triggerOnKeyPress:di(fr),triggerOnKeyUp:dr,execCommand:function(t){if(_a.hasOwnProperty(t))return _a[t].call(null,this)},triggerElectric:di(function(t){Nr(this,t)}),findPosH:function(t,e,n,i){var o=this,r=1;e<0&&(r=-1,e=-e);for(var s=z(this.doc,t),a=0;a<e&&(s=Hr(o.doc,s,r,n,i),!s.hitSide);++a);return s},moveH:di(function(t,e){var n=this;this.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Hr(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()},ks)}),deleteH:di(function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):er(this,function(n){var o=Hr(i,n.head,t,e,!1);return t<0?{from:o,to:n.head}:{from:n.head,to:o}})}),findPosV:function(t,e,n,i){var o=this,r=1,s=i;e<0&&(r=-1,e=-e);for(var a=z(this.doc,t),l=0;l<e;++l){var c=hn(o,a,"div");if(null==s?s=c.left:c.left=s,a=Fr(o,c,r,n),a.hitSide)break}return a},moveV:di(function(t,e){var n=this,i=this.doc,o=[],r=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(r)return t<0?s.from():s.to();var a=hn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),o.push(a.left);var l=Fr(n,a,t,e);return"page"==e&&s==i.sel.primary()&&Jn(n,null,un(n,l,"div").top-a.top),l},ks),o.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=o[s]}),findWordAt:function(t){var e=this.doc,n=E(e,t.line).text,i=t.ch,o=t.ch;if(n){var r=this.getHelper(t,"wordChars");"before"!=t.sticky&&o!=n.length||!i?++o:--i;for(var s=n.charAt(i),a=x(s,r)?function(t){return x(t,r)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!x(t)};i>0&&a(n.charAt(i-1));)--i;for(;o<n.length&&a(n.charAt(o));)++o}return new ra(O(t.line,i),O(t.line,o))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?a(this.display.cursorDiv,"CodeMirror-overwrite"):gs(this.display.cursorDiv,"CodeMirror-overwrite"),At(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==s()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:di(function(t,e){null==t&&null==e||ei(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-ze(this)-this.display.barHeight,width:t.scrollWidth-ze(this)-this.display.barWidth,clientHeight:qe(this),clientWidth:je(this)}},scrollIntoView:di(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:O(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)ei(this),this.curOp.scrollToPos=t;else{var n=Zn(this,{left:Math.min(t.from.left,t.to.left),top:Math.min(t.from.top,t.to.top)-t.margin,right:Math.max(t.from.right,t.to.right),bottom:Math.max(t.from.bottom,t.to.bottom)+t.margin});this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:di(function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&on(this);var o=this.display.viewFrom;this.doc.iter(o,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){mi(n,o,"widget");break}++o}),this.curOp.forceUpdate=!0,At(this,"refresh",this)}),operation:function(t){return ui(this,t)},refresh:di(function(){var t=this.display.cachedTextHeight;pi(this),this.curOp.forceUpdate=!0,rn(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),Ei(this),(null==t||Math.abs(t-yn(this.display))>.5)&&_n(this),At(this,"refresh",this)}),swapDoc:di(function(t){var e=this.doc;return e.cm=null,ji(this,t),rn(this),this.display.input.reset(),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,_e(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},It(t),t.registerHelper=function(e,i,o){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][i]=o},t.registerGlobalHelper=function(e,i,o,r){t.registerHelper(e,i,r),n[e]._global.push({pred:o,val:r})}}(Tr);var Da="iter insert remove copy getEditor constructor".split(" ");for(var Ia in fa.prototype)fa.prototype.hasOwnProperty(Ia)&&d(Da,Ia)<0&&(Tr.prototype[Ia]=function(t){return function(){return t.apply(this.doc,arguments)}}(fa.prototype[Ia]));return It(fa),Tr.inputStyles={textarea:Na,contenteditable:Ma},Tr.defineMode=function(t){Tr.defaults.mode||"null"==t||(Tr.defaults.mode=t),qt.apply(this,arguments)},Tr.defineMIME=Ut,Tr.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Tr.defineMIME("text/plain","null"),Tr.defineExtension=function(t,e){Tr.prototype[t]=e},Tr.defineDocExtension=function(t,e){fa.prototype[t]=e},Tr.fromTextArea=qr,function(t){t.off=Pt,t.on=Is,t.wheelEventPixels=jn,t.Doc=fa,t.splitLines=Hs,t.countColumn=h,t.findColumn=f,t.isWordChar=w,t.Pass=Cs,t.signal=At,t.Line=qs,t.changeEnd=Di,t.scrollbarModel=ea,t.Pos=O,t.cmpPos=H,t.modes=Ws,t.mimeModes=$s,t.resolveMode=Vt,t.getMode=Kt,t.modeExtensions=zs,t.extendMode=Xt,t.copyState=Yt,t.startState=Qt,t.innerMode=Gt,t.commands=_a,t.keyMap=wa,t.keyName=Jo,t.isModifierKey=Zo,t.lookupKey=Qo,t.normalizeKeyMap=Go,t.StringStream=js,t.SharedTextMarker=ha,t.TextMarker=ua,t.LineWidget=la,t.e_preventDefault=Ot,t.e_stopPropagation=Ht,t.e_stop=Rt,t.addClass=a,t.contains=r,t.rmClass=gs,t.keyNames=ga}(Tr),Tr.version="5.25.0",Tr}()}()},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])}})})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!i||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:t(this[0].ownerDocument||document)}})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(8),n(1),n(5)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){var e=!1;return t(document).on("mouseup",function(){e=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&t(n.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&t.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,n.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};e.default=i,t.exports=e.default},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n.n(i),r=n(27),s=(n.n(r),n(31)),a=(n.n(s),n(32)),l=(n.n(a),n(33)),c=n.n(l),u=n(6),h=n.n(u),d=n(39),f=n.n(d);window.$=window.jQuery=o.a,window.MediumEditor=c.a,window.CodeMirror=h.a,n(25),window.swal=f.a,n(15),n(16),n(23),n(24),function(t){window.top.jsEmailBuilderEmitter=n(18);var e=window.top.jsEmailBuilderEmitter,i=n(20),o=n(21),r=n(19),s=n(17),a=n(22),l={theme:"default"};t.EmailBuilder=function(n){var c=t.extend({},l,n);this.emitter=e,this.Nav=i,this.Theme=o,this.Module=r,this.Module=r,this.ContentEditor=s,this.Utils=a,this.emitter.on("init",function(){e.emit("theme_load",c.theme),t('[data-type="editor"]').on("DOMSubtreeModified",function(){e.emit("update_template")})}),this.emitter.on("switch_theme",function(){e.emit("theme_load",c.theme)}),this.init=function(){this.emitter.emit("init")},this.switchTheme=function(t){c.theme=t,this.emitter.emit("switch_theme")}}}(jQuery)},function(t,e){},function(t,e,n){var i,o,r;!function(s){o=[n(0)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){"use strict";function e(e,n){var i,o,r,s,a,c=t('<div class="minicolors" />'),u=t.minicolors.defaults;if(!e.data("minicolors-initialized")){if(n=t.extend(!0,{},u,n),c.addClass("minicolors-theme-"+n.theme).toggleClass("minicolors-with-opacity",n.opacity).toggleClass("minicolors-no-data-uris",!0!==n.dataUris),void 0!==n.position&&t.each(n.position.split(" "),function(){c.addClass("minicolors-position-"+this)}),i="rgb"===n.format?n.opacity?"25":"20":n.keywords?"11":"7",e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",n).prop("size",i).wrap(c).after('<div class="minicolors-panel minicolors-slider-'+n.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),n.inline||(e.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-input-swatch").on("click",function(t){t.preventDefault(),e.focus()})),s=e.parent().find(".minicolors-panel"),s.on("selectstart",function(){return!1}).end(),n.swatches&&0!==n.swatches.length)for(n.swatches.length>7&&(n.swatches.length=7),s.addClass("minicolors-with-swatches"),o=t('<ul class="minicolors-swatches"></ul>').appendTo(s),a=0;a<n.swatches.length;++a)r=n.swatches[a],r=v(r)?p(r,!0):k(f(r,!0)),t('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(o).data("swatch-color",n.swatches[a]).find(".minicolors-swatch-color").css({backgroundColor:x(r),opacity:r.a}),n.swatches[a]=r;n.inline&&e.parent().addClass("minicolors-inline"),l(e,!1),e.data("minicolors-initialized",!0)}}function n(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function i(t){var e=t.parent(),n=e.find(".minicolors-panel"),i=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(o(),e.addClass("minicolors-focus"),n.stop(!0,!0).fadeIn(i.showSpeed,function(){i.show&&i.show.call(t.get(0))}))}function o(){t(".minicolors-focus").each(function(){var e=t(this),n=e.find(".minicolors-input"),i=e.find(".minicolors-panel"),o=n.data("minicolors-settings");i.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(n.get(0)),e.removeClass("minicolors-focus")})})}function r(t,e,n){var i,o,r,a,l=t.parents(".minicolors").find(".minicolors-input"),c=l.data("minicolors-settings"),u=t.find("[class$=-picker]"),h=t.offset().left,d=t.offset().top,f=Math.round(e.pageX-h),p=Math.round(e.pageY-d),m=n?c.animationSpeed:0;e.originalEvent.changedTouches&&(f=e.originalEvent.changedTouches[0].pageX-h,p=e.originalEvent.changedTouches[0].pageY-d),f<0&&(f=0),p<0&&(p=0),f>t.width()&&(f=t.width()),p>t.height()&&(p=t.height()),t.parent().is(".minicolors-slider-wheel")&&u.parent().is(".minicolors-grid")&&(i=75-f,o=75-p,r=Math.sqrt(i*i+o*o),a=Math.atan2(o,i),a<0&&(a+=2*Math.PI),r>75&&(r=75,f=75-75*Math.cos(a),p=75-75*Math.sin(a)),f=Math.round(f),p=Math.round(p)),t.is(".minicolors-grid")?u.stop(!0).animate({top:p+"px",left:f+"px"},m,c.animationEasing,function(){s(l,t)}):u.stop(!0).animate({top:p+"px"},m,c.animationEasing,function(){s(l,t)})}function s(t,e){function n(t,e){var n,i;return t.length&&e?(n=t.offset().left,i=t.offset().top,{x:n-e.offset().left+t.outerWidth()/2,y:i-e.offset().top+t.outerHeight()/2}):null}var i,o,r,s,l,u,h,d=t.val(),f=t.attr("data-opacity"),p=t.parent(),m=t.data("minicolors-settings"),v=p.find(".minicolors-input-swatch"),y=p.find(".minicolors-grid"),b=p.find(".minicolors-slider"),w=p.find(".minicolors-opacity-slider"),x=y.find("[class$=-picker]"),_=b.find("[class$=-picker]"),S=w.find("[class$=-picker]"),k=n(x,y),T=n(_,b),E=n(S,w);if(e.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(m.control){case"wheel":s=y.width()/2-k.x,l=y.height()/2-k.y,u=Math.sqrt(s*s+l*l),h=Math.atan2(l,s),h<0&&(h+=2*Math.PI),u>75&&(u=75,k.x=69-75*Math.cos(h),k.y=69-75*Math.sin(h)),o=g(u/.75,0,100),i=g(180*h/Math.PI,0,360),r=g(100-Math.floor(T.y*(100/b.height())),0,100),d=C({h:i,s:o,b:r}),b.css("backgroundColor",C({h:i,s:o,b:100}));break;case"saturation":i=g(parseInt(k.x*(360/y.width()),10),0,360),o=g(100-Math.floor(T.y*(100/b.height())),0,100),r=g(100-Math.floor(k.y*(100/y.height())),0,100),d=C({h:i,s:o,b:r}),b.css("backgroundColor",C({h:i,s:100,b:r})),p.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":i=g(parseInt(k.x*(360/y.width()),10),0,360),o=g(100-Math.floor(k.y*(100/y.height())),0,100),r=g(100-Math.floor(T.y*(100/b.height())),0,100),d=C({h:i,s:o,b:r}),b.css("backgroundColor",C({h:i,s:o,b:100})),p.find(".minicolors-grid-inner").css("opacity",1-r/100);break;default:i=g(360-parseInt(T.y*(360/b.height()),10),0,360),o=g(Math.floor(k.x*(100/y.width())),0,100),r=g(100-Math.floor(k.y*(100/y.height())),0,100),d=C({h:i,s:o,b:r}),y.css("backgroundColor",C({h:i,s:100,b:100}))}f=m.opacity?parseFloat(1-E.y/w.height()).toFixed(2):1,a(t,d,f)}else v.find("span").css({backgroundColor:d,opacity:f}),c(t,d,f)}function a(t,e,n){var i,o=t.parent(),r=t.data("minicolors-settings"),s=o.find(".minicolors-input-swatch");r.opacity&&t.attr("data-opacity",n),"rgb"===r.format?(i=v(e)?p(e,!0):k(f(e,!0)),n=""===t.attr("data-opacity")?1:g(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),!isNaN(n)&&r.opacity||(n=1),e=t.minicolors("rgbObject").a<=1&&i&&r.opacity?"rgba("+i.r+", "+i.g+", "+i.b+", "+parseFloat(n)+")":"rgb("+i.r+", "+i.g+", "+i.b+")"):(v(e)&&(e=w(e)),e=d(e,r.letterCase)),t.val(e),s.find("span").css({backgroundColor:e,opacity:n}),c(t,e,n)}function l(e,n){var i,o,r,s,a,l,u,h,b,x,S=e.parent(),k=e.data("minicolors-settings"),T=S.find(".minicolors-input-swatch"),E=S.find(".minicolors-grid"),L=S.find(".minicolors-slider"),P=S.find(".minicolors-opacity-slider"),A=E.find("[class$=-picker]"),M=L.find("[class$=-picker]"),N=P.find("[class$=-picker]");switch(v(e.val())?(i=w(e.val()),(a=g(parseFloat(y(e.val())).toFixed(2),0,1))&&e.attr("data-opacity",a)):i=d(f(e.val(),!0),k.letterCase),i||(i=d(m(k.defaultValue,!0),k.letterCase)),o=_(i),s=k.keywords?t.map(k.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],l=""!==e.val()&&t.inArray(e.val().toLowerCase(),s)>-1?d(e.val()):v(e.val())?p(e.val()):i,n||e.val(l),k.opacity&&(r=""===e.attr("data-opacity")?1:g(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(r)&&(r=1),e.attr("data-opacity",r),T.find("span").css("opacity",r),h=g(P.height()-P.height()*r,0,P.height()),N.css("top",h+"px")),"transparent"===e.val().toLowerCase()&&T.find("span").css("opacity",0),T.find("span").css("backgroundColor",i),k.control){case"wheel":b=g(Math.ceil(.75*o.s),0,E.height()/2),x=o.h*Math.PI/180,u=g(75-Math.cos(x)*b,0,E.width()),h=g(75-Math.sin(x)*b,0,E.height()),A.css({top:h+"px",left:u+"px"}),h=150-o.b/(100/E.height()),""===i&&(h=0),M.css("top",h+"px"),L.css("backgroundColor",C({h:o.h,s:o.s,b:100}));break;case"saturation":u=g(5*o.h/12,0,150),h=g(E.height()-Math.ceil(o.b/(100/E.height())),0,E.height()),A.css({top:h+"px",left:u+"px"}),h=g(L.height()-o.s*(L.height()/100),0,L.height()),M.css("top",h+"px"),L.css("backgroundColor",C({h:o.h,s:100,b:o.b})),S.find(".minicolors-grid-inner").css("opacity",o.s/100);break;case"brightness":u=g(5*o.h/12,0,150),h=g(E.height()-Math.ceil(o.s/(100/E.height())),0,E.height()),A.css({top:h+"px",left:u+"px"}),h=g(L.height()-o.b*(L.height()/100),0,L.height()),M.css("top",h+"px"),L.css("backgroundColor",C({h:o.h,s:o.s,b:100})),S.find(".minicolors-grid-inner").css("opacity",1-o.b/100);break;default:u=g(Math.ceil(o.s/(100/E.width())),0,E.width()),h=g(E.height()-Math.ceil(o.b/(100/E.height())),0,E.height()),A.css({top:h+"px",left:u+"px"}),h=g(L.height()-o.h/(360/L.height()),0,L.height()),M.css("top",h+"px"),E.css("backgroundColor",C({h:o.h,s:100,b:100}))}e.data("minicolors-initialized")&&c(e,l,r)}function c(t,e,n){var i,o,r=t.data("minicolors-settings"),s=t.data("minicolors-lastChange");if(!s||s.value!==e||s.opacity!==n){if(t.data("minicolors-lastChange",{value:e,opacity:n}),r.swatches&&0!==r.swatches.length){for(i=v(e)?p(e,!0):k(e),o=0;o<r.swatches.length&&(i.r!==r.swatches[o].r||i.g!==r.swatches[o].g||i.b!==r.swatches[o].b||i.a!==r.swatches[o].a);++o);t.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==o&&t.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}r.change&&(r.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){r.change.call(t.get(0),e,n)},r.changeDelay))):r.change.call(t.get(0),e,n)),t.trigger("change").trigger("input")}}function u(e){var n=f(t(e).val(),!0),i=k(n),o=t(e).attr("data-opacity");return i?(void 0!==o&&t.extend(i,{a:parseFloat(o)}),i):null}function h(e,n){var i=f(t(e).val(),!0),o=k(i),r=t(e).attr("data-opacity");return o?(void 0===r&&(r=1),n?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(r)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null}function d(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function f(t,e){return t=t.replace(/^#/g,""),t.match(/^[A-F0-9]{3,6}/gi)?3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t):""}function p(t,e){var n=t.replace(/[^\d,.]/g,""),i=n.split(",");return i[0]=g(parseInt(i[0],10),0,255),i[1]=g(parseInt(i[1],10),0,255),i[2]=g(parseInt(i[2],10),0,255),i[3]&&(i[3]=g(parseFloat(i[3],10),0,1)),e?{r:i[0],g:i[1],b:i[2],a:i[3]?i[3]:null}:void 0!==i[3]&&i[3]<=1?"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")":"rgb("+i[0]+", "+i[1]+", "+i[2]+")"}function m(t,e){return v(t)?p(t):f(t,e)}function g(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function v(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!e||4!==e.length)}function y(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),t&&6===t.length?t[4]:"1"}function b(t){var e={},n=Math.round(t.h),i=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0===i)e.r=e.g=e.b=o;else{var r=o,s=(255-i)*o/255,a=n%60*(r-s)/60;360===n&&(n=0),n<60?(e.r=r,e.b=s,e.g=s+a):n<120?(e.g=r,e.b=s,e.r=r-a):n<180?(e.g=r,e.r=s,e.b=s+a):n<240?(e.b=r,e.r=s,e.g=r-a):n<300?(e.b=r,e.g=s,e.r=s+a):n<360?(e.r=r,e.g=s,e.b=r-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}function w(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function x(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(n,function(t,e){1===e.length&&(n[t]="0"+e)}),"#"+n.join("")}function C(t){return x(b(t))}function _(t){var e=S(k(t));return 0===e.s&&(e.h=360),e}function S(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),o=i-n;return e.b=i,e.s=0!==i?255*o/i:0,0!==e.s?t.r===i?e.h=(t.g-t.b)/o:t.g===i?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}function k(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},t.extend(t.fn,{minicolors:function(r,s){switch(r){case"destroy":return t(this).each(function(){n(t(this))}),t(this);case"hide":return o(),t(this);case"opacity":return void 0===s?t(this).attr("data-opacity"):(t(this).each(function(){l(t(this).attr("data-opacity",s))}),t(this));case"rgbObject":return u(t(this));case"rgbString":case"rgbaString":return h(t(this),"rgbaString"===r);case"settings":return void 0===s?t(this).data("minicolors-settings"):(t(this).each(function(){var e=t(this).data("minicolors-settings")||{};n(t(this)),t(this).minicolors(t.extend(!0,e,s))}),t(this));case"show":return i(t(this).eq(0)),t(this);case"value":return void 0===s?t(this).val():(t(this).each(function(){"object"==typeof s?(s.opacity&&t(this).attr("data-opacity",g(s.opacity,0,1)),s.color&&t(this).val(s.color)):t(this).val(s),l(t(this))}),t(this));default:return"create"!==r&&(s=r),t(this).each(function(){e(t(this),s)}),t(this)}}}),t(document).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||o()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var n=t(this);e.preventDefault(),t(document).data("minicolors-target",n),r(n,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var n=t(document).data("minicolors-target");n&&r(n,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var n=t(this),i=n.parents(".minicolors").find(".minicolors-input"),o=n.data("swatch-color");a(i,o,y(o)),l(i)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var n=t(this).parent().find(".minicolors-input");e.preventDefault(),i(n)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&i(e)}).on("blur.minicolors",".minicolors-input",function(){var e,n,i,o,r,s=t(this),a=s.data("minicolors-settings");s.data("minicolors-initialized")&&(e=a.keywords?t.map(a.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],""!==s.val()&&t.inArray(s.val().toLowerCase(),e)>-1?r=s.val():(v(s.val())?i=p(s.val(),!0):(n=f(s.val(),!0),i=n?k(n):null),r=null===i?a.defaultValue:"rgb"===a.format?p(a.opacity?"rgba("+i.r+","+i.g+","+i.b+","+s.attr("data-opacity")+")":"rgb("+i.r+","+i.g+","+i.b+")"):x(i)),o=a.opacity?s.attr("data-opacity"):1,"transparent"===r.toLowerCase()&&(o=0),s.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",o),s.val(r),""===s.val()&&s.val(m(a.defaultValue,!0)),s.val(d(s.val(),a.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var n=t(this);if(n.data("minicolors-initialized"))switch(e.keyCode){case 9:o();break;case 13:case 27:o(),n.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&l(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){l(e,!0)},1)})})},function(t,e){!function(t,e,n,i){"use strict";function o(t){var e=t.currentTarget,i=t.data?t.data.options:{},o=t.data?t.data.items:[],r="",s=0;t.preventDefault(),t.stopPropagation(),n(e).attr("data-fancybox")&&(r=n(e).data("fancybox")),r?(o=o.length?o.filter('[data-fancybox="'+r+'"]'):n("[data-fancybox="+r+"]"),s=o.index(e)):o=[e],n.fancybox.open(o,i,s)}if(!n)return i;var r={speed:330,loop:!0,opacity:"auto",margin:[44,0],gutter:30,infobar:!0,buttons:!0,slideShow:!0,fullScreen:!0,thumbs:!0,closeBtn:!0,smallBtn:"auto",image:{preload:"auto",protect:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:!0,scrolling:"no",css:{}},baseClass:"",slideClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-controls"><div class="fancybox-infobar"><button data-fancybox-previous class="fancybox-button fancybox-button--left" title="Previous"></button><div class="fancybox-infobar__body"><span class="js-fancybox-index"></span>&nbsp;/&nbsp;<span class="js-fancybox-count"></span></div><button data-fancybox-next class="fancybox-button fancybox-button--right" title="Next"></button></div><div class="fancybox-buttons"><button data-fancybox-close class="fancybox-button fancybox-button--close" title="Close (Esc)"></button></div></div><div class="fancybox-slider-wrap"><div class="fancybox-slider"></div></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>The requested content cannot be loaded. <br /> Please try again later.<p></div>',closeTpl:'<button data-fancybox-close class="fancybox-close-small"></button>',parentEl:"body",touch:!0,keyboard:!0,focus:!0,closeClickOutside:!0,beforeLoad:n.noop,afterLoad:n.noop,beforeMove:n.noop,afterMove:n.noop,onComplete:n.noop,onInit:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop},s=n(t),a=n(e),l=0,c=function(t){return t&&t.hasOwnProperty&&t instanceof n},u=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),h=function(i){var o;return"function"==typeof n&&i instanceof n&&(i=i[0]),o=i.getBoundingClientRect(),o.bottom>0&&o.right>0&&o.left<(t.innerWidth||e.documentElement.clientWidth)&&o.top<(t.innerHeight||e.documentElement.clientHeight)},d=function(t,i,o){var s=this;s.opts=n.extend(!0,{index:o},r,i||{}),s.id=s.opts.id||++l,s.group=[],s.currIndex=parseInt(s.opts.index,10)||0,s.prevIndex=null,s.prevPos=null,s.currPos=0,s.firstRun=null,s.createGroup(t),s.group.length&&(s.$lastFocus=n(e.activeElement).blur(),s.slides={},s.init(t))};n.extend(d.prototype,{init:function(){var t,e,i=this,o=!1;i.scrollTop=a.scrollTop(),i.scrollLeft=a.scrollLeft(),n.fancybox.getInstance()||(t=n("body").width(),n("html").addClass("fancybox-enabled"),n.fancybox.isTouch?(n.each(i.group,function(t,e){if("image"!==e.type&&"iframe"!==e.type)return o=!0,!1}),o&&n("body").css({position:"fixed",width:t,top:-1*i.scrollTop})):(t=n("body").width()-t)>1&&n('<style id="fancybox-noscroll" type="text/css">').html(".compensate-for-scrollbar, .fancybox-enabled body { margin-right: "+t+"px; }").appendTo("head")),e=n(i.opts.baseTpl).attr("id","fancybox-container-"+i.id).data("FancyBox",i).addClass(i.opts.baseClass).hide().prependTo(i.opts.parentEl),i.$refs={container:e,bg:e.find(".fancybox-bg"),controls:e.find(".fancybox-controls"),buttons:e.find(".fancybox-buttons"),slider_wrap:e.find(".fancybox-slider-wrap"),slider:e.find(".fancybox-slider"),caption:e.find(".fancybox-caption")},i.trigger("onInit"),i.activate(),i.current||i.jumpTo(i.currIndex)},createGroup:function(t){var e=this,o=n.makeArray(t);n.each(o,function(t,o){var r,s,a,l,c={},u={},h=[];n.isPlainObject(o)?(c=o,u=o.opts||{}):"object"===n.type(o)&&n(o).length?(r=n(o),h=r.data(),u="options"in h?h.options:{},u="object"===n.type(u)?u:{},c.type="type"in h?h.type:u.type,c.src="src"in h?h.src:u.src||r.attr("href"),u.width="width"in h?h.width:u.width,u.height="height"in h?h.height:u.height,u.thumb="thumb"in h?h.thumb:u.thumb,u.selector="selector"in h?h.selector:u.selector,
"srcset"in h&&(u.image={srcset:h.srcset}),u.$orig=r):c={type:"html",content:o+""},c.opts=n.extend(!0,{},e.opts,u),s=c.type,a=c.src||"",s||(c.content?s="html":a.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?s="image":a.match(/\.(pdf)((\?|#).*)?$/i)?s="pdf":"#"===a.charAt(0)&&(s="inline"),c.type=s),c.index=e.group.length,c.opts.$orig&&!c.opts.$orig.length&&delete c.opts.$orig,!c.opts.$thumb&&c.opts.$orig&&(c.opts.$thumb=c.opts.$orig.find("img:first")),c.opts.$thumb&&!c.opts.$thumb.length&&delete c.opts.$thumb,"function"===n.type(c.opts.caption)?c.opts.caption=c.opts.caption.apply(o,[e,c]):"caption"in h?c.opts.caption=h.caption:u.$orig&&(c.opts.caption=r.attr("title")),c.opts.caption=c.opts.caption===i?"":c.opts.caption+"","ajax"===s&&(l=a.split(/\s+/,2),l.length>1&&(c.src=l.shift(),c.opts.selector=l.shift())),"auto"==c.opts.smallBtn&&(n.inArray(s,["html","inline","ajax"])>-1?(c.opts.buttons=!1,c.opts.smallBtn=!0):c.opts.smallBtn=!1),"pdf"===s&&(c.type="iframe",c.opts.closeBtn=!0,c.opts.smallBtn=!1,c.opts.iframe.preload=!1),c.opts.modal&&n.extend(!0,c.opts,{infobar:0,buttons:0,keyboard:0,slideShow:0,fullScreen:0,closeClickOutside:0}),e.group.push(c)})},addEvents:function(){var e=this;e.removeEvents(),e.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),e.close(t)}).on("click.fb-previous","[data-fancybox-previous]",function(t){t.stopPropagation(),t.preventDefault(),e.previous()}).on("click.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),e.next()}),n(t).on("orientationchange.fb resize.fb",function(t){u(function(){t&&t.originalEvent&&"resize"===t.originalEvent.type?e.update():(e.$refs.slider_wrap.hide(),u(function(){e.$refs.slider_wrap.show(),e.update()}))})}),a.on("focusin.fb",function(t){var i=n.fancybox?n.fancybox.getInstance():null;!i||n(t.target).hasClass("fancybox-container")||n.contains(i.$refs.container[0],t.target)||(t.stopPropagation(),i.focus(),s.scrollTop(e.scrollTop).scrollLeft(e.scrollLeft))}),a.on("keydown.fb",function(t){var i=e.current,o=t.keyCode||t.which;if(i&&i.opts.keyboard&&!n(t.target).is("input")&&!n(t.target).is("textarea")){if(8===o||27===o)return t.preventDefault(),void e.close(t);switch(o){case 37:case 38:t.preventDefault(),e.previous();break;case 39:case 40:t.preventDefault(),e.next();break;case 80:case 32:t.preventDefault(),e.SlideShow&&(t.preventDefault(),e.SlideShow.toggle());break;case 70:e.FullScreen&&(t.preventDefault(),e.FullScreen.toggle());break;case 71:e.Thumbs&&(t.preventDefault(),e.Thumbs.toggle())}}})},removeEvents:function(){s.off("scroll.fb resize.fb orientationchange.fb"),a.off("keydown.fb focusin.fb click.fb-close"),this.$refs.container.off("click.fb-close click.fb-previous click.fb-next")},previous:function(t){this.jumpTo(this.currIndex-1,t)},next:function(t){this.jumpTo(this.currIndex+1,t)},jumpTo:function(t,e){var n,o,r,s,a=this;if(n=a.firstRun=null===a.firstRun,o=r=t=parseInt(t,10),s=!!a.current&&a.current.opts.loop,!a.isAnimating&&(o!=a.currIndex||n)){if(a.group.length>1&&s)o%=a.group.length,o=o<0?a.group.length+o:o,2==a.group.length?r=t-a.currIndex+a.currPos:(r=o-a.currIndex+a.currPos,Math.abs(a.currPos-(r+a.group.length))<Math.abs(a.currPos-r)?r+=a.group.length:Math.abs(a.currPos-(r-a.group.length))<Math.abs(a.currPos-r)&&(r-=a.group.length));else if(!a.group[o])return void a.update(!1,!1,e);a.current&&(a.current.$slide.removeClass("fancybox-slide--current fancybox-slide--complete"),a.updateSlide(a.current,!0)),a.prevIndex=a.currIndex,a.prevPos=a.currPos,a.currIndex=o,a.currPos=r,a.current=a.createSlide(r),a.group.length>1&&((a.opts.loop||r-1>=0)&&a.createSlide(r-1),(a.opts.loop||r+1<a.group.length)&&a.createSlide(r+1)),a.current.isMoved=!1,a.current.isComplete=!1,e=parseInt(e===i?1.5*a.current.opts.speed:e,10),a.trigger("beforeMove"),a.updateControls(),n&&(a.current.$slide.addClass("fancybox-slide--current"),a.$refs.container.show(),u(function(){a.$refs.bg.css("transition-duration",a.current.opts.speed+"ms"),a.$refs.container.addClass("fancybox-container--ready")})),a.update(!0,!1,n?0:e,function(){a.afterMove()}),a.loadSlide(a.current),n&&a.current.$ghost||a.preload()}},createSlide:function(t){var e,i,o,r=this;if(i=t%r.group.length,i=i<0?r.group.length+i:i,!r.slides[t]&&r.group[i]){if(r.opts.loop&&r.group.length>2)for(var s in r.slides)if(r.slides[s].index===i)return o=r.slides[s],o.pos=t,r.slides[t]=o,delete r.slides[s],r.updateSlide(o),o;e=n('<div class="fancybox-slide"></div>').appendTo(r.$refs.slider),r.slides[t]=n.extend(!0,{},r.group[i],{pos:t,$slide:e,isMoved:!1,isLoaded:!1})}return r.slides[t]},zoomInOut:function(t,e,i){var o,r,s,a=this,l=a.current,c=l.$placeholder,u=l.opts.opacity,d=l.opts.$thumb,f=d?d.offset():0,p=l.$slide.offset();return!(!(c&&l.isMoved&&f&&h(d))||"In"===t&&!a.firstRun||(n.fancybox.stop(c),a.isAnimating=!0,o={top:f.top-p.top+parseFloat(d.css("border-top-width")||0),left:f.left-p.left+parseFloat(d.css("border-left-width")||0),width:d.width(),height:d.height(),scaleX:1,scaleY:1},"auto"==u&&(u=Math.abs(l.width/l.height-o.width/o.height)>.1),"In"===t?(r=o,s=a.getFitPos(l),s.scaleX=s.width/r.width,s.scaleY=s.height/r.height,u&&(r.opacity=.1,s.opacity=1)):(r=n.fancybox.getTranslate(c),s=o,l.$ghost&&(l.$ghost.show(),l.$image&&l.$image.remove()),r.scaleX=r.width/s.width,r.scaleY=r.height/s.height,r.width=s.width,r.height=s.height,u&&(s.opacity=0)),a.updateCursor(s.width,s.height),delete s.width,delete s.height,n.fancybox.setTranslate(c,r),c.show(),a.trigger("beforeZoom"+t),c.css("transition","all "+e+"ms"),n.fancybox.setTranslate(c,s),setTimeout(function(){var e;c.css("transition","none"),e=n.fancybox.getTranslate(c),e.scaleX=1,e.scaleY=1,n.fancybox.setTranslate(c,e),a.trigger("afterZoom"+t),i.apply(a),a.isAnimating=!1},e),0))},canPan:function(){var t=this,e=t.current,n=e.$placeholder,i=!1;return n&&(i=t.getFitPos(e),i=Math.abs(n.width()-i.width)>1||Math.abs(n.height()-i.height)>1),i},isScaledDown:function(){var t=this,e=t.current,i=e.$placeholder,o=!1;return i&&(o=n.fancybox.getTranslate(i),o=o.width<e.width||o.height<e.height),o},scaleToActual:function(t,e,o){var r,s,a,l,c,u=this,h=u.current,d=h.$placeholder,f=parseInt(h.$slide.width(),10),p=parseInt(h.$slide.height(),10),m=h.width,g=h.height;d&&(u.isAnimating=!0,t=t===i?.5*f:t,e=e===i?.5*p:e,r=n.fancybox.getTranslate(d),l=m/r.width,c=g/r.height,s=.5*f-.5*m,a=.5*p-.5*g,m>f&&(s=r.left*l-(t*l-t),s>0&&(s=0),s<f-m&&(s=f-m)),g>p&&(a=r.top*c-(e*c-e),a>0&&(a=0),a<p-g&&(a=p-g)),u.updateCursor(m,g),n.fancybox.animate(d,null,{top:a,left:s,scaleX:l,scaleY:c},o||h.opts.speed,function(){u.isAnimating=!1}))},scaleToFit:function(t){var e,i=this,o=i.current,r=o.$placeholder;r&&(i.isAnimating=!0,e=i.getFitPos(o),i.updateCursor(e.width,e.height),n.fancybox.animate(r,null,{top:e.top,left:e.left,scaleX:e.width/r.width(),scaleY:e.height/r.height()},t||o.opts.speed,function(){i.isAnimating=!1}))},getFitPos:function(t){var e,i,o,r,a,l,c,u=t.$placeholder||t.$content,h=t.width,d=t.height,f=t.opts.margin;return!(!u||!u.length||!h&&!d)&&("number"===n.type(f)&&(f=[f,f]),2==f.length&&(f=[f[0],f[1],f[0],f[1]]),s.width()<800&&(f=[0,0,0,0]),e=parseInt(t.$slide.width(),10)-(f[1]+f[3]),i=parseInt(t.$slide.height(),10)-(f[0]+f[2]),o=Math.min(1,e/h,i/d),l=Math.floor(o*h),c=Math.floor(o*d),r=Math.floor(.5*(i-c))+f[0],a=Math.floor(.5*(e-l))+f[3],{top:r,left:a,width:l,height:c})},update:function(t,e,i,o){var r,s=this;!0!==s.isAnimating&&s.current&&(r=s.current.pos*Math.floor(s.current.$slide.width())*-1-s.current.pos*s.current.opts.gutter,i=parseInt(i,10)||0,n.fancybox.stop(s.$refs.slider),!1===t?s.updateSlide(s.current,e):n.each(s.slides,function(t,n){s.updateSlide(n,e)}),i?n.fancybox.animate(s.$refs.slider,null,{top:0,left:r},i,function(){s.current.isMoved=!0,"function"===n.type(o)&&o.apply(s)}):(n.fancybox.setTranslate(s.$refs.slider,{top:0,left:r}),s.current.isMoved=!0,"function"===n.type(o)&&o.apply(s)))},updateSlide:function(t,e){var i,o=this,r=t.$placeholder;(t=t||o.current)&&!o.isClosing&&(i=t.pos*Math.floor(t.$slide.width())+t.pos*t.opts.gutter,i!==t.leftPos&&(n.fancybox.setTranslate(t.$slide,{top:0,left:i}),t.leftPos=i),!1!==e&&r&&(n.fancybox.setTranslate(r,o.getFitPos(t)),t.pos===o.currPos&&o.updateCursor()),t.$slide.trigger("refresh"),o.trigger("onUpdate",t))},updateCursor:function(t,e){var n,o=this,r=o.$refs.container.removeClass("fancybox-controls--canzoomIn fancybox-controls--canzoomOut fancybox-controls--canGrab");!o.isClosing&&o.opts.touch&&(n=t!==i&&e!==i?t<o.current.width&&e<o.current.height:o.isScaledDown(),n?r.addClass("fancybox-controls--canzoomIn"):o.group.length<2?r.addClass("fancybox-controls--canzoomOut"):r.addClass("fancybox-controls--canGrab"))},loadSlide:function(t){var e,i,o,r=this;if(t&&!t.isLoaded&&!t.isLoading){switch(t.isLoading=!0,r.trigger("beforeLoad",t),e=t.type,i=t.$slide,i.off("refresh").trigger("onReset").addClass("fancybox-slide--"+(e||"unknown")).addClass(t.opts.slideClass),e){case"image":r.setImage(t);break;case"iframe":r.setIframe(t);break;case"html":r.setContent(t,t.content);break;case"inline":n(t.src).length?r.setContent(t,n(t.src)):r.setError(t);break;case"ajax":r.showLoading(t),o=n.ajax(n.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,n){"success"===n&&r.setContent(t,e)},error:function(e,n){e&&"abort"!==n&&r.setError(t)}})),i.one("onReset",function(){o.abort()});break;default:r.setError(t)}return!0}},setImage:function(e){var i,o,r,s,a=this,l=e.opts.image.srcset;if(e.isLoaded&&!e.hasError)return void a.afterLoad(e);if(l){r=t.devicePixelRatio||1,s=t.innerWidth*r,o=l.split(",").map(function(t){var e={};return t.trim().split(/\s+/).forEach(function(t,n){var i=parseInt(t.substring(0,t.length-1),10);return 0===n?e.url=t:void(i&&(e.value=i,e.postfix=t[t.length-1]))}),e}),o.sort(function(t,e){return t.value-e.value});for(var c=0;c<o.length;c++){var u=o[c];if("w"===u.postfix&&u.value>=s||"x"===u.postfix&&u.value>=r){i=u;break}}!i&&o.length&&(i=o[o.length-1]),i&&(e.src=i.url,e.width&&e.height&&"w"==i.postfix&&(e.height=e.width/e.height*i.value,e.width=i.value))}e.$placeholder=n('<div class="fancybox-placeholder"></div>').hide().appendTo(e.$slide),!1!==e.opts.preload&&e.opts.width&&e.opts.height&&(e.opts.thumb||e.opts.$thumb)?(e.width=e.opts.width,e.height=e.opts.height,e.$ghost=n("<img />").one("load error",function(){a.isClosing||(n("<img/>")[0].src=e.src,a.revealImage(e,function(){a.setBigImage(e),a.firstRun&&e.index===a.currIndex&&a.preload()}))}).addClass("fancybox-image").appendTo(e.$placeholder).attr("src",e.opts.thumb||e.opts.$thumb.attr("src"))):a.setBigImage(e)},setBigImage:function(t){var e=this,i=n("<img />");t.$image=i.one("error",function(){e.setError(t)}).one("load",function(){clearTimeout(t.timouts),t.timouts=null,e.isClosing||(t.width=this.naturalWidth,t.height=this.naturalHeight,t.opts.image.srcset&&i.attr("sizes","100vw").attr("srcset",t.opts.image.srcset),e.afterLoad(t),t.$ghost&&(t.timouts=setTimeout(function(){t.$ghost.hide()},350)))}).addClass("fancybox-image").attr("src",t.src).appendTo(t.$placeholder),i[0].complete?i.trigger("load"):i[0].error?i.trigger("error"):t.timouts=setTimeout(function(){i[0].complete||t.hasError||e.showLoading(t)},150),t.opts.image.protect&&n('<div class="fancybox-spaceball"></div>').appendTo(t.$placeholder).on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0})},revealImage:function(t,e){var i=this;return e=e||n.noop,"image"!==t.type||t.hasError||!0===t.isRevealed?void e.apply(i):(t.isRevealed=!0,void(t.pos===i.currPos&&i.zoomInOut("In",t.opts.speed,e)||(t.$ghost&&!t.isLoaded&&i.updateSlide(t,!0),t.pos===i.currPos?n.fancybox.animate(t.$placeholder,{opacity:0},{opacity:1},300,e):t.$placeholder.show(),e.apply(i))))},setIframe:function(t){var e,o=this,r=t.opts.iframe,s=t.$slide;t.$content=n('<div class="fancybox-content"></div>').css(r.css).appendTo(s),e=n(r.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",n.fancybox.isTouch?"auto":r.scrolling).appendTo(t.$content),r.preload?(t.$content.addClass("fancybox-tmp"),o.showLoading(t),e.on("load.fb error.fb",function(e){this.isReady=1,t.$slide.trigger("refresh"),o.afterLoad(t)}),s.on("refresh.fb",function(){var n,o,s,a,l,c=t.$content;if(1===e[0].isReady){try{n=e.contents(),o=n.find("body")}catch(t){}o&&o.length&&(r.css.width===i||r.css.height===i)&&(s=e[0].contentWindow.document.documentElement.scrollWidth,a=Math.ceil(o.outerWidth(!0)+(c.width()-s)),l=Math.ceil(o.outerHeight(!0)),c.css({width:r.css.width===i?a+(c.outerWidth()-c.innerWidth()):r.css.width,height:r.css.height===i?l+(c.outerHeight()-c.innerHeight()):r.css.height})),c.removeClass("fancybox-tmp")}})):this.afterLoad(t),e.attr("src",t.src),t.opts.smallBtn&&t.$content.prepend(t.opts.closeTpl),s.one("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank")}catch(t){}n(this).empty(),t.isLoaded=!1})},setContent:function(t,e){var i=this;i.isClosing||(i.hideLoading(t),t.$slide.empty(),c(e)&&e.parent().length?(e.data("placeholder")&&e.parents(".fancybox-slide").trigger("onReset"),e.data({placeholder:n("<div></div>").hide().insertAfter(e)}).css("display","inline-block")):("string"===n.type(e)&&(e=n("<div>").append(e).contents(),3===e[0].nodeType&&(e=n("<div>").html(e))),t.opts.selector&&(e=n("<div>").html(e).find(t.opts.selector))),t.$slide.one("onReset",function(){var i=c(e)?e.data("placeholder"):0;i&&(e.hide().replaceAll(i),e.data("placeholder",null)),t.hasError||(n(this).empty(),t.isLoaded=!1)}),t.$content=n(e).appendTo(t.$slide),!0===t.opts.smallBtn&&t.$content.find(".fancybox-close-small").remove().end().eq(0).append(t.opts.closeTpl),this.afterLoad(t))},setError:function(t){t.hasError=!0,this.setContent(t,t.opts.errorTpl)},showLoading:function(t){var e=this;(t=t||e.current)&&!t.$spinner&&(t.$spinner=n(e.opts.spinnerTpl).appendTo(t.$slide))},hideLoading:function(t){var e=this;(t=t||e.current)&&t.$spinner&&(t.$spinner.remove(),delete t.$spinner)},afterMove:function(){var t=this,e=t.current,i={};e&&(e.$slide.siblings().trigger("onReset"),n.each(t.slides,function(e,n){n.pos>=t.currPos-1&&n.pos<=t.currPos+1?i[n.pos]=n:n&&n.$slide.remove()}),t.slides=i,t.trigger("afterMove"),e.isLoaded&&t.complete())},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),t.$ghost||e.updateSlide(t,!0),t.index===e.currIndex&&t.isMoved?e.complete():t.$ghost||e.revealImage(t))},complete:function(){var t=this,e=t.current;t.revealImage(e,function(){e.isComplete=!0,e.$slide.addClass("fancybox-slide--complete"),t.updateCursor(),t.trigger("onComplete"),e.opts.focus&&"image"!==e.type&&"iframe"!==e.type&&t.focus()})},preload:function(){var t,e,n=this;n.group.length<2||(t=n.slides[n.currPos+1],e=n.slides[n.currPos-1],t&&"image"===t.type&&n.loadSlide(t),e&&"image"===e.type&&n.loadSlide(e))},focus:function(){var t,e=this.current;t=e&&e.isComplete?e.$slide.find('button,:input,[tabindex],a:not(".disabled")').filter(":visible:first"):null,t&&t.length||(t=this.$refs.container),t.focus(),this.$refs.slider_wrap.scrollLeft(0),e&&e.$slide.scrollTop(0)},activate:function(){var t=this;n(".fancybox-container").each(function(){var e=n(this).data("FancyBox");e&&e.uid!==t.uid&&!e.isClosing&&e.trigger("onDeactivate")}),t.current&&(t.$refs.container.index()>0&&t.$refs.container.prependTo(e.body),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t){var e=this,i=e.current,o=i.opts.speed,r=n.proxy(function(){e.cleanUp(t)},this);return!e.isAnimating&&!e.isClosing&&(!1===e.trigger("beforeClose",t)?(n.fancybox.stop(e.$refs.slider),void u(function(){e.update(!0,!0,150)})):(e.isClosing=!0,i.timouts&&clearTimeout(i.timouts),!0!==t&&n.fancybox.stop(e.$refs.slider),e.$refs.container.removeClass("fancybox-container--active").addClass("fancybox-container--closing"),i.$slide.removeClass("fancybox-slide--complete").siblings().remove(),i.isMoved||i.$slide.css("overflow","visible"),e.removeEvents(),e.hideLoading(i),e.hideControls(),e.updateCursor(),e.$refs.bg.css("transition-duration",o+"ms"),this.$refs.container.removeClass("fancybox-container--ready"),void(!0===t?setTimeout(r,o):e.zoomInOut("Out",o,r)||n.fancybox.animate(e.$refs.container,null,{opacity:0},o,"easeInSine",r))))},cleanUp:function(t){var e,i=this;i.$refs.slider.children().trigger("onReset"),i.$refs.container.empty().remove(),i.trigger("afterClose",t),i.current=null,e=n.fancybox.getInstance(),e?e.activate():(n("html").removeClass("fancybox-enabled"),n("body").removeAttr("style"),s.scrollTop(i.scrollTop).scrollLeft(i.scrollLeft),n("#fancybox-noscroll").remove()),i.$lastFocus&&i.$lastFocus.focus()},trigger:function(t,i){var o,r=Array.prototype.slice.call(arguments,1),s=this,a=i&&i.opts?i:s.current;return a?r.unshift(a):a=s,r.unshift(s),n.isFunction(a.opts[t])&&(o=a.opts[t].apply(a,r)),!1===o?o:void("afterClose"===t?n(e).trigger(t+".fb",r):s.$refs.container.trigger(t+".fb",r))},toggleControls:function(t){this.isHiddenControls?this.updateControls(t):this.hideControls()},hideControls:function(){this.isHiddenControls=!0,this.$refs.container.removeClass("fancybox-show-controls"),this.$refs.container.removeClass("fancybox-show-caption")},updateControls:function(t){var e=this,i=e.$refs.container,o=e.$refs.caption,r=e.current,s=r.index,a=r.opts,l=a.caption;this.isHiddenControls&&!0!==t||(this.isHiddenControls=!1,i.addClass("fancybox-show-controls").toggleClass("fancybox-show-infobar",!!a.infobar&&e.group.length>1).toggleClass("fancybox-show-buttons",!!a.buttons).toggleClass("fancybox-is-modal",!!a.modal),n(".fancybox-button--left",i).toggleClass("fancybox-button--disabled",!a.loop&&s<=0),n(".fancybox-button--right",i).toggleClass("fancybox-button--disabled",!a.loop&&s>=e.group.length-1),n(".fancybox-button--play",i).toggle(!!(a.slideShow&&e.group.length>1)),n(".fancybox-button--close",i).toggle(!!a.closeBtn),n(".js-fancybox-count",i).html(e.group.length),n(".js-fancybox-index",i).html(s+1),r.$slide.trigger("refresh"),o&&o.empty(),l&&l.length?(o.html(l),this.$refs.container.addClass("fancybox-show-caption "),e.$caption=o):this.$refs.container.removeClass("fancybox-show-caption"))}}),n.fancybox={version:"3.0.47",defaults:r,getInstance:function(t){var e=n('.fancybox-container:not(".fancybox-container--closing"):first').data("FancyBox"),i=Array.prototype.slice.call(arguments,1);return e instanceof d&&("string"===n.type(t)?e[t].apply(e,i):"function"===n.type(t)&&t.apply(e,i),e)},open:function(t,e,n){return new d(t,e,n)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close())},isTouch:e.createTouch!==i&&/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),use3d:function(){var n=e.createElement("div");return t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<=11)}(),getTranslate:function(t){var e,n;return!(!t||!t.length)&&(e=t.get(0).getBoundingClientRect(),n=t.eq(0).css("transform"),n&&-1!==n.indexOf("matrix")?(n=n.split("(")[1],n=n.split(")")[0],n=n.split(",")):n=[],n.length?(n=n.length>10?[n[13],n[12],n[0],n[5]]:[n[5],n[4],n[0],n[3]],n=n.map(parseFloat)):n=[0,0,1,1],{top:n[0],left:n[1],scaleX:n[2],scaleY:n[3],opacity:parseFloat(t.css("opacity")),width:e.width,height:e.height})},setTranslate:function(t,e){var n="",o={};if(t&&e)return e.left===i&&e.top===i||(n=(e.left===i?t.position().top:e.left)+"px, "+(e.top===i?t.position().top:e.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),e.scaleX!==i&&e.scaleY!==i&&(n=(n.length?n+" ":"")+"scale("+e.scaleX+", "+e.scaleY+")"),n.length&&(o.transform=n),e.opacity!==i&&(o.opacity=e.opacity),e.width!==i&&(o.width=e.width),e.height!==i&&(o.height=e.height),t.css(o)},easing:{easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}},stop:function(t){t.removeData("animateID")},animate:function(t,e,o,r,s,a){var l,c,h,d=this,f=null,p=0,m=function(){o.scaleX!==i&&o.scaleY!==i&&e&&e.width!==i&&e.height!==i&&(o.width=e.width*o.scaleX,o.height=e.height*o.scaleY,o.scaleX=1,o.scaleY=1),d.setTranslate(t,o),a()},g=function(n){if(l=[],c=0,t.length&&t.data("animateID")===h){if(n=n||Date.now(),f&&(c=n-f),f=n,(p+=c)>=r)return void m();for(var a in o)o.hasOwnProperty(a)&&e[a]!==i&&(e[a]==o[a]?l[a]=o[a]:l[a]=d.easing[s](p,e[a],o[a]-e[a],r));d.setTranslate(t,l),u(g)}};d.animateID=h=d.animateID===i?1:d.animateID+1,t.data("animateID",h),a===i&&"function"==n.type(s)&&(a=s,s=i),s||(s="easeOutCubic"),a=a||n.noop,e?this.setTranslate(t,e):e=this.getTranslate(t),r?(t.show(),u(g)):m()}},n.fn.fancybox=function(t){return this.off("click.fb-start").on("click.fb-start",{items:this,options:t||{}},o),this},n(e).on("click.fb-start","[data-fancybox]",o)}(window,document,window.jQuery),function(t){"use strict";var e=function(e,n,i){if(e)return i=i||"","object"===t.type(i)&&(i=t.param(i,!0)),t.each(n,function(t,n){e=e.replace("$"+t,n||"")}),i.length&&(e+=(e.indexOf("?")>0?"&":"?")+i),e},n={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},metacafe:{matcher:/metacafe.com\/watch\/(\d+)\/(.*)?/,type:"iframe",url:"//www.metacafe.com/embed/$1/?ap=1"},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"iframe",url:"//www.dailymotion.com/embed/video/$1"},vine:{matcher:/vine.co\/v\/([a-zA-Z0-9\?\=\-]+)/,type:"iframe",url:"//vine.co/v/$1/embed/simple"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},google_maps:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12])+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}}};t(document).on("onInit.fb",function(i,o){t.each(o.group,function(i,o){var r,s,a,l,c,u,h=o.src||"",d=!1;o.type||(t.each(n,function(n,i){if(s=h.match(i.matcher),c={},u=n,s){if(d=i.type,i.paramPlace&&s[i.paramPlace]){l=s[i.paramPlace],"?"==l[0]&&(l=l.substring(1)),l=l.split("&");for(var f=0;f<l.length;++f){var p=l[f].split("=",2);2==p.length&&(c[p[0]]=decodeURIComponent(p[1].replace(/\+/g," ")))}}return a=t.extend(!0,{},i.params,o.opts[n],c),h="function"===t.type(i.url)?i.url.call(this,s,a,o):e(i.url,s,a),r="function"===t.type(i.thumb)?i.thumb.call(this,s,a,o):e(i.thumb,s),"vimeo"===u&&(h=h.replace("&%23","#")),!1}}),d?(o.src=h,o.type=d,o.opts.thumb||o.opts.$thumb&&o.opts.$thumb.length||(o.opts.thumb=r),"iframe"===d&&(t.extend(!0,o.opts,{iframe:{preload:!1,scrolling:"no"},smallBtn:!1,closeBtn:!0,fullScreen:!1,slideShow:!1}),o.opts.slideClass+=" fancybox-slide--video")):o.type="iframe")})})}(window.jQuery),function(t,e,n){"use strict";var i=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),o=function(e){var n=[];e=e.originalEvent||e||t.e,e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var i in e)e[i].pageX?n.push({x:e[i].pageX,y:e[i].pageY}):e[i].clientX&&n.push({x:e[i].clientX,y:e[i].clientY});return n},r=function(t,e,n){return e&&t?"x"===n?t.x-e.x:"y"===n?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},s=function(t){return t.is("a")||t.is("button")||t.is("input")||t.is("select")||t.is("textarea")||n.isFunction(t.get(0).onclick)},a=function(e){var n=t.getComputedStyle(e)["overflow-y"],i=t.getComputedStyle(e)["overflow-x"],o=("scroll"===n||"auto"===n)&&e.scrollHeight>e.clientHeight,r=("scroll"===i||"auto"===i)&&e.scrollWidth>e.clientWidth;return o||r},l=function(t){for(var e=!1;!(e=a(t.get(0)))&&(t=t.parent(),t.length&&!t.hasClass("fancybox-slider")&&!t.is("body")););return e},c=function(t){var e=this;e.instance=t,e.$wrap=t.$refs.slider_wrap,e.$slider=t.$refs.slider,e.$container=t.$refs.container,e.destroy(),e.$wrap.on("touchstart.fb mousedown.fb",n.proxy(e,"ontouchstart"))};c.prototype.destroy=function(){this.$wrap.off("touchstart.fb mousedown.fb touchmove.fb mousemove.fb touchend.fb touchcancel.fb mouseup.fb mouseleave.fb")},c.prototype.ontouchstart=function(e){var i=this,a=n(e.target),c=i.instance,u=c.current,h=u.$content||u.$placeholder;return i.startPoints=o(e),i.$target=a,i.$content=h,i.canvasWidth=Math.round(u.$slide[0].clientWidth),i.canvasHeight=Math.round(u.$slide[0].clientHeight),i.startEvent=e,e.originalEvent.clientX>i.canvasWidth+u.$slide.offset().left||(s(a)||s(a.parent())||l(a)?void 0:u.opts.touch?void(e.originalEvent&&2==e.originalEvent.button||(e.stopPropagation(),e.preventDefault(),!u||i.instance.isAnimating||i.instance.isClosing||!i.startPoints||i.startPoints.length>1&&!u.isMoved||(i.$wrap.off("touchmove.fb mousemove.fb",n.proxy(i,"ontouchmove")),i.$wrap.off("touchend.fb touchcancel.fb mouseup.fb mouseleave.fb",n.proxy(i,"ontouchend")),i.$wrap.on("touchend.fb touchcancel.fb mouseup.fb mouseleave.fb",n.proxy(i,"ontouchend")),i.$wrap.on("touchmove.fb mousemove.fb",n.proxy(i,"ontouchmove")),i.startTime=(new Date).getTime(),i.distanceX=i.distanceY=i.distance=0,i.canTap=!1,i.isPanning=!1,i.isSwiping=!1,i.isZooming=!1,i.sliderStartPos=n.fancybox.getTranslate(i.$slider),i.contentStartPos=n.fancybox.getTranslate(i.$content),i.contentLastPos=null,1!==i.startPoints.length||i.isZooming||(i.canTap=u.isMoved,"image"===u.type&&(i.contentStartPos.width>i.canvasWidth+1||i.contentStartPos.height>i.canvasHeight+1)?(n.fancybox.stop(i.$content),i.isPanning=!0):(n.fancybox.stop(i.$slider),i.isSwiping=!0),i.$container.addClass("fancybox-controls--isGrabbing")),2===i.startPoints.length&&u.isMoved&&!u.hasError&&"image"===u.type&&(u.isLoaded||u.$ghost)&&(i.isZooming=!0,i.isSwiping=!1,i.isPanning=!1,n.fancybox.stop(i.$content),i.centerPointStartX=.5*(i.startPoints[0].x+i.startPoints[1].x)-n(t).scrollLeft(),i.centerPointStartY=.5*(i.startPoints[0].y+i.startPoints[1].y)-n(t).scrollTop(),i.percentageOfImageAtPinchPointX=(i.centerPointStartX-i.contentStartPos.left)/i.contentStartPos.width,i.percentageOfImageAtPinchPointY=(i.centerPointStartY-i.contentStartPos.top)/i.contentStartPos.height,i.startDistanceBetweenFingers=r(i.startPoints[0],i.startPoints[1]))))):(i.endPoints=i.startPoints,i.ontap()))},c.prototype.ontouchmove=function(t){var e=this;t.preventDefault(),e.newPoints=o(t),e.newPoints&&e.newPoints.length&&(e.distanceX=r(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=r(e.newPoints[0],e.startPoints[0],"y"),e.distance=r(e.newPoints[0],e.startPoints[0]),e.distance>0&&(e.isSwiping?e.onSwipe():e.isPanning?e.onPan():e.isZooming&&e.onZoom()))},c.prototype.onSwipe=function(){var e,o=this,r=o.isSwiping,s=o.sliderStartPos.left;!0===r?Math.abs(o.distance)>10&&(o.instance.group.length<2?o.isSwiping="y":!o.instance.current.isMoved||!1===o.instance.opts.touch.vertical||"auto"===o.instance.opts.touch.vertical&&n(t).width()>800?o.isSwiping="x":(e=Math.abs(180*Math.atan2(o.distanceY,o.distanceX)/Math.PI),o.isSwiping=e>45&&e<135?"y":"x"),o.canTap=!1,o.instance.current.isMoved=!1,o.startPoints=o.newPoints):("x"==r&&(!o.instance.current.opts.loop&&0===o.instance.current.index&&o.distanceX>0?s+=Math.pow(o.distanceX,.8):!o.instance.current.opts.loop&&o.instance.current.index===o.instance.group.length-1&&o.distanceX<0?s-=Math.pow(-o.distanceX,.8):s+=o.distanceX),o.sliderLastPos={top:"x"==r?0:o.sliderStartPos.top+o.distanceY,left:s},i(function(){n.fancybox.setTranslate(o.$slider,o.sliderLastPos)}))},c.prototype.onPan=function(){var t,e,o,r=this;r.canTap=!1,t=r.contentStartPos.width>r.canvasWidth?r.contentStartPos.left+r.distanceX:r.contentStartPos.left,e=r.contentStartPos.top+r.distanceY,o=r.limitMovement(t,e,r.contentStartPos.width,r.contentStartPos.height),o.scaleX=r.contentStartPos.scaleX,o.scaleY=r.contentStartPos.scaleY,r.contentLastPos=o,i(function(){n.fancybox.setTranslate(r.$content,r.contentLastPos)})},c.prototype.limitMovement=function(t,e,n,i){var o,r,s,a,l=this,c=l.canvasWidth,u=l.canvasHeight,h=l.contentStartPos.left,d=l.contentStartPos.top,f=l.distanceX,p=l.distanceY;return o=Math.max(0,.5*c-.5*n),r=Math.max(0,.5*u-.5*i),s=Math.min(c-n,.5*c-.5*n),a=Math.min(u-i,.5*u-.5*i),n>c&&(f>0&&t>o&&(t=o-1+Math.pow(-o+h+f,.8)||0),f<0&&t<s&&(t=s+1-Math.pow(s-h-f,.8)||0)),i>u&&(p>0&&e>r&&(e=r-1+Math.pow(-r+d+p,.8)||0),p<0&&e<a&&(e=a+1-Math.pow(a-d-p,.8)||0)),{top:e,left:t}},c.prototype.limitPosition=function(t,e,n,i){var o=this,r=o.canvasWidth,s=o.canvasHeight;return n>r?(t=t>0?0:t,t=t<r-n?r-n:t):t=Math.max(0,r/2-n/2),i>s?(e=e>0?0:e,e=e<s-i?s-i:e):e=Math.max(0,s/2-i/2),{top:e,left:t}},c.prototype.onZoom=function(){var e=this,o=e.contentStartPos.width,s=e.contentStartPos.height,a=e.contentStartPos.left,l=e.contentStartPos.top,c=r(e.newPoints[0],e.newPoints[1]),u=c/e.startDistanceBetweenFingers,h=Math.floor(o*u),d=Math.floor(s*u),f=(o-h)*e.percentageOfImageAtPinchPointX,p=(s-d)*e.percentageOfImageAtPinchPointY,m=(e.newPoints[0].x+e.newPoints[1].x)/2-n(t).scrollLeft(),g=(e.newPoints[0].y+e.newPoints[1].y)/2-n(t).scrollTop(),v=m-e.centerPointStartX,y=g-e.centerPointStartY,b=a+(f+v),w=l+(p+y),x={top:w,left:b,scaleX:e.contentStartPos.scaleX*u,scaleY:e.contentStartPos.scaleY*u};e.canTap=!1,e.newWidth=h,e.newHeight=d,e.contentLastPos=x,i(function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)})},c.prototype.ontouchend=function(t){var e=this,i=e.instance.current,r=Math.max((new Date).getTime()-e.startTime,1),s=e.isSwiping,a=e.isPanning,l=e.isZooming;return e.endPoints=o(t),e.$container.removeClass("fancybox-controls--isGrabbing"),e.$wrap.off("touchmove.fb mousemove.fb",n.proxy(this,"ontouchmove")),e.$wrap.off("touchend.fb touchcancel.fb mouseup.fb mouseleave.fb",n.proxy(this,"ontouchend")),e.isSwiping=!1,e.isPanning=!1,e.isZooming=!1,e.canTap?e.ontap():(e.velocityX=e.distanceX/r*.5,e.velocityY=e.distanceY/r*.5,e.speed=i.opts.speed||330,e.speedX=Math.max(.75*e.speed,Math.min(1.5*e.speed,1/Math.abs(e.velocityX)*e.speed)),e.speedY=Math.max(.75*e.speed,Math.min(1.5*e.speed,1/Math.abs(e.velocityY)*e.speed)),void(a?e.endPanning():l?e.endZooming():e.endSwiping(s)))},c.prototype.endSwiping=function(t){var e=this;"y"==t&&Math.abs(e.distanceY)>50?(n.fancybox.animate(e.$slider,null,{top:e.sliderStartPos.top+e.distanceY+150*e.velocityY,left:e.sliderStartPos.left,opacity:0},e.speedY),e.instance.close(!0)):"x"==t&&e.distanceX>50?e.instance.previous(e.speedX):"x"==t&&e.distanceX<-50?e.instance.next(e.speedX):e.instance.update(!1,!0,150)},c.prototype.endPanning=function(){var t,e,i,o=this;o.contentLastPos&&(t=o.contentLastPos.left+o.velocityX*o.speed*2,e=o.contentLastPos.top+o.velocityY*o.speed*2,i=o.limitPosition(t,e,o.contentStartPos.width,o.contentStartPos.height),i.width=o.contentStartPos.width,i.height=o.contentStartPos.height,n.fancybox.animate(o.$content,null,i,o.speed,"easeOutSine"))},c.prototype.endZooming=function(){var t,e,i,o,r=this,s=r.instance.current,a=r.newWidth,l=r.newHeight;r.contentLastPos&&(t=r.contentLastPos.left,e=r.contentLastPos.top,o={top:e,left:t,width:a,height:l,scaleX:1,scaleY:1},n.fancybox.setTranslate(r.$content,o),a<r.canvasWidth&&l<r.canvasHeight?r.instance.scaleToFit(150):a>s.width||l>s.height?r.instance.scaleToActual(r.centerPointStartX,r.centerPointStartY,150):(i=r.limitPosition(t,e,a,l),n.fancybox.animate(r.$content,null,i,r.speed,"easeOutSine")))},
c.prototype.ontap=function(){var t=this,e=t.instance,i=e.current,o=t.endPoints[0].x,r=t.endPoints[0].y;if(o-=t.$wrap.offset().left,r-=t.$wrap.offset().top,e.SlideShow&&e.SlideShow.isActive&&e.SlideShow.stop(),!n.fancybox.isTouch)return i.opts.closeClickOutside&&t.$target.is(".fancybox-slide")?void e.close(t.startEvent):void("image"==i.type&&i.isMoved&&(e.canPan()?e.scaleToFit():e.isScaledDown()?e.scaleToActual(o,r):e.group.length<2&&e.close(t.startEvent)));if(t.tapped){if(clearTimeout(t.tapped),t.tapped=null,Math.abs(o-t.x)>50||Math.abs(r-t.y)>50||!i.isMoved)return this;"image"==i.type&&(i.isLoaded||i.$ghost)&&(e.canPan()?e.scaleToFit():e.isScaledDown()&&e.scaleToActual(o,r))}else t.x=o,t.y=r,t.tapped=setTimeout(function(){t.tapped=null,e.toggleControls(!0)},300);return this},n(e).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new c(e))}),n(e).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,window.jQuery),function(t,e){"use strict";var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{timer:null,isActive:!1,$button:null,speed:3e3,init:function(){var t=this;t.$button=e('<button data-fancybox-play class="fancybox-button fancybox-button--play" title="Slideshow (P)"></button>').appendTo(t.instance.$refs.buttons),t.instance.$refs.container.on("click","[data-fancybox-play]",function(){t.toggle()})},set:function(){var t=this;t.instance&&t.instance.current&&(t.instance.current.opts.loop||t.instance.currIndex<t.instance.group.length-1)?t.timer=setTimeout(function(){t.instance.next()},t.instance.current.opts.slideShow.speed||t.speed):t.stop()},clear:function(){var t=this;clearTimeout(t.timer),t.timer=null},start:function(){var t=this;t.stop(),t.instance&&t.instance.current&&(t.instance.current.opts.loop||t.instance.currIndex<t.instance.group.length-1)&&(t.instance.$refs.container.on({"beforeLoad.fb.player":e.proxy(t,"clear"),"onComplete.fb.player":e.proxy(t,"set")}),t.isActive=!0,t.instance.current.isComplete&&t.set(),t.instance.$refs.container.trigger("onPlayStart"),t.$button.addClass("fancybox-button--pause"))},stop:function(){var t=this;t.clear(),t.instance.$refs.container.trigger("onPlayEnd").off(".player"),t.$button.removeClass("fancybox-button--pause"),t.isActive=!1},toggle:function(){var t=this;t.isActive?t.stop():t.start()}}),e(t).on("onInit.fb",function(t,e){e&&e.group.length>1&&e.opts.slideShow&&!e.SlideShow&&(e.SlideShow=new n(e))}),e(t).on("beforeClose.fb onDeactivate.fb",function(t,e){e&&e.SlideShow&&e.SlideShow.stop()})}(document,window.jQuery),function(t,e){"use strict";var n=function(){var e,n,i,o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r={};for(n=0;n<o.length;n++)if((e=o[n])&&e[1]in t){for(i=0;i<e.length;i++)r[o[0][i]]=e[i];return r}return!1}();if(n){var i={request:function(e){e=e||t.documentElement,e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[n.exitFullscreen]()},toggle:function(t){this.isFullscreen()?this.exit():this.request(t)},isFullscreen:function(){return Boolean(t[n.fullscreenElement])},enabled:function(){return Boolean(t[n.fullscreenEnabled])}};e(t).on({"onInit.fb":function(t,n){var o;n&&n.opts.fullScreen&&!n.FullScreen&&(o=n.$refs.container,n.$refs.button_fs=e('<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="Full screen (F)"></button>').appendTo(n.$refs.buttons),o.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),i.toggle(o[0])}),!0===n.opts.fullScreen.requestOnStart&&i.request(o[0]))},"beforeMove.fb":function(t,e){e&&e.$refs.button_fs&&e.$refs.button_fs.toggle(!!e.current.opts.fullScreen)},"beforeClose.fb":function(){i.exit()}}),e(t).on(n.fullscreenchange,function(){var t=e.fancybox.getInstance(),n=t?t.current.$placeholder:null;n&&(n.css("transition","none"),t.isAnimating=!1,t.update(!0,!0,0))})}}(document,window.jQuery),function(t,e){"use strict";var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,init:function(){var t=this;t.$button=e('<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="Thumbnails (G)"></button>').appendTo(this.instance.$refs.buttons).on("touchend click",function(e){e.stopPropagation(),e.preventDefault(),t.toggle()})},create:function(){var t,n,i=this.instance;this.$grid=e('<div class="fancybox-thumbs"></div>').appendTo(i.$refs.container),t="<ul>",e.each(i.group,function(e,i){n=i.opts.thumb||(i.opts.$thumb?i.opts.$thumb.attr("src"):null),n||"image"!==i.type||(n=i.src),n&&n.length&&(t+='<li data-index="'+e+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+n+'" /></li>')}),t+="</ul>",this.$list=e(t).appendTo(this.$grid).on("click touchstart","li",function(){i.jumpTo(e(this).data("index"))}),this.$list.find("img").hide().one("load",function(){var t,n,i,o,r=e(this).parent().removeClass("fancybox-thumbs-loading"),s=r.outerWidth(),a=r.outerHeight();t=this.naturalWidth||this.width,n=this.naturalHeight||this.height,i=t/s,o=n/a,i>=1&&o>=1&&(i>o?(t/=o,n=a):(t=s,n/=i)),e(this).css({width:Math.floor(t),height:Math.floor(n),"margin-top":Math.min(0,Math.floor(.3*a-.3*n)),"margin-left":Math.min(0,Math.floor(.5*s-.5*t))}).show()}).each(function(){this.src=e(this).data("src")})},focus:function(){this.instance.current&&this.$list.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+this.instance.current.index+'"]').addClass("fancybox-thumbs-active").focus()},close:function(){this.$grid.hide()},update:function(){this.instance.$refs.container.toggleClass("fancybox-container--thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.$grid.show(),this.focus()):this.$grid&&this.$grid.hide(),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible?this.hide():this.show()}}),e(t).on("onInit.fb",function(t,e){var i=e.group[0],o=e.group[1];e.opts.thumbs&&!e.Thumbs&&e.group.length>1&&("image"==i.type||i.opts.thumb||i.opts.$thumb)&&("image"==o.type||o.opts.thumb||o.opts.$thumb)&&(e.Thumbs=new n(e))}),e(t).on("beforeMove.fb",function(t,e,n){var i=e&&e.Thumbs;i&&(n.modal?(i.$button.hide(),i.hide()):(!0===e.opts.thumbs.showOnStart&&e.firstRun&&i.show(),i.$button.show(),i.isVisible&&i.focus()))}),e(t).on("beforeClose.fb",function(t,e){e&&e.Thumbs&&(e.Thumbs.isVisible&&!1!==e.opts.thumbs.hideOnClosing&&e.Thumbs.close(),e.Thumbs=null)})}(document,window.jQuery),function(t,e,n){"use strict";function i(){var t=e.location.hash.substr(1),n=t.split("-"),i=n.length>1&&/^\+?\d+$/.test(n[n.length-1])?parseInt(n.pop(-1),10)||1:1,o=n.join("-");return i<1&&(i=1),{hash:t,index:i,gallery:o}}function o(t){var e;""!==t.gallery&&(e=n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1),e.length?e.trigger("click"):n("#"+n.escapeSelector(t.gallery)).trigger("click"))}function r(t){var e;return!!t&&(e=t.current?t.current.opts:t.opts,e.$orig?e.$orig.data("fancybox"):e.hash||"")}n.escapeSelector||(n.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t})});var s=null;n(function(){setTimeout(function(){!1!==n.fancybox.defaults.hash&&(n(e).on("hashchange.fb",function(){var t=i();n.fancybox.getInstance()?s&&s!==t.gallery+"-"+t.index&&(s=null,n.fancybox.close()):""!==t.gallery&&o(t)}),n(t).on({"onInit.fb":function(t,e){var n=i(),o=r(e);o&&n.gallery&&o==n.gallery&&(e.currIndex=n.index-1)},"beforeMove.fb":function(n,i,o){var a=r(i);a&&""!==a&&(e.location.hash.indexOf(a)<0&&(i.opts.origHash=e.location.hash),s=a+(i.group.length>1?"-"+(o.index+1):""),"pushState"in history?history.pushState("",t.title,e.location.pathname+e.location.search+"#"+s):e.location.hash=s)},"beforeClose.fb":function(n,i,o){var a=r(i),l=i&&i.opts.origHash?i.opts.origHash:"";a&&""!==a&&("pushState"in history?history.pushState("",t.title,e.location.pathname+e.location.search+l):e.location.hash=l),s=null}}),o(i()))},50)})}(document,window,window.jQuery)},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={editorText:null,editorLink:null,editorImage:null,imageUploader:null,init:function(){$('[data-editable="link"]').off("click",this.linkEditor),$('[data-editable="image"]').off("click",this.imageEditor),this.textEditor(),$('[data-editable="link"]').on("click",this.linkEditor),$('[data-editable="image"]').on("click",this.imageEditor)},textEditor:function(){this.editorText=new MediumEditor('[data-editable="text"]',{toolbar:{buttons:["bold","italic","underline","anchor"]}})},linkEditor:function(t){var e=$(t.target),n=$("#linkeditor"),i=$.trim(e.html()),o=e.attr("href");return $('[data-link="text"]',n).val(i),$('[data-link="url"]',n).val(o),$.fancybox.open({src:"#linkeditor",type:"inline",opts:{afterClose:function(){$('[data-link="text"]',n).val(""),$('[data-link="url"]',n).val("")},onComplete:function(){$(".modal-btn-cancel",n).off("click"),$(".modal-btn-ok",n).off("click"),$(".modal-btn-cancel",n).on("click",function(t){$.fancybox.close()}),$(".modal-btn-ok",n).on("click",function(t){var i=$('[data-link="text"]',n).val(),o=$('[data-link="url"]',n).val();e.html(i),e.attr("href",o),$.fancybox.close()})}}}),!1},imageEditor:function(t){o.imageUploader&&(o.imageUploader.slim("destroy"),o.imageUploader=null);var e=$(t.target),n=$("#imageeditor"),i=e.attr("src"),r=e.attr("alt"),s=e.width(),a=e.height(),l="";return e.parent().is("a")&&(l=e.parent("a").attr("href")),$('[data-image="url"]',n).val(l),$('[data-image="alt"]',n).val(r),$('[data-image="width"]',n).val(s),$('[data-image="height"]',n).val(a),$('[data-image="src"]',n).attr("src",i),$.fancybox.open({src:"#imageeditor",type:"inline",opts:{afterClose:function(){$('[data-image="url"]',n).val(""),$('[data-image="alt"]',n).val(""),$('[data-image="width"]',n).val(""),$('[data-image="height"]',n).val(""),$('[data-image="src"]',n).attr("src","")},onComplete:function(){$(".modal-btn-cancel",n).off("click"),$(".modal-btn-ok",n).off("click"),o.imageUploader=$("#modal-image-uploader").slim({fetcher:"server/fetch.php",service:"server/async.php",push:!0,instantEdit:!0,didUpload:function(){var t=o.imageUploader.slim("data")[0],e=config.uploads+"/"+t.server.file,i=t.output.width,r=t.output.height;$('[data-image="width"]',n).val(i),$('[data-image="height"]',n).val(r),$('[data-image="src"]',n).attr("src",e)}}),$(".modal-btn-cancel",n).on("click",function(t){$.fancybox.close()}),$(".modal-btn-ok",n).on("click",function(t){var i=$('[data-image="url"]',n).val(),o=$('[data-image="alt"]',n).val(),r=$('[data-image="width"]',n).val(),s=$('[data-image="height"]',n).val(),a=$('[data-image="src"]',n).attr("src");e.attr("src",a),e.attr("alt",o),e.attr("width",r),e.attr("height",s),e.unwrap("a"),i&&e.wrap('<a href="'+i+'"></a>'),$.fancybox.close()})}}}),!1}};i.on("update_template",function(){o.init()}),t.exports=o},function(t,e,n){"use strict";function i(){this.events={}}i.prototype.on=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},i.prototype.emit=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.events[t]&&this.events[t].forEach(function(t){t(e)})},t.exports=new i},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={confirm:function(t,e){swal({title:t,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",closeOnConfirm:!1},function(t){t&&(swal("Deleted!","The module has been deleted","success"),e())})},current:null,imageUploader:null,controls:'<div class="module-controls-container" style="top: 10px">\x3c!-- Controls --\x3e<div class="btn-module btn-module-sort"><i class="icon-arrows"></i></div><div class="btn-module btn-module-duplicate"><i class="icon-files-o"></i></div><div class="btn-module btn-module-code" data-action="codeEditor"><i class="icon-code"></i></div><div class="btn-module btn-module-delete"><i class="icon-close"></i></div>\x3c!-- /Controls --\x3e</div>',codeControls:'<div class="module-code-controls"><div class="btn-code-control btn-code-update"><i class="icon-check"></i></div><div class="btn-code-control btn-code-cancel"><i class="icon-close"></i></div></div>',options:{color:[],bgcolor:[],bg:[]},init:function(){var t=this;$(".module-container",'[data-type="editor"]').off("mouseenter mouseleave"),$(".module-container",'[data-type="editor"]').on("mouseenter",function(e){$(this).children("table").append(t.controls),t.eventsInit(),$('[data-type="editor"]').sortable("refresh")}),$(".module-container",'[data-type="editor"]').on("mouseleave",function(t){$(".module-controls-container",this).remove()}),$(".module-container").on("click",function(e){var n=this;t.current!==n&&(t.current=n,i.emit("module_change"))})},rgb2hex:function(t){function e(t){return("0"+parseInt(t).toString(16)).slice(-2)}return/^#[0-9A-F]{6}$/i.test(t)?t:(t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+e(t[1])+e(t[2])+e(t[3]))},eventsInit:function(){this.controlsDuplicate(),this.controlsCode(),this.controlsDelete()},controlsDuplicate:function(){$(".btn-module-duplicate",".module-controls-container").off("click"),$(".btn-module-duplicate",".module-controls-container").on("click",function(t){var e=$(this).closest(".module-container");e.clone().insertAfter(e).find(".module-controls-container").remove(),i.emit("update_template")})},controlsCode:function(){var t=this;$(".btn-module-code",".module-controls-container").on("click",function(e){var n=$(this).closest(".module-container"),o=$(n).clone();$(".mce-content-body",o).each(function(){var t=$(this).attr("style").replace(/"/g,"'");$(this).attr("style",t)}),o.find(".module-controls-container").remove(),o.find(".mce-content-body").removeClass("mce-content-body");var r=$(o).html();r=r.replace(/<tbody>/g,"").replace(/<\/tbody>/g,""),r=r.replace(/(v:)+([\w])|(xmlns)+(:v)/gi,function(t){return t.replace(/:/g,"_")}),r=$.htmlClean(r,{format:!0,allowEmpty:[["td"],["link"],["meta"],["table"],["tr"],["p"],["b"],["i"],["font"],["div"],["a"],["li"],["ul"]],formatIndent:1,allowComments:!0,allowedAttributes:[["id"],["map"],["area"],["class"],["border"],["style"],["width"],["height"],["bgcolor"],["shape"],["coords"],["cellspacing"],["cellpadding"],["mso-table-lspace"],["mso-table-rspace"],["align"],["bgcolor"],["valign"],["name"],["data-module"],["data-color"],["data-size"],["data-editable"],["contenteditable"],["href"],["data-min"],["data-max"],["data-crop"],["data-link-style"],["data-link-size"],["data-link-color"],["data-bg"],["data-bgcolor"],["data-border-top-color"],["data-border-bottom-color"],["data-border-left-color"],["data-border-right-color"],["background"],["itemscope"],["itemtype"],["itemprop"],["datetime"],["fill",["v_rect"]],["stroke",["v_rect"]],["type",["v_fill"]],["src",["v_fill"]],["color",["v_fill"]],["inset",["v_textbox"]],["xmlns_v",["v_rect"]]]}),r=r.replace(/(v_)+([\w])|(xmlns)+(_v)/gi,function(t){return t.replace(/_/g,":")}),$("#code").remove(),$(n).after(t.getCodeEditorHTML(r));var s=CodeMirror.fromTextArea(document.getElementById("code"),{mode:"xml",htmlMode:!0,lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0});s.setSize("100%","100%"),s.setOption("theme","tomorrow-night-bright"),$(".btn-code-update").on("click",function(t){var e=s.getValue();n.html(e),$(".module-code-container",n.parent()).remove(),i.emit("update_template")}),$(".btn-code-cancel").on("click",function(t){$(".module-code-container",n.parent()).remove()})})},controlsDelete:function(){var t=this;$(".btn-module-delete",".module-controls-container").off("click"),$(".btn-module-delete",".module-controls-container").on("click",function(e){var n=$(this).closest(".module-container");t.confirm("Remove this module?",function(){n.remove(),i.emit("update_template")})})},optionActions:function(){var t=this;$('[data-control="colorpicker"]').minicolors({position:"bottom right"}),$('[data-control="colorpicker"]').on("change",function(e){var n=$(this).data("target-option"),o=$(this).data("target-attr"),r=$(this).val();$("[data-"+o+'="'+n+'"]',t.current).css(o,r),$("[data-"+o+'="'+n+'"]',t.current).attr(o,r),i.emit("update_template")}),$('[data-control="background-image"]').on("click",function(t){o.imageUploader&&(o.imageUploader.slim("destroy"),o.imageUploader=null);var e=$(t.target),n=$("#bgeditor"),r=$(this).data("bg-image"),s=$(this).data("target-option");$('[data-image="src"]',n).attr("src",r),$.fancybox.open({src:"#bgeditor",type:"inline",opts:{afterClose:function(){$('[data-image="src"]',n).attr("src","")},onComplete:function(){$(".modal-btn-cancel",n).off("click"),$(".modal-btn-ok",n).off("click"),o.imageUploader=$("#modal-bg-uploader").slim({fetcher:"server/fetch.php",service:"server/async.php",push:!0,instantEdit:!0,didUpload:function(){var t=o.imageUploader.slim("data")[0],e=config.uploads+"/"+t.server.file;$('[data-image="src"]',n).attr("src",e)}}),$(".modal-btn-cancel",n).on("click",function(t){$.fancybox.close()}),$(".modal-btn-ok",n).on("click",function(t){var i=$('[data-image="src"]',n).attr("src");$('[data-bg-option-label="'+s+'"]',e.parent()).html(i),$('[data-bg="'+s+'"]',o.current).css("background-image","url('"+i+"')"),$.fancybox.close()})}}}),i.emit("update_template")}),$('[data-control="background-appearance"]').on("change",function(e){var n=$(this).data("target-option"),i=$(this).val();switch($('[data-bg="'+n+'"]',t.current).css("background-position",""),$('[data-bg="'+n+'"]',t.current).css("background-size",""),$('[data-bg="'+n+'"]',t.current).css("background-attachment",""),i){case"original":$('[data-bg="'+n+'"]',t.current).css("background-position","center center");break;case"100%":$('[data-bg="'+n+'"]',t.current).css("background-size","100%");break;case"fluid":$('[data-bg="'+n+'"]',t.current).css("background-position","center center"),$('[data-bg="'+n+'"]',t.current).css("background-size","cover");break;case"fixed":$('[data-bg="'+n+'"]',t.current).css("background-position","center center"),$('[data-bg="'+n+'"]',t.current).css("background-size","cover"),$('[data-bg="'+n+'"]',t.current).css("background-attachment","fixed")}})},getCodeEditorHTML:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<div class="module-code-container">'+this.codeControls+'<textarea id="code" name="code">'+t+"</textarea></div>"},getOptions:function(){var t=this;t.options={color:[],bgcolor:[],bg:[]};var e=[],n=[],i=[];$("[data-color]",t.current).each(function(){var t=$(this).data("color");e.push(t)}),$("[data-bgcolor]",t.current).each(function(){var t=$(this).data("bgcolor");n.push(t)}),$("[data-bg]",t.current).each(function(){var t=$(this).data("bg");i.push(t)}),t.options.color=e.filter(function(t,e,n){return n.indexOf(t)===e}),t.options.bgcolor=n.filter(function(t,e,n){return n.indexOf(t)===e}),t.options.bg=i.filter(function(t,e,n){return n.indexOf(t)===e})},getOptionsHTML:function(){var t=this,e="";return t.options.color.length>0&&(e+='<div class="styles-group">',e+='    <div class="group-header">Font colors</div>',e+='    <div class="group-styles-inner">',t.options.color.forEach(function(n){var i=$('[data-color="'+n+'"]',t.current).css("color"),o=t.rgb2hex(i);e+='        <div class="style-item">',e+='            <div class="style-label">'+n+"</div>",e+='            <div class="style-control"><input type="text" value="'+o+'" data-control="colorpicker" data-target-option="'+n+'" data-target-attr="color"></div>',e+="        </div>"}),e+="    </div>",e+="</div>"),t.options.bgcolor.length>0&&(e+='<div class="styles-group">',e+='    <div class="group-header">Background colors</div>',e+='    <div class="group-styles-inner">',t.options.bgcolor.forEach(function(n){var i=$('[data-bgcolor="'+n+'"]',t.current).css("background-color"),o=t.rgb2hex(i);e+='        <div class="style-item">',e+='            <div class="style-label">'+n+"</div>",e+='            <div class="style-control"><input type="text" value="'+o+'" data-control="colorpicker" data-target-option="'+n+'" data-target-attr="bgcolor"></div>',e+="        </div>"}),e+="    </div>",e+="</div>"),t.options.bg.length>0&&(e+='<div class="styles-group">',e+='    <div class="group-header">Background images</div>',e+='    <div class="group-styles-inner">',t.options.bg.forEach(function(n){var i=$('[data-bg="'+n+'"]',t.current).css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");e+='        <div class="style-item">',e+='            <div class="style-label">'+n+"</div>",e+='            <div class="style-control"><span data-bg-option-label="'+n+'">'+i+'</span><button data-control="background-image" data-bg-image="'+i+'" data-target-option="'+n+'">Change</button></div>',e+="        </div>",e+='        <div class="style-item">',e+='            <div class="style-label">Position</div>',e+='            <div class="style-control">',e+='                <select data-control="background-appearance" data-target-option="'+n+'">',e+='                    <option value="original">Original</option>',e+='                    <option value="100%">100%</option>',e+='                    <option value="fluid">Fluid</option>',e+='                    <option value="fixed">Fixed</option>',e+="                </select>",e+="            </div>",e+="        </div>"}),e+="    </div>",e+="</div>"),e}};i.on("module_added",function(){i.emit("update_template")}),i.on("module_change",function(){$('[data-type="sidebar-second"]').find("[data-sidebar]").hide(),o.getOptions();var t=o.getOptionsHTML();$('[data-type="module-options"]').html(t),o.optionActions()}),i.on("update_template",function(){o.init()}),t.exports=o},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={init:function(){i.emit("show_nav"),this.bindAccordion(),this.bindSidebar()},showModulesSidebar:function(){var t=$('[data-type="nav"] [data-target="modules"]').get(0);this.toggleSidebar(t);var e=$('[data-type="nav"] [data-nav="has-child"]').find('[data-target="modules"]');e.closest('[data-type="subnav"]').slideDown(200,function(){e.addClass("active")})},bindAccordion:function(){$('[data-nav="has-child"]').on("click",function(t){var e=t.currentTarget;return"has-child"!=!$(e).data("nav")&&!$(e).hasClass("active")&&($('[data-type="nav"]').find('[data-type="subnav"]').slideUp(200,function(){$('[data-nav="has-child"]').removeClass("active")}),void $(e).find('[data-type="subnav"]').slideDown(200,function(){$(e).addClass("active")}))})},bindSidebar:function(){var t=this;$('[data-type="nav"] [data-target]').on("click",function(e){var n=e.currentTarget;t.toggleSidebar(n)})},toggleSidebar:function(t){var e=$(t).data("target");$('[data-type="sidebar-second"]').effect("slide",{direction:"left",mode:"hide"},500,function(){$('[data-type="nav"] [data-target]').removeClass("active"),$(t).addClass("active"),$('[data-type="sidebar-second"]').find("[data-sidebar]").hide()}).promise().done(function(){$('[data-type="sidebar-second"]').find('[data-sidebar="'+e+'"]').show(),$('[data-type="sidebar-second"]').effect("slide",{direction:"left",mode:"show"},500)})}};i.on("init",function(){o.init(),o.showModulesSidebar()}),i.on("module_change",function(){var t=$('[data-type="nav"] [data-target="styles"]').get(0);o.toggleSidebar(t)}),t.exports=o},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={name:"",path:"",template:{},modulesHTML:{},renderModulePreview:function(t,e,n){return'<div class="module-item" data-module="'+t+'"><div class="module-thumb"><img src="'+n+'"></div><div class="module-title">'+e+"</div></div>"},load:function(t){var e=this;return e.name=t,e.path="templates/"+e.name,$.getJSON(e.getPath()+"/template.json",function(t){e.template=t;var n=e.getFonts();$("head").append(n),$.each(e.template.modules,function(t,n){e.modulesHTML[n.uid]=n.html})})},getPath:function(){return this.path},getName:function(){return this.name},getTitle:function(){return this.template.template},getTemplate:function(){return this.template},getModules:function(){return this.template.modules},getModuleHTML:function(t){return this.modulesHTML[t]},getModulesPreview:function(){var t=this,e=t.getPath(),n=t.getModules(),o="";return $.each(n,function(n,i){var r=e+"/"+i.thumb;o+=t.renderModulePreview(i.uid,i.title,r)}),i.emit("modules_preview"),o},getHeader:function(){return this.template.header},getFooter:function(){return this.template.footer},getFonts:function(){var t="";if("fonts"in this.template){var e=this.template.fonts;$.each(e,function(e,n){t+="<link href='"+n+"' rel='stylesheet' type='text/css'>"})}return t},actionModuleDrag:function(){$('[data-type="modules-container"] .module-item').draggable({appendTo:"body",helper:"clone",connectToSortable:'[data-type="editor"]',scroll:!1,zIndex:1e3,delay:100,revert:"invalid"})},actionModuleAdd:function(){var t=this;$('[data-type="editor"]').sortable({handle:".btn-module-sort",items:".module-container",placeholder:"module-placeholder",axis:"y",opacity:.9,scroll:!1,zIndex:1e3,refreshPositions:!0,beforeStop:function(e,n){var i=n.item.data("module"),o=$("<div/>").html(t.getModuleHTML(i));$("img",o).each(function(){var e=config.host,n=t.name,i=$(this).attr("src"),o=e+"/templates/"+n+"/"+i;$(this).attr("src",o)}),$(n.item).replaceWith('<div class="module-container" data-module="'+i+'">'+o.html()+"</div>")},receive:function(t,e){},activate:function(t,e){$(e.helper).html($(".module-thumb",e.item).html())},start:function(t,e){},update:function(t,e){i.emit("module_added")}})}};i.on("theme_load",function(t){$.when(o.load(t)).done(function(t){i.emit("theme_loaded")})}),i.on("theme_loaded",function(){var t=o.getModulesPreview();$('[data-type="modules-container"]').html(t),o.actionModuleDrag(),o.actionModuleAdd()}),i.on("update_template",function(){var t=o.getHeader(),e=o.getFooter(),n=$('[data-type="editor"]').html(),i=t+n+e;$("#templateHTML").val(btoa(i))}),t.exports=o},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={showPreview:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:375,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:559,n=window.open(null,"Preview HTML","width="+t+",height="+e+",resizeable,scrollbars"),i=$("#templateHTML").val();n.document.write(atob(i)),n.document.close()},templatePreviewMobile:function(){this.showPreview(375,559)},templatePreviewTablet:function(){this.showPreview(768,600)},templateClear:function(){swal({title:"Clear the template?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",closeOnConfirm:!1},function(t){t&&(swal("All done!","The template has been cleared","success"),$('[data-type="editor"]').html(""))})}};i.on("init",function(){$(".template-preview-mobile").on("click",function(t){o.templatePreviewMobile()}),$(".template-preview-tablet").on("click",function(t){o.templatePreviewTablet()}),$(".template-clear").on("click",function(t){o.templateClear()})}),t.exports=o},function(t,e){!function(t){function e(t,e,n,i){if(t.tag.format&&n.length>0){n.push("\n");for(var o=0;o<i;o++)n.push("\t")}}function n(i,o){var r=[],s=0===i.attributes.length,a=0;if(i.tag.isComment)o.allowComments&&(r.push("\x3c!--"),r.push(i.tag.rawAttributes),r.push(">"),o.format&&e(i,o,r,a-1));else{var l=0===o.removeTagsAndContent.length||-1==t.inArray(i.tag.name,o.removeTagsAndContent),f=l&&i.tag.render&&(0===o.allowedTags.length||t.inArray(i.tag.name,o.allowedTags)>-1)&&(0===o.removeTags.length||-1==t.inArray(i.tag.name,o.removeTags));if(!i.isRoot&&f&&(r.push("<"),r.push(i.tag.name),t.each(i.attributes,function(){if(-1==t.inArray(this.name,o.removeAttrs)){var e=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),n=e[2],s=e[1]||"'";"class"==this.name&&o.allowedClasses.length>0&&(n=t.grep(n.split(" "),function(e){return t.grep(o.allowedClasses,function(n){return n==e||n[0]==e&&(1==n.length||t.inArray(i.tag.name,n[1])>-1)}).length>0}).join(" ")),null!==n&&(n.length>0||t.inArray(this.name,i.tag.requiredAttributes)>-1)&&(r.push(" "),r.push(this.name),r.push("="),r.push(s),r.push(n),r.push(s))}})),i.tag.isSelfClosing)f&&r.push(" />"),s=!1;else if(i.tag.isNonClosing)s=!1;else if(l){!i.isRoot&&f&&r.push(">"),a=o.formatIndent++;var m=[];if(i.tag.toProtect)m=t.htmlClean.trim(i.children.join("")).replace(/<br>/gi,"\n"),r.push(m),s=0===m.length;else{m=[];for(var g=0;g<i.children.length;g++){var v=i.children[g],y=t.htmlClean.trim(p(h(v)?v:v.childrenToString()));d(v)&&g>0&&y.length>0&&(c(v)||u(i.children[g-1]))&&m.push(" "),h(v)?y.length>0&&m.push(y):(g!==i.children.length-1||"br"!==v.tag.name||o.allowBreakAsLastChild&&"br"===v.tag.name)&&(o.format&&e(v,o,m,a),m=m.concat(n(v,o)))}o.formatIndent--,m.length>0&&(o.format&&"\n"!=m[0]&&e(i,o,r,a),r=r.concat(m),s=!1)}!i.isRoot&&f&&(o.format&&e(i,o,r,a-1),r.push("</"),r.push(i.tag.name),r.push(">"))}if(!i.tag.allowEmpty&&s)return[]}return r}function i(e,n){return r(e,function(e){return t.inArray(e.tag.nameOriginal,n)>-1})}function o(t){return r(t,function(t){return t.isRoot||!t.tag.isInline})}function r(t,e,n){return n=n||1,!!e(t[t.length-n])||!!(t.length-n>0&&r(t,e,n+1))&&(t.pop(),!0)}function s(t){return t?(this.tag=t,this.isRoot=!1):(this.tag=new l("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(t){for(var e=0;e<this.attributes.length;e++)if(this.attributes[e].name==t)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function a(t,e){return this.name=t,this.value=e,this}function l(e,n,i,o){return this.name=e.toLowerCase(),this.nameOriginal=this.name,this.render=!0,this.init=function(){if("--"==this.name?(this.isComment=!0,this.isSelfClosing=!0,this.format=!0):(this.isComment=!1,this.isSelfClosing=t.inArray(this.name,x)>-1,this.isNonClosing=t.inArray(this.name,C)>-1,this.isClosing=void 0!==n&&n.length>0,this.isInline=t.inArray(this.name,m)>-1,this.disallowNest=t.inArray(this.name,v)>-1,this.requiredParent=b[t.inArray(this.name,b)+1],this.allowEmpty=o&&t.inArray(this.name,o.allowEmpty)>-1,this.toProtect=t.inArray(this.name,w)>-1,this.format=t.inArray(this.name,g)>-1||!this.isInline),this.rawAttributes=i,this.requiredAttributes=S[t.inArray(this.name,S)+1],o){if(o.tagAttributesCache||(o.tagAttributesCache=[]),-1==t.inArray(this.name,o.tagAttributesCache)){for(var e=_[t.inArray(this.name,_)+1].slice(0),r=0;r<o.allowedAttributes.length;r++){var s=o.allowedAttributes[r][0];(1==o.allowedAttributes[r].length||t.inArray(this.name,o.allowedAttributes[r][1])>-1)&&-1==t.inArray(s,e)&&e.push(s)}o.tagAttributesCache.push(this.name),o.tagAttributesCache.push(e)}this.allowedAttributes=o.tagAttributesCache[t.inArray(this.name,o.tagAttributesCache)+1]}},this.init(),this.rename=function(t){this.name=t,this.init()},this}function c(e){for(;f(e)&&e.children.length>0;)e=e.children[0];if(!h(e))return!1;var n=p(e);return n.length>0&&t.htmlClean.isWhitespace(n.charAt(0))}function u(e){for(;f(e)&&e.children.length>0;)e=e.children[e.children.length-1];if(!h(e))return!1;var n=p(e);return n.length>0&&t.htmlClean.isWhitespace(n.charAt(n.length-1))}function h(t){return t.constructor==String}function d(t){return h(t)||t.tag.isInline}function f(t){return t.constructor==s}function p(t){return t.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}t.fn.htmlClean=function(e){return this.each(function(){
this.value?this.value=t.htmlClean(this.value,e):this.innerHTML=t.htmlClean(this.innerHTML,e)})},t.htmlClean=function(e,r){r=t.extend({},t.htmlClean.defaults,r),r.allowEmpty=y.concat(r.allowEmpty);var c,u=/(<(\/)?(\w+:)?([\w]+)([^>]*)>)|<!--(.*?--)>/gi,d=/([\w\-]+)\s*=\s*(".*?"|'.*?'|[^\s>\/]*)/gi,f=new s,p=[f],m=f;r.bodyOnly&&null!==(c=/<body[^>]*>((\n|.)*)<\/body>/i.exec(e))&&(e=c[1]),e=e.concat("<xxx>");for(var g;null!==(c=u.exec(e));){var v=c[6]?new l("--",null,c[6],r):new l(c[4],c[2],c[5],r),b=e.substring(g,c.index);if(b.length>0){var w=m.children[m.children.length-1];m.children.length>0&&h(w=m.children[m.children.length-1])?m.children[m.children.length-1]=w.concat(b):m.children.push(b)}if(g=u.lastIndex,v.isClosing)i(p,[v.name])&&(p.pop(),m=p[p.length-1]);else{for(var x,C=new s(v);null!==(x=d.exec(v.rawAttributes));){if("style"==x[1].toLowerCase()&&r.replaceStyles)for(var _=!v.isInline,S=0;S<r.replaceStyles.length;S++)r.replaceStyles[S][0].test(x[2])&&(_||(v.render=!1,_=!0),m.children.push(C),p.push(C),m=C,v=new l(r.replaceStyles[S][1],"","",r),C=new s(v));null!==v.allowedAttributes&&(0===v.allowedAttributes.length||t.inArray(x[1],v.allowedAttributes)>-1)&&C.attributes.push(new a(x[1],x[2]))}for(var k=0;k<v.requiredAttributes.length;k++){var T=v.requiredAttributes[k];C.hasAttribute(T)||C.attributes.push(new a(T,""))}for(var E=0;E<r.replace.length;E++)for(var L=0;L<r.replace[E][0].length;L++){var P="string"==typeof r.replace[E][0][L];if(P&&r.replace[E][0][L]==v.name||!P&&r.replace[E][0][L].test(c)){v.rename(r.replace[E][1]),E=r.replace.length;break}}var A=!0;if(m.isRoot||(m.tag.isInline&&!v.isInline?(A=o(p))&&(m=p[p.length-1]):m.tag.disallowNest&&v.disallowNest&&!v.requiredParent?A=!1:v.requiredParent&&(A=i(p,v.requiredParent))&&(m=p[p.length-1])),A)if(m.children.push(C),v.toProtect)for(var M;null!==(M=u.exec(e));){var N=new l(M[4],M[1],M[5],r);if(N.isClosing&&N.name==v.name){C.children.push(RegExp.leftContext.substring(g)),g=u.lastIndex;break}}else v.isSelfClosing||v.isNonClosing||(p.push(C),m=C)}}return t.htmlClean.trim(n(f,r).join(""))},t.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],removeTagsAndContent:[],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]],allowComments:!1,allowEmpty:[],allowBreakAsLastChild:!1},t.htmlClean.trim=function(e){return t.htmlClean.trimStart(t.htmlClean.trimEnd(e))},t.htmlClean.trimStart=function(e){return e.substring(t.htmlClean.trimStartIndex(e))},t.htmlClean.trimStartIndex=function(e){for(var n=0;n<e.length-1&&t.htmlClean.isWhitespace(e.charAt(n));n++);return n},t.htmlClean.trimEnd=function(e){return e.substring(0,t.htmlClean.trimEndIndex(e))},t.htmlClean.trimEndIndex=function(e){for(var n=e.length-1;n>=0&&t.htmlClean.isWhitespace(e.charAt(n));n--);return n+1},t.htmlClean.isWhitespace=function(e){return-1!=t.inArray(e,k)};var m=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","option","param","small","span","strike","strong","sub","sup","tt","u","var"],g=["address","button","caption","code","input","label","legend","select","option","param"],v=["h1","h2","h3","h4","h5","h6","p","th","td","object"],y=["th","td"],b=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"],"param",["object"]],w=["script","style","pre","code"],x=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],C=["!doctype","?xml"],_=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"iframe",["class","height","name","sandbox","seamless","src","srcdoc","width"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"],"param",["name","value"],"embed",["height","src","type","width"]],S=[[],"img",["alt"]],k=["Â "," ","\t","\n","\r","\f"]}(jQuery)},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"use strict";function i(t){return Array.prototype.slice.call(t)}function o(t){return"object"===n(t[0])||0===t.length}function r(t,e,n){var i=Object.getOwnPropertyDescriptor(l.prototype,e);return!!i&&void 0!==i.get}function s(t,e,n){var i=Object.getOwnPropertyDescriptor(l.prototype,e);return!!i&&void 0!==i.set}function a(t,e){return"function"==typeof t[e]}if(t){var l=function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){if(!(e>=1)){for(var i=Math.min(n.width,Math.round(t.width*e)),o=Math.min(n.height,Math.round(t.height*e)),r=t.width,s=t.height,a=t,l=void 0,c=void 0;r>i&&s>o;)l=document.createElement("canvas"),r=Math.round(.5*a.width),s=Math.round(.5*a.height),r<i&&(r=i),s<o&&(s=o),l.width=r,l.height=s,c=l.getContext("2d"),c.drawImage(a,0,0,r,s),a=lt(l);t.width=i,t.height=o,c=t.getContext("2d"),c.drawImage(a,0,0,i,o)}}!function(){function t(t,n){n=n||{bubbles:!1,cancelable:!1,detail:e};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i}if("function"==typeof window.CustomEvent)return!1;t.prototype=window.Event.prototype,window.CustomEvent=t}();var o=function t(e,n,i){var o,r,s=document.createElement("img");if(s.onerror=n,s.onload=function(){!r||i&&i.noRevoke||t.revokeObjectURL(r),n&&n(t.scale(s,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))o=r=t.createObjectURL(e),s._type=e.type;else{if("string"!=typeof e)return!1;o=e,i&&i.crossOrigin&&(s.crossOrigin=i.crossOrigin)}return o?(s.src=o,s):t.readFile(e,function(t){var e=t.target;e&&e.result?s.src=e.result:n&&n(t)})},r=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;o.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},o.transformCoordinates=function(){},o.getTransformedOptions=function(t,e){var n,i,o,r,s=e.aspectRatio;if(!s)return e;n={};for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n.crop=!0,o=t.naturalWidth||t.width,r=t.naturalHeight||t.height,o/r>s?(n.maxWidth=r*s,n.maxHeight=r):(n.maxWidth=o,n.maxHeight=o/s),n},o.renderImageToCanvas=function(t,e,n,i,o,r,s,a,l,c){return t.getContext("2d").drawImage(e,n,i,o,r,s,a,l,c),t},o.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},o.scale=function(t,n){function i(){var t=Math.max((l||x)/x,(c||C)/C);t>1&&(x*=t,C*=t)}function r(){var t=Math.min((s||x)/x,(a||C)/C);t<1&&(x*=t,C*=t)}n=n||{};var s,a,l,c,u,h,d,f,p,m,g,v=document.createElement("canvas"),y=t.getContext||o.hasCanvasOption(n)&&v.getContext,b=t.naturalWidth||t.width,w=t.naturalHeight||t.height,x=b,C=w;if(y&&(n=o.getTransformedOptions(t,n),d=n.left||0,f=n.top||0,n.sourceWidth?(u=n.sourceWidth,n.right!==e&&n.left===e&&(d=b-u-n.right)):u=b-d-(n.right||0),n.sourceHeight?(h=n.sourceHeight,n.bottom!==e&&n.top===e&&(f=w-h-n.bottom)):h=w-f-(n.bottom||0),x=u,C=h),s=n.maxWidth,a=n.maxHeight,l=n.minWidth,c=n.minHeight,y&&s&&a&&n.crop?(x=s,C=a,g=u/h-s/a,g<0?(h=a*u/s,n.top===e&&n.bottom===e&&(f=(w-h)/2)):g>0&&(u=s*h/a,n.left===e&&n.right===e&&(d=(b-u)/2))):((n.contain||n.cover)&&(l=s=s||l,c=a=a||c),n.cover?(r(),i()):(i(),r())),y){if(p=n.pixelRatio,p>1&&(v.style.width=x+"px",v.style.height=C+"px",x*=p,C*=p,v.getContext("2d").scale(p,p)),(m=n.downsamplingRatio)>0&&m<1&&x<u&&C<h)for(;u*m>x;)v.width=u*m,v.height=h*m,o.renderImageToCanvas(v,t,d,f,u,h,0,0,v.width,v.height),u=v.width,h=v.height,t=document.createElement("canvas"),t.width=u,t.height=h,o.renderImageToCanvas(t,v,0,0,u,h,0,0,u,h);return v.width=x,v.height=C,o.transformCoordinates(v,n),o.renderImageToCanvas(v,t,d,f,u,h,0,0,x,C)}return t.width=x,t.height=C,t},o.createObjectURL=function(t){return!!r&&r.createObjectURL(t)},o.revokeObjectURL=function(t){return!!r&&r.revokeObjectURL(t)},o.readFile=function(t,e,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=e,n=n||"readAsDataURL",i[n])return i[n](t),i}return!1};var s=o.hasCanvasOption,a=o.transformCoordinates,l=o.getTransformedOptions;o.hasCanvasOption=function(t){return!!t.orientation||s.call(o,t)},o.transformCoordinates=function(t,e){a.call(o,t,e);var n=t.getContext("2d"),i=t.width,r=t.height,s=t.style.width,l=t.style.height,c=e.orientation;if(c&&!(c>8))switch(c>4&&(t.width=r,t.height=i,t.style.width=l,t.style.height=s),c){case 2:n.translate(i,0),n.scale(-1,1);break;case 3:n.translate(i,r),n.rotate(Math.PI);break;case 4:n.translate(0,r),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-r);break;case 7:n.rotate(.5*Math.PI),n.translate(i,-r),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-i,0)}},o.getTransformedOptions=function(t,e){var n,i,r=l.call(o,t,e),s=r.orientation;if(!s||s>8||1===s)return r;n={};for(i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);switch(r.orientation){case 2:n.left=r.right,n.right=r.left;break;case 3:n.left=r.right,n.top=r.bottom,n.right=r.left,n.bottom=r.top;break;case 4:n.top=r.bottom,n.bottom=r.top;break;case 5:n.left=r.top,n.top=r.left,n.right=r.bottom,n.bottom=r.right;break;case 6:n.left=r.top,n.top=r.right,n.right=r.bottom,n.bottom=r.left;break;case 7:n.left=r.bottom,n.top=r.right,n.right=r.top,n.bottom=r.left;break;case 8:n.left=r.bottom,n.top=r.left,n.right=r.top,n.bottom=r.right}return r.orientation>4&&(n.maxWidth=r.maxHeight,n.maxHeight=r.maxWidth,n.minWidth=r.minHeight,n.minHeight=r.minWidth,n.sourceWidth=r.sourceHeight,n.sourceHeight=r.sourceWidth),n};var c=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);o.blobSlice=c&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},o.metaDataParsers={jpeg:{65505:[]}},o.parseMetaData=function(t,e,n){n=n||{};var i=this,r=n.maxMetaDataSize||262144,s={};!!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&o.blobSlice)&&o.readFile(o.blobSlice.call(t,0,r),function(t){if(t.target.error)return void e(s);var r,a,l,c,u=t.target.result,h=new DataView(u),d=2,f=h.byteLength-4,p=d;if(65496===h.getUint16(0)){for(;d<f&&((r=h.getUint16(d))>=65504&&r<=65519||65534===r)&&(a=h.getUint16(d+2)+2,!(d+a>h.byteLength));){if(l=o.metaDataParsers.jpeg[r])for(c=0;c<l.length;c+=1)l[c].call(i,h,d,a,s,n);d+=a,p=d}!n.disableImageHead&&p>6&&(u.slice?s.imageHead=u.slice(0,p):s.imageHead=new Uint8Array(u).subarray(0,p))}e(s)},"readAsArrayBuffer")||e(s)},o.ExifMap=function(){return this},o.ExifMap.prototype.map={Orientation:274},o.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},o.getExifThumbnail=function(t,e,n){var i,o,r;if(n&&!(e+n>t.byteLength)){for(i=[],o=0;o<n;o+=1)r=t.getUint8(e+o),i.push((r<16?"0":"")+r.toString(16));return"data:image/jpeg,%"+i.join("%")}},o.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,n){return t.getUint16(e,n)},size:2},4:{getValue:function(t,e,n){return t.getUint32(e,n)},size:4},5:{getValue:function(t,e,n){return t.getUint32(e,n)/t.getUint32(e+4,n)},size:8},9:{getValue:function(t,e,n){return t.getInt32(e,n)},size:4},10:{getValue:function(t,e,n){return t.getInt32(e,n)/t.getInt32(e+4,n)},size:8}},o.exifTagTypes[7]=o.exifTagTypes[1],o.getExifValue=function(t,e,n,i,r,s){var a,l,c,u,h,d,f=o.exifTagTypes[i];if(f&&(a=f.size*r,!((l=a>4?e+t.getUint32(n+8,s):n+8)+a>t.byteLength))){if(1===r)return f.getValue(t,l,s);for(c=[],u=0;u<r;u+=1)c[u]=f.getValue(t,l+u*f.size,s);if(f.ascii){for(h="",u=0;u<c.length&&"\0"!==(d=c[u]);u+=1)h+=d;return h}return c}},o.parseExifTag=function(t,e,n,i,r){var s=t.getUint16(n,i);r.exif[s]=o.getExifValue(t,e,n,t.getUint16(n+2,i),t.getUint32(n+4,i),i)},o.parseExifTags=function(t,e,n,i,o){var r,s,a;if(!(n+6>t.byteLength||(r=t.getUint16(n,i),(s=n+2+12*r)+4>t.byteLength))){for(a=0;a<r;a+=1)this.parseExifTag(t,e,n+2+12*a,i,o);return t.getUint32(s,i)}},o.parseExifData=function(t,e,n,i,r){if(!r.disableExif){var s,a,l,c=e+10;if(1165519206===t.getUint32(e+4)&&!(c+8>t.byteLength)&&0===t.getUint16(e+8)){switch(t.getUint16(c)){case 18761:s=!0;break;case 19789:s=!1;break;default:return}42===t.getUint16(c+2,s)&&(a=t.getUint32(c+4,s),i.exif=new o.ExifMap,a=o.parseExifTags(t,c,c+a,s,i),a&&!r.disableExifThumbnail&&(l={exif:{}},a=o.parseExifTags(t,c,c+a,s,l),l.exif[513]&&(i.exif.Thumbnail=o.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),i.exif[34665]&&!r.disableExifSub&&o.parseExifTags(t,c,c+i.exif[34665],s,i),i.exif[34853]&&!r.disableExifGps&&o.parseExifTags(t,c,c+i.exif[34853],s,i))}}},o.metaDataParsers.jpeg[65505].push(o.parseExifData);var u=function(){var t=[],n=[],i=[],o="transform",r=window.getComputedStyle(document.documentElement,"");"webkit"===(Array.prototype.slice.call(r).join("").match(/-(moz|webkit|ms)-/)||""===r.OLink&&["","o"])[1]&&(o="webkitTransform");var s=function(t,n,i){var o=t;if(o.length!==e){for(var r={chainers:[],then:function(t){return this.snabbt(t)},snabbt:function(t){var e=this.chainers.length;return this.chainers.forEach(function(n,i){n.snabbt(a(t,i,e))}),r},setValue:function(t){return this.chainers.forEach(function(e){e.setValue(t)}),r},finish:function(){return this.chainers.forEach(function(t){t.finish()}),r},rollback:function(){return this.chainers.forEach(function(t){t.rollback()}),r}},s=0,c=o.length;s<c;++s)"string"==typeof n?r.chainers.push(l(o[s],n,a(i,s,c))):r.chainers.push(l(o[s],a(n,s,c),i));return r}return"string"==typeof n?l(o,n,a(i,0,1)):l(o,a(n,0,1),i)},a=function(t,e,n){if(!t)return t;var i=Y(t);X(t.delay)&&(i.delay=t.delay(e,n)),X(t.callback)&&(i.complete=function(){t.callback.call(this,e,n)});var o=X(t.allDone),r=X(t.complete);return(r||o)&&(i.complete=function(){r&&t.complete.call(this,e,n),o&&e==n-1&&t.allDone()}),X(t.valueFeeder)&&(i.valueFeeder=function(i,o){return t.valueFeeder(i,o,e,n)}),X(t.easing)&&(i.easing=function(i){return t.easing(i,e,n)}),["position","rotation","skew","rotationPost","scale","width","height","opacity","fromPosition","fromRotation","fromSkew","fromRotationPost","fromScale","fromWidth","fromHeight","fromOpacity","transformOrigin","duration","delay"].forEach(function(o){X(t[o])&&(i[o]=t[o](e,n))}),i},l=function(t,e,i){function o(e){if(p.tick(e),p.updateElement(t),!p.isStopped())return p.completed()?void(r.loop>1&&!p.isStopped()?(r.loop-=1,p.restart(),x(o)):(r.complete&&r.complete.call(t),g.length&&(r=g.pop(),l=y(r,h,!0),h=y(r,Y(h)),r=b(l,h,r),p=_(r),n.push([t,p]),p.tick(e),x(o)))):x(o)}if("attention"===e)return c(t,i);if("stop"===e)return u(t);if("detach"===e)return d(t);var r=e;m();var s=v(t),l=s;l=y(r,l,!0);var h=Y(s);h=y(r,h);var f=b(l,h,r),p=_(f);n.push([t,p]),p.updateElement(t,!0);var g=[],w={snabbt:function(t){return g.unshift(a(t,0,1)),w},then:function(t){return this.snabbt(t)}};return x(o),r.manual?p:w},c=function(t,e){function i(n){r.tick(n),r.updateElement(t),r.completed()?(e.callback&&e.callback(t),e.loop&&e.loop>1&&(e.loop--,r.restart(),x(i))):x(i)}var o=y(e,z({}));e.movement=o;var r=S(e);n.push([t,r]),x(i)},u=function(t){for(var e=0,i=n.length;e<i;++e){var o=n[e],r=o[0],s=o[1];r===t&&s.stop()}},h=function(t,e){for(var n=0,i=t.length;n<i;++n)if(t[n][0]===e)return n;return-1},d=function(t){var e,o,r=[],s=n.concat(i),a=s.length;for(o=0;o<a;++o)e=s[o][0],(t.contains(e)||t===e)&&r.push(e);for(a=r.length,o=0;o<a;++o)f(r[o])},f=function(t){u(t);var e=h(n,t);e>=0&&n.splice(e,1),(e=h(i,t))>=0&&i.splice(e,1)},p=function(t,e){for(var n=0,i=t.length;n<i;++n){var o=t[n],r=o[0],s=o[1];if(r===e){var a=s.getCurrentState();return s.stop(),a}}},m=function(){i=i.filter(function(t){return g(t[0]).body})},g=function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e},v=function(t){return p(n,t)||p(i,t)},y=function(t,e,n){e||(e=z({position:[0,0,0],rotation:[0,0,0],rotationPost:[0,0,0],scale:[1,1],skew:[0,0]}));var i="position",o="rotation",r="skew",s="rotationPost",a="scale",l="scalePost",c="width",u="height",h="opacity";return n&&(i="fromPosition",o="fromRotation",r="fromSkew",s="fromRotationPost",a="fromScale",l="fromScalePost",c="fromWidth",u="fromHeight",h="fromOpacity"),e.position=U(t[i],e.position),e.rotation=U(t[o],e.rotation),e.rotationPost=U(t[s],e.rotationPost),e.skew=U(t[r],e.skew),e.scale=U(t[a],e.scale),e.scalePost=U(t[l],e.scalePost),e.opacity=t[h],e.width=t[c],e.height=t[u],e},b=function(t,e,n){return n.startState=t,n.endState=e,n},w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},x=function(e){0===t.length&&w(C),t.push(e)},C=function e(o){for(var r=t.length,s=0;s<r;++s)t[s](o);t.splice(0,r);var a=n.filter(function(t){return t[1].completed()});i=i.filter(function(t){for(var e=0,n=a.length;e<n;++e)if(t[0]===a[e][0])return!1;return!0}),i=i.concat(a),n=n.filter(function(t){return!t[1].completed()}),0!==t.length&&w(e)},_=function(t){var n=t.startState,i=t.endState,o=U(t.duration,500),r=U(t.delay,0),s=t.perspective,a=M(U(t.easing,"linear"),t),l=0===o?i.clone():n.clone();t.transformOrigin,l.transformOrigin=t.transformOrigin;var c,u,h=0,d=0,f=!1,p=!1,m=t.manual,g=0,v=r/o;return u=t.valueFeeder?q(t.valueFeeder,n,i,l):j(n,i,l),{stop:function(){f=!0},isStopped:function(){return f},finish:function(t){m=!1,h=d-o*g,c=t,a.resetFrom=g},rollback:function(t){m=!1,u.setReverse(),h=d-o*(1-g),c=t,a.resetFrom=g},restart:function(){h=e,a.resetFrom(0)},tick:function(t){if(!f){if(m)return d=t,void this.updateCurrentTransform();if(h||(h=t),t-h>r){p=!0,d=t-r;var e=Math.min(Math.max(0,d-h),o);a.tick(e/o),this.updateCurrentTransform(),this.completed()&&c&&c()}}},getCurrentState:function(){return l},setValue:function(t){p=!0,g=Math.min(Math.max(t,1e-4),1+v)},updateCurrentTransform:function(){var t=a.getValue();if(m){var e=Math.max(1e-5,g-v);a.tick(e),t=a.getValue()}u.tween(t)},completed:function(){return!!f||0!==h&&a.completed()},updateElement:function(t,e){if(p||e){var n=u.asMatrix(),i=u.getProperties();V(t,n,s),K(t,i)}}}},S=function(t){var n=t.movement;t.initialVelocity=.1,t.equilibriumPosition=0;var i=P(t),o=!1,r=n.position,s=n.rotation,a=n.rotationPost,l=n.scale,c=n.skew,u=z({position:r?[0,0,0]:e,rotation:s?[0,0,0]:e,rotationPost:a?[0,0,0]:e,scale:l?[0,0]:e,skew:c?[0,0]:e});return{stop:function(){o=!0},isStopped:function(t){return o},tick:function(t){o||i.equilibrium||(i.tick(),this.updateMovement())},updateMovement:function(){var t=i.getValue();r&&(u.position[0]=n.position[0]*t,u.position[1]=n.position[1]*t,u.position[2]=n.position[2]*t),s&&(u.rotation[0]=n.rotation[0]*t,u.rotation[1]=n.rotation[1]*t,u.rotation[2]=n.rotation[2]*t),a&&(u.rotationPost[0]=n.rotationPost[0]*t,u.rotationPost[1]=n.rotationPost[1]*t,u.rotationPost[2]=n.rotationPost[2]*t),l&&(u.scale[0]=1+n.scale[0]*t,u.scale[1]=1+n.scale[1]*t),c&&(u.skew[0]=n.skew[0]*t,u.skew[1]=n.skew[1]*t)},updateElement:function(t){V(t,u.asMatrix()),K(t,u.getProperties())},getCurrentState:function(){return u},completed:function(){return i.equilibrium||o},restart:function(){i=P(t)}}},k=function(t){return t},T=function(t){return(Math.cos(t*Math.PI+Math.PI)+1)/2},E=function(t){return t*t},L=function(t){return 1-Math.pow(t-1,2)},P=function(t){var e=U(t.startPosition,0),n=U(t.equilibriumPosition,1),i=U(t.initialVelocity,0),o=U(t.springConstant,.8),r=U(t.springDeceleration,.9),s=U(t.springMass,10),a=!1;return{tick:function(t){0===t||a||(i+=-(e-n)*o/s,e+=i,i*=r,Math.abs(e-n)<.001&&Math.abs(i)<.001&&(a=!0))},resetFrom:function(t){e=t,i=0},getValue:function(){return a?n:e},completed:function(){return a}}},A={linear:k,ease:T,easeIn:E,easeOut:L},M=function(t,e){if("spring"==t)return P(e);var n=t;X(t)||(n=A[t]);var i,o=n,r=0;return{tick:function(t){r=o(t),i=t},resetFrom:function(t){i=0},getValue:function(){return r},completed:function(){return i>=1&&i}}},N=function(t,e,n,i){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e,t[13]=n,t[14]=i,t[15]=1},D=function(t,e){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=Math.cos(e),t[6]=-Math.sin(e),t[7]=0,t[8]=0,t[9]=Math.sin(e),t[10]=Math.cos(e),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},I=function(t,e){t[0]=Math.cos(e),t[1]=0,t[2]=Math.sin(e),t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=-Math.sin(e),t[9]=0,t[10]=Math.cos(e),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},O=function(t,e){t[0]=Math.cos(e),t[1]=-Math.sin(e),t[2]=0,t[3]=0,t[4]=Math.sin(e),t[5]=Math.cos(e),t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},H=function(t,e,n){t[0]=1,t[1]=Math.tan(e),t[2]=0,t[3]=0,t[4]=Math.tan(n),t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},F=function(t,e,n){t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},R=function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},B=function(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]},W=function(){var t=new Float32Array(16),e=new Float32Array(16),n=new Float32Array(16);return R(t),{data:t,asCSS:function(){for(var e="matrix3d(",n=0;n<15;++n)Math.abs(t[n])<1e-4?e+="0,":e+=t[n].toFixed(10)+",";return Math.abs(t[15])<1e-4?e+="0)":e+=t[15].toFixed(10)+")",e},clear:function(){R(t)},translate:function(i,o,r){return B(t,e),N(n,i,o,r),$(e,n,t),this},rotateX:function(i){return B(t,e),D(n,i),$(e,n,t),this},rotateY:function(i){return B(t,e),I(n,i),$(e,n,t),this},rotateZ:function(i){return B(t,e),O(n,i),$(e,n,t),this},scale:function(i,o){return B(t,e),F(n,i,o),$(e,n,t),this},skew:function(i,o){return B(t,e),H(n,i,o),$(e,n,t),this}}},$=function(t,e,n){return n[0]=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],n[1]=t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],n[2]=t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],n[3]=t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],n[4]=t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],n[5]=t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],n[6]=t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],n[7]=t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],n[8]=t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],n[9]=t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],n[10]=t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],n[11]=t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],n[12]=t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],n[13]=t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],n[14]=t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],n[15]=t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15],n},z=function t(n){var i=W(),o={opacity:e,width:e,height:e};return{position:n.position,rotation:n.rotation,rotationPost:n.rotationPost,skew:n.skew,scale:n.scale,scalePost:n.scalePost,opacity:n.opacity,width:n.width,height:n.height,clone:function(){return t({position:this.position?this.position.slice(0):e,rotation:this.rotation?this.rotation.slice(0):e,rotationPost:this.rotationPost?this.rotationPost.slice(0):e,skew:this.skew?this.skew.slice(0):e,scale:this.scale?this.scale.slice(0):e,scalePost:this.scalePost?this.scalePost.slice(0):e,height:this.height,width:this.width,opacity:this.opacity})},asMatrix:function(){var t=i;return t.clear(),this.transformOrigin&&t.translate(-this.transformOrigin[0],-this.transformOrigin[1],-this.transformOrigin[2]),this.scale&&t.scale(this.scale[0],this.scale[1]),this.skew&&t.skew(this.skew[0],this.skew[1]),this.rotation&&(t.rotateX(this.rotation[0]),t.rotateY(this.rotation[1]),t.rotateZ(this.rotation[2])),this.position&&t.translate(this.position[0],this.position[1],this.position[2]),this.rotationPost&&(t.rotateX(this.rotationPost[0]),t.rotateY(this.rotationPost[1]),t.rotateZ(this.rotationPost[2])),this.scalePost&&t.scale(this.scalePost[0],this.scalePost[1]),this.transformOrigin&&t.translate(this.transformOrigin[0],this.transformOrigin[1],this.transformOrigin[2]),t},getProperties:function(){return o.opacity=this.opacity,o.width=this.width+"px",o.height=this.height+"px",o}}},j=function(t,n,i){var o=t,r=n,s=i,a=r.position!==e,l=r.rotation!==e,c=r.rotationPost!==e,u=r.scale!==e,h=r.skew!==e,d=r.width!==e,f=r.height!==e,p=r.opacity!==e;return{tween:function(t){if(a){var e=r.position[0]-o.position[0],n=r.position[1]-o.position[1],i=r.position[2]-o.position[2];s.position[0]=o.position[0]+t*e,s.position[1]=o.position[1]+t*n,s.position[2]=o.position[2]+t*i}if(l){var m=r.rotation[0]-o.rotation[0],g=r.rotation[1]-o.rotation[1],v=r.rotation[2]-o.rotation[2];s.rotation[0]=o.rotation[0]+t*m,s.rotation[1]=o.rotation[1]+t*g,s.rotation[2]=o.rotation[2]+t*v}if(c){var y=r.rotationPost[0]-o.rotationPost[0],b=r.rotationPost[1]-o.rotationPost[1],w=r.rotationPost[2]-o.rotationPost[2];s.rotationPost[0]=o.rotationPost[0]+t*y,s.rotationPost[1]=o.rotationPost[1]+t*b,s.rotationPost[2]=o.rotationPost[2]+t*w}if(h){var x=r.scale[0]-o.scale[0],C=r.scale[1]-o.scale[1];s.scale[0]=o.scale[0]+t*x,s.scale[1]=o.scale[1]+t*C}if(u){var _=r.skew[0]-o.skew[0],S=r.skew[1]-o.skew[1];s.skew[0]=o.skew[0]+t*_,s.skew[1]=o.skew[1]+t*S}if(d){var k=r.width-o.width;s.width=o.width+t*k}if(f){var T=r.height-o.height;s.height=o.height+t*T}if(p){var E=r.opacity-o.opacity;s.opacity=o.opacity+t*E}},asMatrix:function(){return s.asMatrix()},getProperties:function(){return s.getProperties()},setReverse:function(){var t=o;o=r,r=t}}},q=function(t,n,i,o){var r=t(0,W()),s=n,a=i,l=o,c=!1;return{tween:function(n){c&&(n=1-n),r.clear(),r=t(n,r);var i=a.width-s.width,o=a.height-s.height,u=a.opacity-s.opacity;a.width!==e&&(l.width=s.width+n*i),a.height!==e&&(l.height=s.height+n*o),a.opacity!==e&&(l.opacity=s.opacity+n*u)},asMatrix:function(){return r},getProperties:function(){return l.getProperties()},setReverse:function(){c=!0}}},U=function(t,e){return void 0===t?e:t},V=function(t,e,n){var i="";n&&(i="perspective("+n+"px) ");var r=e.asCSS();t.style[o]=i+r},K=function(t,e){for(var n in e)t.style[n]=e[n]},X=function(t){return"function"==typeof t},Y=function(t){if(!t)return t;var e={};for(var n in t)e[n]=t[n];return e};return s.createMatrix=W,s.setElementTransform=V,s}(),h=function(){function t(t,e,n,i,o){if("string"==typeof t)t=document.getElementById(t);else if(!t instanceof HTMLCanvasElement)return;var r,s=t.getContext("2d");try{try{r=s.getImageData(e,n,i,o)}catch(t){throw new Error("unable to access local image data: "+t)}}catch(t){throw new Error("unable to access image data: "+t)}return r}function e(e,i,o,r,s,a){if(!(isNaN(a)||a<1)){a|=0;var l=t(e,i,o,r,s);l=n(l,i,o,r,s,a),e.getContext("2d").putImageData(l,i,o)}}function n(t,e,n,s,a,l){var c,u,h,d,f,p,m,g,v,y,b,w,x,C,_,S,k,T,E,L,P,A,M,N,D=t.data,I=l+l+1,O=s-1,H=a-1,F=l+1,R=F*(F+1)/2,B=new i,W=B;for(h=1;h<I;h++)if(W=W.next=new i,h==F)var $=W;W.next=B;var z=null,j=null;m=p=0;var q=o[l],U=r[l];for(u=0;u<a;u++){for(S=k=T=E=g=v=y=b=0,w=F*(L=D[p]),x=F*(P=D[p+1]),C=F*(A=D[p+2]),_=F*(M=D[p+3]),g+=R*L,v+=R*P,y+=R*A,b+=R*M,W=B,h=0;h<F;h++)W.r=L,W.g=P,W.b=A,W.a=M,W=W.next;for(h=1;h<F;h++)d=p+((O<h?O:h)<<2),g+=(W.r=L=D[d])*(N=F-h),v+=(W.g=P=D[d+1])*N,y+=(W.b=A=D[d+2])*N,b+=(W.a=M=D[d+3])*N,S+=L,k+=P,T+=A,E+=M,W=W.next;for(z=B,j=$,c=0;c<s;c++)D[p+3]=M=b*q>>U,0!=M?(M=255/M,D[p]=(g*q>>U)*M,D[p+1]=(v*q>>U)*M,D[p+2]=(y*q>>U)*M):D[p]=D[p+1]=D[p+2]=0,g-=w,v-=x,y-=C,b-=_,w-=z.r,x-=z.g,C-=z.b,_-=z.a,d=m+((d=c+l+1)<O?d:O)<<2,S+=z.r=D[d],k+=z.g=D[d+1],T+=z.b=D[d+2],E+=z.a=D[d+3],g+=S,v+=k,y+=T,b+=E,z=z.next,w+=L=j.r,x+=P=j.g,C+=A=j.b,_+=M=j.a,S-=L,k-=P,T-=A,E-=M,j=j.next,p+=4;m+=s}for(c=0;c<s;c++){for(k=T=E=S=v=y=b=g=0,p=c<<2,w=F*(L=D[p]),x=F*(P=D[p+1]),C=F*(A=D[p+2]),_=F*(M=D[p+3]),g+=R*L,v+=R*P,y+=R*A,b+=R*M,W=B,h=0;h<F;h++)W.r=L,W.g=P,W.b=A,W.a=M,W=W.next;for(f=s,h=1;h<=l;h++)p=f+c<<2,g+=(W.r=L=D[p])*(N=F-h),v+=(W.g=P=D[p+1])*N,y+=(W.b=A=D[p+2])*N,b+=(W.a=M=D[p+3])*N,S+=L,k+=P,T+=A,E+=M,W=W.next,h<H&&(f+=s);for(p=c,z=B,j=$,u=0;u<a;u++)d=p<<2,D[d+3]=M=b*q>>U,M>0?(M=255/M,D[d]=(g*q>>U)*M,D[d+1]=(v*q>>U)*M,D[d+2]=(y*q>>U)*M):D[d]=D[d+1]=D[d+2]=0,g-=w,v-=x,y-=C,b-=_,w-=z.r,x-=z.g,C-=z.b,_-=z.a,d=c+((d=u+F)<H?d:H)*s<<2,g+=S+=z.r=D[d],v+=k+=z.g=D[d+1],y+=T+=z.b=D[d+2],b+=E+=z.a=D[d+3],z=z.next,w+=L=j.r,x+=P=j.g,C+=A=j.b,_+=M=j.a,S-=L,k-=P,T-=A,E-=M,j=j.next,p+=s}return t}function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return e}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){for(var i=atob(this.toDataURL(e,n).split(",")[1]),o=i.length,r=new Uint8Array(o),s=0;s<o;s++)r[s]=i.charCodeAt(s);t(new Blob([r],{type:e||"image/png"}))}});var d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}
}(),f="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)},p=function(t){if(void 0===t.dataset){var e,n,i={},o=t.attributes;for(e in o)o.hasOwnProperty(e)&&o[e].name&&/^data-[a-z_\-\d]*$/i.test(o[e].name)&&(n=m(o[e].name.substr(5)),i[n]=o[e].value);return i}return t.dataset},m=function(t){return t.replace(/\-./g,function(t){return t.charAt(1).toUpperCase()})},g=function(t){for(var e=[],n=Array.prototype.slice.call(t.attributes),i=n.length,o=0;o<i;o++)e.push({name:n[o].name,value:n[o].value});return e},v=function(t){return{x:void 0===t.offsetX?t.layerX:t.offsetX,y:void 0===t.offsetY?t.layerY:t.offsetY}},y=function(t,e){var n,i={},o=e||{};for(n in t)t.hasOwnProperty(n)&&(i[n]=void 0===o[n]?t[n]:o[n]);return i},b={ESC:27,RETURN:13},w={DOWN:["touchstart","pointerdown","mousedown"],MOVE:["touchmove","pointermove","mousemove"],UP:["touchend","touchcancel","pointerup","mouseup"]},x={jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp"},C=/(\.png|\.bmp|\.gif|\.jpg|\.jpe|\.jpg|\.jpeg)$/,_=function(t,e){var n=document.createElement(t);return e&&(n.className=e),n},S=function(t,e,n){e.forEach(function(e){t.addEventListener(e,n,!1)})},k=function(t,e,n){e.forEach(function(e){t.removeEventListener(e,n,!1)})},T=function(t){var e=t.changedTouches?t.changedTouches[0]:t;if(e)return{x:e.pageX,y:e.pageY}},E=function(t,e){var n=Math.PI/180*e,i=Math.cos(n),o=Math.sin(n),r=t.x,s=t.y,a=t.x+t.width,l=t.y+t.height,c=i*(r-.5)+o*(s-.5)+.5,u=i*(s-.5)-o*(r-.5)+.5,h=i*(a-.5)+o*(l-.5)+.5,d=i*(l-.5)-o*(a-.5)+.5;c<=h?(t.x=c,t.width=h-c):(t.x=h,t.width=c-h),u<=d?(t.y=u,t.height=d-u):(t.y=d,t.height=u-d)},L=function(t){var e=T(t);return e.x-=window.pageXOffset||document.documentElement.scrollLeft,e.y-=window.pageYOffset||document.documentElement.scrollTop,e},P=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},A=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},M=function(t){return t[t.length-1]},N=function(t,e,n){return Math.max(e,Math.min(n,t))},D=function(t,e){if(!e)return!1;for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},I=function(t,e,n,i,o,r){var s=new XMLHttpRequest;i&&s.upload.addEventListener("progress",function(t){i(t.loaded,t.total)}),s.open("POST",t,!0),n&&n(s),s.onreadystatechange=function(){if(4===s.readyState&&s.status>=200&&s.status<300){var t=s.responseText;if(!t.length)return void o();if(-1!==t.indexOf("Content-Length"))return void r("file-too-big");var e=void 0;try{e=JSON.parse(s.responseText)}catch(t){}if("object"===(void 0===e?"undefined":f(e))&&"failure"===e.status)return void r(e.message);o(e||t)}else if(4===s.readyState){var n=void 0;try{n=JSON.parse(s.responseText)}catch(t){}if("object"===(void 0===n?"undefined":f(n))&&"failure"===n.status)return void r(n.message);r("fail")}},s.send(e)},O=function(t){t&&(t.style.webkitTransform="",t.style.transform="")},H=function(t){return t/1e6},F=function(){var t=[],e=void 0,n=void 0;for(e in x)x.hasOwnProperty(e)&&(n=x[e],-1==t.indexOf(n)&&t.push(n));return t},R=function(t){return"image/jpeg"===t},B=function(t){var e=void 0;for(e in x)if(x.hasOwnProperty(e)&&x[e]===t)return e;return t},W=function(t){var e=void 0;for(e in x)if(x.hasOwnProperty(e)&&-1!==t.indexOf(x[e]))return x[e];return null},$=function(t){return t.split("/").pop().split("?").shift()},z=function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:"";return(n+t).slice(-n.length)},j=function(t){return t.getFullYear()+"-"+z(t.getMonth()+1,"00")+"-"+z(t.getDate(),"00")+"_"+z(t.getHours(),"00")+"-"+z(t.getMinutes(),"00")+"-"+z(t.getSeconds(),"00")},q=function(t){return void 0===t.name?j(new Date)+"."+B(U(t)):t.name},U=function(t){return t.type||"image/jpeg"},V=function(t){return"string"!=typeof t?j(new Date):$(t).split(".").shift()},K=function(t,e){return t.lastModifiedDate=new Date,t.name=e,t},X=function(t){return/^data:image/.test(t)},Y=function(t,e,n,i){var o=new XMLHttpRequest;o.open("GET",t+"?url="+e,!0),o.responseType="json",o.onload=function(t){if("failure"===this.response.status)return void n(this.response.message);G(this.response.body,i)},o.send()},G=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(n){var i=$(t),o=W(this.response.type);C.test(i)||(i+="."+B(o));var r=K(this.response,i);e(yt(r,o))},n.send()},Q=function(t){var e=t.split(",")[1],n=e.replace(/\s/g,"");return atob(n)},Z=function(t,e){for(var n=Q(t),i=new ArrayBuffer(n.length),o=new Uint8Array(i),r=0;r<n.length;r++)o[r]=n.charCodeAt(r);var s=xt(t);return void 0===e&&(e=j(new Date)+"."+B(s)),K(J(i,s),e)},J=function(t,e){var n=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(n){var i=new n;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},tt=function(t,e,n){var i="string"!=typeof t||0!==t.indexOf("data:image");o.parseMetaData(t,function(r){var s={canvas:!0,crossOrigin:i};e&&(s.maxWidth=e.width,s.maxHeight=e.height),r.exif&&(s.orientation=r.exif.get("Orientation")),o(t,function(t){if("error"===t.type)return void n();n(t,r)},s)})},et=function(t,e,n){var i,o,r,s;return e/t<n?(s=e,r=s/n,i=.5*(t-r),o=0):(r=t,s=r*n,i=0,o=.5*(e-s)),{x:i,y:o,height:s,width:r}},nt=function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:{},o=arguments[2],r=_("canvas"),s=n.rotation,a=n.crop,l=n.size,c=n.filters;if(a){var u=s%180!=0,h={width:u?t.height:t.width,height:u?t.width:t.height};a.x<0&&(a.x=0),a.y<0&&(a.y=0),a.width>h.width&&(a.width=h.width),a.height>h.height&&(a.height=h.height),a.y+a.height>h.height&&(a.y=Math.max(0,h.height-a.height)),a.x+a.width>h.width&&(a.x=Math.max(0,h.width-a.width));var d=a.x/h.width,f=a.y/h.height,p=a.width/h.width,m=a.height/h.height;r.width=a.width,r.height=a.height;var g=r.getContext("2d");90===s?(g.translate(.5*r.width,.5*r.height),g.rotate(-90*Math.PI/180),g.drawImage(t,(1-f)*t.width-t.width*m,a.x,a.height,a.width,.5*-r.height,.5*-r.width,r.height,r.width)):180===s?(g.translate(.5*r.width,.5*r.height),g.rotate(-180*Math.PI/180),g.drawImage(t,(1-(d+p))*h.width,(1-(f+m))*h.height,p*h.width,m*h.height,.5*-r.width,.5*-r.height,r.width,r.height)):270===s?(g.translate(.5*r.width,.5*r.height),g.rotate(-270*Math.PI/180),g.drawImage(t,a.y,(1-d)*t.height-t.height*p,a.height,a.width,.5*-r.height,.5*-r.width,r.height,r.width)):g.drawImage(t,a.x,a.y,a.width,a.height,0,0,r.width,r.height)}if(l){var v=l.width/r.width,y=l.height/r.height;i(r,Math.min(v,y),l),c.sharpen>0&&ot(r,st(c.sharpen))}o(r)},it=function(t){return t.getContext("2d").getImageData(0,0,t.width,t.height)},ot=function(t,e){t.getContext("2d").putImageData(e(it(t),t.width,t.height),0,0)},rt=function(t,e,n){var i=document.createElement("canvas");i.width=t,i.height=e;var o=i.getContext("2d"),r=o.createImageData(i.width,i.height);return n&&r.set(n.data),r},st=function(t){return function(e,n,i){for(var o=[0,-1,0,-1,5,-1,0,-1,0],r=Math.round(Math.sqrt(o.length)),s=.5*r|0,a=rt(n,i),l=a.data,c=e.data,u=i,h=void 0;u--;)for(h=n;h--;){for(var d=u,f=h,p=4*(u*n+h),m=0,g=0,v=0,y=0,b=0;b<r;b++)for(var w=0;w<r;w++){var x=d+b-s,C=f+w-s;if(x>=0&&x<i&&C>=0&&C<n){var _=4*(x*n+C),S=o[b*r+w];m+=c[_]*S,g+=c[_+1]*S,v+=c[_+2]*S,y+=c[_+3]*S}}l[p]=m*t+c[p]*(1-t),l[p+1]=g*t+c[p+1]*(1-t),l[p+2]=v*t+c[p+2]*(1-t),l[p+3]=c[p+3]}return a}},at=function(t,e){var n=Math.abs(t.width-e.width),i=Math.abs(t.height-e.height);return Math.max(n,i)},lt=function(t){return ct(t,1)},ct=function(t,e){if(!t)return null;var n=document.createElement("canvas"),o=n.getContext("2d");return n.width=t.width,n.height=t.height,o.drawImage(t,0,0),e>0&&1!=e&&i(n,e,{width:Math.round(t.width*e),height:Math.round(t.height*e)}),n},ut=function(t){return t.width&&t.height},ht=function(t,e){var n=e.getContext("2d");ut(e)?n.drawImage(t,0,0,e.width,e.height):(e.width=t.width,e.height=t.height,n.drawImage(t,0,0))},dt=function(t){h(t,0,0,t.width,t.height,3)},ft=function(t,e){return parseInt(t.width,10)>=e.width&&parseInt(t.height,10)>=e.height},pt=function(t,e,n){return{x:t.x*e,y:t.y*n,width:t.width*e,height:t.height*n}},mt=function(t,e,n){return{x:t.x/e,y:t.y/n,width:t.width/e,height:t.height/n}},gt=function(t){if(t&&""!==t.value){try{t.value=""}catch(t){}if(t.value){var e=document.createElement("form"),n=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?n.insertBefore(t,i):n.appendChild(t)}}},vt=function(t){return"object"===("undefined"==typeof value?"undefined":f(value))&&null!==value?JSON.parse(JSON.stringify(t)):t},yt=function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:null;if(!t)return null;var i=t.slice(0,t.size,n||t.type);return i.name=t.name,t.lastModifiedDate&&(i.lastModifiedDate=new Date(t.lastModifiedDate)),i},bt=function(t){var e=vt(t);return e.input.file=yt(t.input.file),e.output.image=lt(t.output.image),e},wt=function(t,n,i){return t&&n?t.toDataURL(n,R(n)&&"number"==typeof i?i/100:e):null},xt=function(t){if(!t)return null;var e=t.substr(0,16).match(/^.+;/);return e.length?e[0].substring(5,e[0].length-1):null},Ct=function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:[],i=arguments[2],o=arguments[3],r=arguments[4],s={server:vt(t.server),meta:vt(t.meta),input:{name:t.input.name,type:t.input.type,size:t.input.size,width:t.input.width,height:t.input.height,field:t.input.field}};return D("input",n)&&!r&&(s.input.image=wt(t.input.image,t.input.type)),D("output",n)&&(s.output={name:o?V(t.input.name)+"."+o:t.input.name,type:x[o]||t.input.type,width:t.output.width,height:t.output.height},s.output.image=wt(t.output.image,s.output.type,i),s.output.type=xt(s.output.image),"image/png"===s.output.type&&(s.output.name=V(s.input.name)+".png")),D("actions",n)&&(s.actions=vt(t.actions)),s},_t=function(t,n,i){var o=t.output.image,r=i?V(t.input.name)+"."+i:t.input.name,s=x[i]||t.input.type;"image/png"===s&&(r=V(t.input.name)+".png"),o.toBlob(function(t){if("msSaveBlob"in window.navigator)return void window.navigator.msSaveBlob(t,r);var e=(window.URL||window.webkitURL).createObjectURL(t),n=_("a");n.style.display="none",n.download=r,n.href=e,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),(window.URL||window.webkitURL).revokeObjectURL(e)},0)},s,"number"==typeof n?n/100:e)},St=function(t,e,n){var i=n.querySelector(t);i&&(i.style.display=e?"":"none")},kt=function(t){return Array.prototype.slice.call(t)},Tt=function(t){t.parentNode.removeChild(t)},Et=function(t){var e=_("div");return t.parentNode&&(t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)),e.appendChild(t),e},Lt=function(t,e,n,i){var o=(i-90)*Math.PI/180;return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}},Pt=function(t,e,n,i,o){var r=Lt(t,e,n,o),s=Lt(t,e,n,i),a=o-i<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,a,0,s.x,s.y].join(" ")},At=function(t,e,n,i){return Pt(t,e,n,0,360*i)},Mt=function(){var n={n:function(t,e,n,i){var o,r,s,a,l,c,u,h;return s=t.y+t.height,o=N(e.y,0,s),s-o<n.min.height&&(o=s-n.min.height),l=i?(s-o)/i:t.width,l<n.min.width&&(l=n.min.width,o=s-l*i),u=.5*(l-t.width),a=t.x-u,r=t.x+t.width+u,(a<0||r>n.width)&&(h=Math.min(t.x,n.width-(t.x+t.width)),a=t.x-h,r=t.x+t.width+h,l=r-a,c=l*i,o=s-c),{x:a,y:o,width:r-a,height:s-o}},s:function(t,e,n,i){var o,r,s,a,l,c,u,h;return o=t.y,s=N(e.y,o,n.height),s-o<n.min.height&&(s=o+n.min.height),l=i?(s-o)/i:t.width,l<n.min.width&&(l=n.min.width,s=o+l*i),u=.5*(l-t.width),a=t.x-u,r=t.x+t.width+u,(a<0||r>n.width)&&(h=Math.min(t.x,n.width-(t.x+t.width)),a=t.x-h,r=t.x+t.width+h,l=r-a,c=l*i,s=o+c),{x:a,y:o,width:r-a,height:s-o}},e:function(t,e,n,i){var o,r,s,a,l,c,u,h;return a=t.x,r=N(e.x,a,n.width),r-a<n.min.width&&(r=a+n.min.width),c=i?(r-a)*i:t.height,c<n.min.height&&(c=n.min.height,r=a+c/i),u=.5*(c-t.height),o=t.y-u,s=t.y+t.height+u,(o<0||s>n.height)&&(h=Math.min(t.y,n.height-(t.y+t.height)),o=t.y-h,s=t.y+t.height+h,c=s-o,l=c/i,r=a+l),{x:a,y:o,width:r-a,height:s-o}},w:function(t,e,n,i){var o,r,s,a,l,c,u,h;return r=t.x+t.width,a=N(e.x,0,r),r-a<n.min.width&&(a=r-n.min.width),c=i?(r-a)*i:t.height,c<n.min.height&&(c=n.min.height,a=r-c/i),u=.5*(c-t.height),o=t.y-u,s=t.y+t.height+u,(o<0||s>n.height)&&(h=Math.min(t.y,n.height-(t.y+t.height)),o=t.y-h,s=t.y+t.height+h,c=s-o,l=c/i,a=r-l),{x:a,y:o,width:r-a,height:s-o}},ne:function(t,e,n,i){var o,r,s,a,l,c,u;return a=t.x,s=t.y+t.height,r=N(e.x,a,n.width),r-a<n.min.width&&(r=a+n.min.width),c=i?(r-a)*i:N(s-e.y,n.min.height,s),c<n.min.height&&(c=n.min.height,r=a+c/i),o=t.y-(c-t.height),(o<0||s>n.height)&&(u=Math.min(t.y,n.height-(t.y+t.height)),o=t.y-u,c=s-o,l=c/i,r=a+l),{x:a,y:o,width:r-a,height:s-o}},se:function(t,e,n,i){var o,r,s,a,l,c,u;return a=t.x,o=t.y,r=N(e.x,a,n.width),r-a<n.min.width&&(r=a+n.min.width),c=i?(r-a)*i:N(e.y-t.y,n.min.height,n.height-o),c<n.min.height&&(c=n.min.height,r=a+c/i),s=t.y+t.height+(c-t.height),(o<0||s>n.height)&&(u=Math.min(t.y,n.height-(t.y+t.height)),s=t.y+t.height+u,c=s-o,l=c/i,r=a+l),{x:a,y:o,width:r-a,height:s-o}},sw:function(t,e,n,i){var o,r,s,a,l,c,u;return r=t.x+t.width,o=t.y,a=N(e.x,0,r),r-a<n.min.width&&(a=r-n.min.width),c=i?(r-a)*i:N(e.y-t.y,n.min.height,n.height-o),c<n.min.height&&(c=n.min.height,a=r-c/i),s=t.y+t.height+(c-t.height),(o<0||s>n.height)&&(u=Math.min(t.y,n.height-(t.y+t.height)),s=t.y+t.height+u,c=s-o,l=c/i,a=r-l),{x:a,y:o,width:r-a,height:s-o}},nw:function(t,e,n,i){var o,r,s,a,l,c,u;return r=t.x+t.width,s=t.y+t.height,a=N(e.x,0,r),r-a<n.min.width&&(a=r-n.min.width),c=i?(r-a)*i:N(s-e.y,n.min.height,s),c<n.min.height&&(c=n.min.height,a=r-c/i),o=t.y-(c-t.height),(o<0||s>n.height)&&(u=Math.min(t.y,n.height-(t.y+t.height)),o=t.y-u,c=s-o,l=c/i,a=r-l),{x:a,y:o,width:r-a,height:s-o}}};return function(){function i(){var n=arguments.length>0&&arguments[0]!==e?arguments[0]:document.createElement("div");t(this,i),this._element=n,this._interaction=null,this._minWidth=0,this._minHeight=0,this._ratio=null,this._rect={x:0,y:0,width:0,height:0},this._space={width:0,height:0},this._rectChanged=!1,this._init()}return d(i,[{key:"_init",value:function(){this._element.className="slim-crop-area";var t=_("div","grid");this._element.appendChild(t);for(var e in n)if(n.hasOwnProperty(e)){var i=_("button",e);this._element.appendChild(i)}var o=_("button","c");this._element.appendChild(o),S(document,w.DOWN,this)}},{key:"reset",value:function(){this._interaction=null,this._rect={x:0,y:0,width:0,height:0},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"rescale",value:function(t){1!==t&&(this._interaction=null,this._rectChanged=!0,this._rect.x*=t,this._rect.y*=t,this._rect.width*=t,this._rect.height*=t,this._redraw(),this._element.dispatchEvent(new CustomEvent("change")))}},{key:"limit",value:function(t,e){this._space.width=t,this._space.height=e}},{key:"offset",value:function(t,e){this._space.x=t,this._space.y=e}},{key:"resize",value:function(t,e,n,i){this._interaction=null,this._rect={x:N(t,0,this._space.width-this._minWidth),y:N(e,0,this._space.height-this._minHeight),width:N(n,this._minWidth,this._space.width),height:N(i,this._minHeight,this._space.height)},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"handleEvent",value:function(t){switch(t.type){case"touchstart":case"pointerdown":case"mousedown":this._onStartDrag(t);break;case"touchmove":case"pointermove":case"mousemove":this._onDrag(t);break;case"touchend":case"touchcancel":case"pointerup":case"mouseup":this._onStopDrag(t)}}},{key:"_onStartDrag",value:function(t){this._element.contains(t.target)&&(t.preventDefault(),S(document,w.MOVE,this),S(document,w.UP,this),this._interaction={type:t.target.className,offset:L(t)},this._interaction.offset.x-=this._rect.x,this._interaction.offset.y-=this._rect.y,this._element.setAttribute("data-dragging","true"),this._redraw())}},{key:"_onDrag",value:function(t){t.preventDefault();var e=L(t),i=this._interaction.type;"c"===i?(this._rect.x=N(e.x-this._interaction.offset.x,0,this._space.width-this._rect.width),this._rect.y=N(e.y-this._interaction.offset.y,0,this._space.height-this._rect.height)):n[i]&&(this._rect=n[i](this._rect,{x:e.x-this._space.x,y:e.y-this._space.y},{x:0,y:0,width:this._space.width,height:this._space.height,min:{width:this._minWidth,height:this._minHeight}},this._ratio)),this._rectChanged=!0,this._element.dispatchEvent(new CustomEvent("input"))}},{key:"_onStopDrag",value:function(t){t.preventDefault(),k(document,w.MOVE,this),k(document,w.UP,this),this._interaction=null,this._element.setAttribute("data-dragging","false"),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"_redraw",value:function(){var t=this;if(this._rectChanged){var e="translate("+this._rect.x+"px,"+this._rect.y+"px);";this._element.style.cssText="\n\t\t\t\t\t-webkit-transform: "+e+";\n\t\t\t\t\ttransform: "+e+";\n\t\t\t\t\twidth:"+this._rect.width+"px;\n\t\t\t\t\theight:"+this._rect.height+"px;\n\t\t\t\t",this._rectChanged=!1}this._interaction&&requestAnimationFrame(function(){return t._redraw()})}},{key:"destroy",value:function(){this._interaction=!1,this._rectChanged=!1,k(document,w.DOWN,this),k(document,w.MOVE,this),k(document,w.UP,this),Tt(this._element)}},{key:"element",get:function(){return this._element}},{key:"space",get:function(){return this._space}},{key:"area",get:function(){return{x:this._rect.x/this._space.width,y:this._rect.y/this._space.height,width:this._rect.width/this._space.width,height:this._rect.height/this._space.height}}},{key:"dirty",get:function(){return 0!==this._rect.x||0!==this._rect.y||0!==this._rect.width||0!==this._rect.height}},{key:"minWidth",set:function(t){this._minWidth=t}},{key:"minHeight",set:function(t){this._minHeight=t}},{key:"ratio",set:function(t){this._ratio=t}}]),i}()}(),Nt=function(){var n=["input","change"],i=function(){function i(){var n=arguments.length>0&&arguments[0]!==e?arguments[0]:document.createElement("div"),o=arguments.length>1&&arguments[1]!==e?arguments[1]:{};t(this,i),this._element=n,this._options=y(i.options(),o),this._ratio=null,this._output=null,this._input=null,this._preview=null,this._previewBlurred=null,this._blurredPreview=!1,this._cropper=null,this._straightCrop=null,this._previewWrapper=null,this._currentWindowSize={},this._btnGroup=null,this._maskFrame=null,this._dirty=!1,this._wrapperRotation=0,this._wrapperScale=1,this._init()}return d(i,[{key:"_init",value:function(){var t=this;this._element.className="slim-image-editor",this._container=_("div","slim-container"),this._wrapper=_("div","slim-wrapper"),this._stage=_("div","slim-stage"),this._container.appendChild(this._stage),this._cropper=new Mt,n.forEach(function(e){t._cropper.element.addEventListener(e,t)}),this._stage.appendChild(this._cropper.element),this._previewWrapper=_("div","slim-image-editor-preview slim-crop-preview"),this._previewBlurred=_("canvas","slim-crop-blur"),this._previewWrapper.appendChild(this._previewBlurred),this._wrapper.appendChild(this._previewWrapper),this._previewMask=_("div","slim-crop-mask"),this._preview=_("img"),this._previewMask.appendChild(this._preview),this._cropper.element.appendChild(this._previewMask),this._btnGroup=_("div","slim-editor-btn-group"),i.Buttons.forEach(function(e){var n=A(e),i=t._options["button"+n+"Label"],o=t._options["button"+n+"Title"],r=t._options["button"+n+"ClassName"],s=_("button","slim-editor-btn slim-btn-"+e+(r?" "+r:""));s.innerHTML=i,s.title=o||i,s.type="button",s.setAttribute("data-action",e),s.addEventListener("click",t),t._btnGroup.appendChild(s)}),this._utilsGroup=_("div","slim-editor-utils-group");var e=_("button","slim-editor-utils-btn slim-btn-rotate"+(this._options.buttonRotateClassName?" "+this._options.buttonRotateClassName:""));e.setAttribute("data-action","rotate"),e.addEventListener("click",this),e.title=this._options.buttonRotateTitle,this._utilsGroup.appendChild(e),this._container.appendChild(this._wrapper),this._element.appendChild(this._container),this._element.appendChild(this._utilsGroup),this._element.appendChild(this._btnGroup)}},{key:"dirty",value:function(){this._dirty=!0}},{key:"handleEvent",value:function(t){switch(t.type){case"click":this._onClick(t);break;case"change":this._onGridChange(t);break;case"input":this._onGridInput(t);break;case"keydown":this._onKeyDown(t);break;case"resize":this._onResize(t)}}},{key:"_onKeyDown",value:function(t){switch(t.keyCode){case b.RETURN:this._confirm();break;case b.ESC:this._cancel()}}},{key:"_onClick",value:function(t){t.target.classList.contains("slim-btn-cancel")&&this._cancel(),t.target.classList.contains("slim-btn-confirm")&&this._confirm(),t.target.classList.contains("slim-btn-rotate")&&this._rotate()}},{key:"_onResize",value:function(){this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._redraw(),this._redrawCropper(this._cropper.area),this._updateWrapperScale(),this._redrawWrapper()}},{key:"_redrawWrapper",value:function(){var t=u.createMatrix();t.scale(this._wrapperScale,this._wrapperScale),t.rotateZ(this._wrapperRotation*(Math.PI/180)),u.setElementTransform(this._previewWrapper,t)}},{key:"_onGridInput",value:function(){this._redrawCropMask()}},{key:"_onGridChange",value:function(){this._redrawCropMask()}},{key:"_updateWrapperRotation",value:function(){this._options.minSize.width>this._input.height||this._options.minSize.height>this._input.width?this._wrapperRotation+=180:this._wrapperRotation+=90}},{key:"_updateWrapperScale",value:function(){if(this._wrapperRotation%180!=0){var t=this._container.offsetWidth,e=this._container.offsetHeight,n=this._wrapper.offsetHeight,i=this._wrapper.offsetWidth,o=t/n;o*i>e&&(o=e/i),this._wrapperScale=o}else this._wrapperScale=1}},{key:"_cancel",value:function(){this._element.dispatchEvent(new CustomEvent("cancel"))}},{key:"_confirm",value:function(){var t=this._wrapperRotation%180!=0,e=this._cropper.area,n=pt(e,t?this._input.height:this._input.width,t?this._input.width:this._input.height);this._element.dispatchEvent(new CustomEvent("confirm",{detail:{rotation:this._wrapperRotation%360,crop:n}}))}},{key:"_rotate",value:function(){var t=this;this._updateWrapperRotation();var e=1===this.ratio||null===this._ratio?this._cropper.area:null;e&&E(e,90),this._updateWrapperScale(),this._hideCropper(),u(this._previewWrapper,{rotation:[0,0,this._wrapperRotation*(Math.PI/180)],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.8,springDeceleration:.65,complete:function(){t._redrawCropper(e),t._showCropper()}})}},{key:"_showCropper",value:function(){u(this._stage,{easing:"ease",duration:250,fromOpacity:0,opacity:1})}},{key:"_hideCropper",value:function(){u(this._stage,{duration:0,fromOpacity:0,opacity:0})}},{key:"_redrawCropMask",value:function(){var t=this,e=this._wrapperRotation%360,n=this._wrapperScale,i={width:this._wrapper.offsetWidth,height:this._wrapper.offsetHeight},o=this._cropper.area,r={x:0,y:0};0===e?(r.x=-o.x,r.y=-o.y):90===e?(r.x=-(1-o.y),r.y=-o.x):180===e?(r.x=-(1-o.x),r.y=-(1-o.y)):270===e&&(r.x=-o.y,r.y=-(1-o.x)),r.x*=i.width,r.y*=i.height,cancelAnimationFrame(this._maskFrame),this._maskFrame=requestAnimationFrame(function(){var i="scale("+n+") rotate("+-e+"deg) translate("+r.x+"px, "+r.y+"px);";t._preview.style.cssText="\n\t\t\t\t\twidth: "+t._previewSize.width+"px;\n\t\t\t\t\theight: "+t._previewSize.height+"px;\n\t\t\t\t\t-webkit-transform: "+i+";\n\t\t\t\t\ttransform: "+i+";\n\t\t\t\t"})}},{key:"open",value:function(t,e,n,i,o){var r=this;if(this._input&&!this._dirty&&this._ratio===e)return void o();this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._dirty=!1,this._wrapperRotation=i||0,this._blurredPreview=!1,this._ratio=e,this._previewSize=null,this._element.style.opacity="0",this._input=t;var s=i%180!=0,a=mt(n,s?t.height:t.width,s?t.width:t.height);this._preview.onload=function(){r._preview.onload=null,r._cropper.ratio=r.ratio,r._redraw(),r._redrawCropper(a),o(),r._element.style.opacity=""},this._preview.src=ct(this._input,Math.min(this._container.offsetWidth/this._input.width,this._container.offsetHeight/this._input.height)).toDataURL()}},{key:"_redrawCropper",value:function(t){var e=this._wrapperRotation%180!=0,n=e?this._input.height/this._input.width:this._input.width/this._input.height,i=this._wrapper.offsetWidth,o=this._wrapper.offsetHeight,r=this._container.offsetWidth,s=this._container.offsetHeight;this._updateWrapperScale();var a=this._wrapperScale*(e?o:i),l=this._wrapperScale*(e?i:o),c=e?.5*(r-a):this._wrapper.offsetLeft,u=e?.5*(s-l):this._wrapper.offsetTop;this._stage.style.cssText="\n\t\t\t\tleft:"+c+"px;\n\t\t\t\ttop:"+u+"px;\n\t\t\t\twidth:"+a+"px;\n\t\t\t\theight:"+l+"px;\n\t\t\t",this._cropper.limit(a,a/n),this._cropper.offset(c+this._element.offsetLeft,u+this._element.offsetTop),this._cropper.minWidth=this._wrapperScale*this._options.minSize.width*this.scalar,this._cropper.minHeight=this._wrapperScale*this._options.minSize.height*this.scalar;var h=null;h=t?{x:t.x*a,y:t.y*l,width:t.width*a,height:t.height*l}:et(a,l,this._ratio||l/a),this._cropper.resize(h.x,h.y,h.width,h.height)}},{key:"_redraw",value:function(){var t=this._input.height/this._input.width,e=this._container.clientWidth,n=this._container.clientHeight,i=e,o=i*t;o>n&&(o=n,i=o/t),i=Math.round(i),o=Math.round(o);var r=(e-i)/2,s=(n-o)/2;this._wrapper.style.cssText="\n\t\t\t\tleft:"+r+"px;\n\t\t\t\ttop:"+s+"px;\n\t\t\t\twidth:"+i+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._previewBlurred.style.cssText="\n\t\t\t\twidth:"+i+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._preview.style.cssText="\n\t\t\t\twidth:"+i+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._previewSize={width:i,height:o},this._blurredPreview||(this._previewBlurred.width=300,this._previewBlurred.height=this._previewBlurred.width*t,ht(this._input,this._previewBlurred),dt(this._previewBlurred),this._blurredPreview=!0)}},{key:"show",value:function(){var t=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){};this._currentWindowSize.width===window.innerWidth&&this._currentWindowSize.height===window.innerHeight||(this._redraw(),this._redrawCropper(this._cropper.area)),document.addEventListener("keydown",this),window.addEventListener("resize",this);var n=this._wrapperRotation*(Math.PI/180);u(this._previewWrapper,{fromRotation:[0,0,n],rotation:[0,0,n],fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,fromScale:[this._wrapperScale-.02,this._wrapperScale-.02],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.3,springDeceleration:.85,delay:450,complete:function(){}}),this._cropper.dirty?u(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:850,complete:function(){O(this),t()}}):u(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:1e3,complete:function(){O(this)}}),u(this._btnGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,delay:function(t){return 1e3+100*t},easing:"spring",springConstant:.3,springDeceleration:.85,complete:function(){O(this)}}),u(this._utilsGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.85,delay:1250,complete:function(){O(this)}})}},{key:"hide",value:function(){var t=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){};document.removeEventListener("keydown",this),window.removeEventListener("resize",this),u(this._utilsGroup.childNodes,{fromOpacity:1,opacity:0,duration:250}),u(this._btnGroup.childNodes,{fromOpacity:1,opacity:0,delay:200,duration:350}),u([this._stage,this._previewWrapper],{fromPosition:[0,0,0],position:[0,-250,0],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,delay:250,allDone:function(){t()}})}},{key:"destroy",value:function(){var t=this;kt(this._btnGroup.children).forEach(function(e){e.removeEventListener("click",t)}),n.forEach(function(e){t._cropper.element.removeEventListener(e,t)}),this._cropper.destroy(),this._element.parentNode&&Tt(this._element)}},{key:"showRotateButton",set:function(t){t?this._element.classList.remove("slim-rotation-disabled"):this._element.classList.add("slim-rotation-disabled")}},{key:"element",get:function(){return this._element}},{key:"ratio",get:function(){return"input"===this._ratio?this._input.height/this._input.width:this._ratio}},{key:"offset",get:function(){return this._element.getBoundingClientRect()}},{key:"original",get:function(){return this._input}},{key:"scalar",get:function(){return this._previewSize.width/this._input.width}}],[{key:"options",value:function(){return{buttonCancelClassName:null,buttonConfirmClassName:null,buttonCancelLabel:"Cancel",buttonConfirmLabel:"Confirm",buttonCancelTitle:null,buttonConfirmTitle:null,buttonRotateTitle:"Rotate",buttonRotateClassName:null,minSize:{width:0,height:0}}}}]),i}();return i.Buttons=["cancel","confirm"],i}(),Dt=function(){var n=["dragover","dragleave","drop"];return function(){function i(){var n=arguments.length>0&&arguments[0]!==e?arguments[0]:document.createElement("div");t(this,i),this._element=n,this._accept=[],this._allowURLs=!1,this._dragPath=null,this._init()}return d(i,[{key:"isValidDataTransfer",value:function(t){return t.files&&t.files.length?this.areValidDataTransferFiles(t.files):t.items&&t.items.length?this.areValidDataTransferItems(t.items):null}},{key:"areValidDataTransferFiles",value:function(t){return!this._accept.length||!t||-1!==this._accept.indexOf(t[0].type)}},{key:"areValidDataTransferItems",value:function(t){return!this._accept.length||!t||(this._allowURLs&&"string"===t[0].kind?null:t[0].type&&0===t[0].type.indexOf("application")?null:-1!==this._accept.indexOf(t[0].type))}},{key:"reset",value:function(){this._element.files=null}},{key:"_init",value:function(){var t=this;this._element.className="slim-file-hopper",n.forEach(function(e){t._element.addEventListener(e,t)})}},{key:"handleEvent",value:function(t){switch(t.type){case"dragover":this._onDragOver(t);break;case"dragleave":this._onDragLeave(t);break;case"drop":this._onDrop(t)}}},{key:"_onDrop",value:function(t){t.preventDefault();var e=null;if(this._allowURLs){var n=void 0,i=void 0;try{n=t.dataTransfer.getData("url"),i=t.dataTransfer.getData("text/html")}catch(t){}if(i&&i.length){var o=i.match(/src\s*=\s*"(.+?)"/);o&&(e=o[1])}else n&&n.length&&(e=n)}if(e)this._element.files=[{remote:e}];else{if(!this.isValidDataTransfer(t.dataTransfer))return this._element.dispatchEvent(new CustomEvent("file-invalid-drop")),void(this._dragPath=null);this._element.files=t.dataTransfer.files}this._element.dispatchEvent(new CustomEvent("file-drop",{detail:v(t)})),this._element.dispatchEvent(new CustomEvent("change")),this._dragPath=null}},{key:"_onDragOver",value:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var e=this.isValidDataTransfer(t.dataTransfer);if(null!==e&&!e)return t.dataTransfer.dropEffect="none",void this._element.dispatchEvent(new CustomEvent("file-invalid"));this._dragPath||(this._dragPath=[]),this._dragPath.push(v(t)),this._element.dispatchEvent(new CustomEvent("file-over",{detail:{x:M(this._dragPath).x,y:M(this._dragPath).y}}))}},{key:"_onDragLeave",value:function(t){this._element.dispatchEvent(new CustomEvent("file-out",{detail:v(t)})),this._dragPath=null}},{key:"destroy",value:function(){var t=this;n.forEach(function(e){t._element.removeEventListener(e,t)}),Tt(this._element),this._element=null,this._dragPath=null,this._accept=null}},{key:"element",get:function(){return this._element}},{key:"dragPath",get:function(){return this._dragPath}},{key:"enabled",get:function(){return""===this._element.style.display},set:function(t){this._element.style.display=t?"":"none"}},{key:"allowURLs",set:function(t){this._allowURLs=t}},{key:"accept",set:function(t){this._accept=t},get:function(){return this._accept}}]),i}()}(),It=function(){return function(){function n(){t(this,n),this._element=null,this._inner=null,
this._init()}return d(n,[{key:"_init",value:function(){this._element=_("div","slim-popover"),this._element.setAttribute("data-state","off"),document.body.appendChild(this._element)}},{key:"show",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){};this._element.setAttribute("data-state","on"),u(this._element,{fromOpacity:0,opacity:1,duration:350,complete:function(){O(t._element),n()}})}},{key:"hide",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){};u(this._element,{fromOpacity:1,opacity:0,duration:500,complete:function(){O(t._element),t._element.setAttribute("data-state","off"),n()}})}},{key:"destroy",value:function(){this._element.parentNode&&(this._element.parentNode.removeChild(this._element),this._element=null,this._inner=null)}},{key:"inner",set:function(t){this._inner=t,this._element.firstChild&&this._element.removeChild(this._element.firstChild),this._element.appendChild(this._inner)}}]),n}()}(),Ot=function(t,e){return t.split(e).map(function(t){return parseInt(t,10)})},Ht=function(t){return"DIV"===t.nodeName||"SPAN"===t.nodeName},Ft={AUTO:"auto",INITIAL:"initial",MANUAL:"manual"},Rt=["x","y","width","height"],Bt=["file-invalid-drop","file-invalid","file-drop","file-over","file-out","click"],Wt=["cancel","confirm"],$t=["remove","edit","download","upload"],zt=null,jt=0,qt='\n<div class="slim-loader">\n\t<svg>\n\t\t<path class="slim-loader-background" fill="none" stroke-width="3" />\n\t\t<path class="slim-loader-foreground" fill="none" stroke-width="3" />\n\t</svg>\n</div>\n',Ut=function(t){var e=t.split(",");return{width:parseInt(e[0],10),height:parseInt(e[1],10)}},Vt=function(){function n(i){var o=arguments.length>1&&arguments[1]!==e?arguments[1]:{};t(this,n),zt||(zt=new It),this._uid=jt++,this._options=y(n.options(),o),this._options.forceSize&&("string"==typeof this._options.forceSize&&(this._options.forceSize=Ut(this._options.forceSize)),this._options.ratio=this._options.forceSize.width+":"+this._options.forceSize.height,this._options.size=vt(this._options.forceSize)),"string"==typeof this._options.size&&(this._options.size=Ut(this._options.size)),"string"==typeof this._options.minSize&&(this._options.minSize=Ut(this._options.minSize)),this._originalElement=i,this._originalElementInner=i.innerHTML,this._originalElementAttributes=g(i),Ht(i)?this._element=i:(this._element=Et(i),this._element.className=i.className,i.className="",this._element.setAttribute("data-ratio",this._options.ratio)),this._element.classList.add("slim"),this._element.setAttribute("data-state","init"),this._state=[],this._timers=[],this._input=null,this._inputReference=null,this._output=null,this._ratio=null,this._isRequired=!1,this._imageHopper=null,this._imageEditor=null,this._progressEnabled=!0,this._data={},this._resetData(),this._drip=null,this._hasInitialImage=!1,this._initialCrop=this._options.crop,this._initialRotation=this._options.rotation&&this._options.rotation%90==0?this._options.rotation:null,this._isBeingDestroyed=!1,n.supported?this._init():this._fallback()}return d(n,[{key:"setRotation",value:function(t,e){if("number"==typeof t||t%90==0){this._data.actions.rotation=t;var n=this._data.actions.rotation%180!=0;if(this._data.input.image){var i=n?this._data.input.image.height:this._data.input.image.width,o=n?this._data.input.image.width:this._data.input.image.height;this._data.actions.crop=et(i,o,this._ratio),this._data.actions.crop.type=Ft.AUTO}this._data.input.image&&e&&this._manualTransform(e)}}},{key:"setSize",value:function(t,e){"string"==typeof t&&(t=Ut(t)),t&&t.width&&t.height&&(this._options.size=vt(t),this._data.actions.size=vt(t),this._data.input.image&&e&&this._manualTransform(e))}},{key:"setRatio",value:function(t,e){var n=this;if(t&&"string"==typeof t&&(this._options.ratio=t,this._isFixedRatio())){var i=Ot(this._options.ratio,":");this._ratio=i[1]/i[0],this._data.input.image&&e?this._cropAuto(function(t){n._scaleDropArea(n._ratio),e&&e(t)}):(this._data.input.image&&(this._data.actions.crop=et(this._data.input.image.width,this._data.input.image.height,this._ratio),this._data.actions.crop.type=Ft.AUTO),this._scaleDropArea(this._ratio),e&&e(null))}}},{key:"isAttachedTo",value:function(t){return this._element===t||this._originalElement===t}},{key:"isDetached",value:function(){return null===this._element.parentNode}},{key:"load",value:function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:{},i=arguments[2];"function"==typeof n?i=n:(this._options.crop=n.crop,this._options.rotation=n.rotation,this._initialRotation=n.rotation&&n.rotation%90==0?n.rotation:null,this._initialCrop=this._options.crop),this._load(t,i)}},{key:"upload",value:function(t){this._doUpload(t)}},{key:"download",value:function(){this._doDownload()}},{key:"remove",value:function(){return this._doRemove()}},{key:"destroy",value:function(){this._doDestroy()}},{key:"edit",value:function(){this._doEdit()}},{key:"crop",value:function(t,e){this._crop(t.x,t.y,t.width,t.height,e)}},{key:"containsImage",value:function(){return null!==this._data.input.name}},{key:"_canInstantEdit",value:function(){return this._options.instantEdit&&!this._isInitialising}},{key:"_getFileInput",value:function(){return this._element.querySelector("input[type=file]")}},{key:"_getInitialImage",value:function(){return this._element.querySelector("img")}},{key:"_getInputElement",value:function(){return this._getFileInput()||this._getInitialImage()}},{key:"_getRatioSpacerElement",value:function(){return this._element.children[0]}},{key:"_isImageOnly",value:function(){return"INPUT"!==this._input.nodeName}},{key:"_isFixedRatio",value:function(){return-1!==this._options.ratio.indexOf(":")}},{key:"_isAutoCrop",value:function(){return this._data.actions.crop.type===Ft.AUTO}},{key:"_toggleButton",value:function(t,e){St('.slim-btn[data-action="'+t+'"]',e,this._element)}},{key:"_clearState",value:function(){this._state=[],this._updateState()}},{key:"_removeState",value:function(t){this._state=this._state.filter(function(e){return e!==t}),this._updateState()}},{key:"_addState",value:function(t){D(t,this._state)||(this._state.push(t),this._updateState())}},{key:"_updateState",value:function(){this._element&&this._element.setAttribute("data-state",this._state.join(","))}},{key:"_resetData",value:function(){this._data={server:null,meta:vt(this._options.meta),input:{field:this._inputReference,name:null,type:null,width:0,height:0,file:null},output:{image:null,width:0,height:0},actions:{rotation:null,crop:null,size:null}},this._output&&(this._output.value=""),gt(this._getFileInput())}},{key:"_init",value:function(){var t=this;this._isInitialising=!0,this._addState("empty"),D("input",this._options.post)&&(this._inputReference="slim_input_"+this._uid),this._input=this._getInputElement(),this._input||(this._input=_("input"),this._input.type="file",this._element.appendChild(this._input)),this._isRequired=!0===this._input.required,this._output=this._element.querySelector("input[type=hidden]"),this._output||(this._output=_("input"),this._output.type="hidden",this._output.name=this._input.name||this._options.defaultInputName,this._element.appendChild(this._output)),this._input.removeAttribute("name");var e=_("div","slim-area"),n=this._getInitialImage(),i=(n||{}).src;i?this._hasInitialImage=!0:(this._initialCrop=null,this._initialRotation=null);var o='\n\t\t<div class="slim-result">\n\t\t\t<img class="in" style="opacity:0" '+(i?'src="'+i+'"':"")+'><img><img style="opacity:0">\n\t\t</div>';if(this._isImageOnly())e.innerHTML="\n\t\t\t\t"+qt+'\n\t\t\t\t\n<div class="slim-upload-status"></div>\n\n\t\t\t\t'+o+'\n\t\t\t\t<div class="slim-status"><div class="slim-label-loading">'+(this._options.labelLoading||"")+"</div></div>\n\t\t\t";else{D("input",this._options.post)&&(this._data.input.field=this._inputReference,this._options.service||(this._input.name=this._inputReference));var r=void 0;this._input.hasAttribute("accept")&&"image/*"!==this._input.getAttribute("accept")?r=this._input.accept.split(",").map(function(t){return t.trim()}).filter(function(t){return t.length>0}):(r=F(),this._input.setAttribute("accept",r.join(","))),this._imageHopper=new Dt,this._imageHopper.accept=r,this._imageHopper.allowURLs="string"==typeof this._options.fetcher,this._element.appendChild(this._imageHopper.element),Bt.forEach(function(e){t._imageHopper.element.addEventListener(e,t)}),e.innerHTML="\n\t\t\t\t"+qt+'\n\t\t\t\t\n<div class="slim-upload-status"></div>\n\n\t\t\t\t<div class="slim-drip"><span><span></span></span></div>\n\t\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+'</div><div class="slim-label-loading">'+(this._options.labelLoading||"")+"</div></div>\n\t\t\t\t"+o+"\n\t\t\t",this._input.addEventListener("change",this)}if(this._element.appendChild(e),this._btnGroup=_("div","slim-btn-group"),this._btnGroup.style.display="none",this._element.appendChild(this._btnGroup),$t.filter(function(e){return t._isButtonAllowed(e)}).forEach(function(e){var n=A(e),i=t._options["button"+n+"Label"],o=t._options["button"+n+"Title"]||i,r=t._options["button"+n+"ClassName"],s=_("button","slim-btn slim-btn-"+e+(r?" "+r:""));s.innerHTML=i,s.title=o,s.type="button",s.addEventListener("click",t),s.setAttribute("data-action",e),t._btnGroup.appendChild(s)}),this._isFixedRatio()){var s=Ot(this._options.ratio,":");this._ratio=s[1]/s[0],this._scaleDropArea(this._ratio)}this._updateProgress(.5),i?this._load(i,function(){t._onInit()}):this._onInit()}},{key:"_onInit",value:function(){var t=this;this._isInitialising=!1;var e=function(){var e=setTimeout(function(){t._options.didInit.apply(t,[t.data])},0);t._timers.push(e)};this._options.saveInitialImage&&this.containsImage()?this._options.service||this._save(function(){e()},!1):(this._options.service&&this.containsImage()&&this._toggleButton("upload",!1),e())}},{key:"_updateProgress",value:function(t){if(t=Math.min(.99999,t),this._element&&this._progressEnabled){var e=this._element.querySelector(".slim-loader");if(e){var n=e.offsetWidth,i=e.querySelectorAll("path"),o=parseInt(i[0].getAttribute("stroke-width"),10);i[0].setAttribute("d",At(.5*n,.5*n,.5*n-o,.9999)),i[1].setAttribute("d",At(.5*n,.5*n,.5*n-o,t))}}}},{key:"_startProgress",value:function(t){var e=this;if(this._element){this._progressEnabled=!1;var n=this._element.querySelector(".slim-loader");if(n){var i=n.children[0];this._stopProgressLoop(function(){n.removeAttribute("style"),i.removeAttribute("style"),e._progressEnabled=!0,e._updateProgress(0),e._progressEnabled=!1,u(i,{fromOpacity:0,opacity:1,duration:250,complete:function(){e._progressEnabled=!0,t&&t()}})})}}}},{key:"_stopProgress",value:function(){var t=this;if(this._element){var e=this._element.querySelector(".slim-loader");if(e){var n=e.children[0];this._updateProgress(1),u(n,{fromOpacity:1,opacity:0,duration:250,complete:function(){e.removeAttribute("style"),n.removeAttribute("style"),t._updateProgress(.5),t._progressEnabled=!1}})}}}},{key:"_startProgressLoop",value:function(){if(this._element){var t=this._element.querySelector(".slim-loader");if(t){var e=t.children[0];t.removeAttribute("style"),e.removeAttribute("style"),this._updateProgress(.5),u(t,"stop"),u(t,{rotation:[0,0,-2*Math.PI*1e3],easing:"linear",duration:1e6}),u(e,{fromOpacity:0,opacity:1,duration:250})}}}},{key:"_stopProgressLoop",value:function(t){if(this._element){var e=this._element.querySelector(".slim-loader");if(e){var n=e.children[0];u(n,{fromOpacity:parseFloat(n.style.opacity),opacity:0,duration:250,complete:function(){u(e,"stop"),e.removeAttribute("style"),n.removeAttribute("style"),t&&t()}})}}}},{key:"_isButtonAllowed",value:function(t){return"edit"===t?this._options.edit:"download"===t?this._options.download:"upload"===t?!!this._options.service&&!this._options.push:"remove"!==t||!this._isImageOnly()}},{key:"_fallback",value:function(){var t=_("div","slim-area");t.innerHTML='\n\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+"</div></div>\n\t\t",this._element.appendChild(t),this._throwError(this._options.statusNoSupport)}},{key:"handleEvent",value:function(t){switch(t.type){case"click":this._onClick(t);break;case"change":this._onChange(t);break;case"cancel":this._onCancel(t);break;case"confirm":this._onConfirm(t);break;case"file-over":this._onFileOver(t);break;case"file-out":this._onFileOut(t);break;case"file-drop":this._onDropFile(t);break;case"file-invalid":this._onInvalidFile(t);break;case"file-invalid-drop":this._onInvalidFileDrop(t)}}},{key:"_getIntro",value:function(){return this._element.querySelector(".slim-result .in")}},{key:"_getOutro",value:function(){return this._element.querySelector(".slim-result .out")}},{key:"_getInOut",value:function(){return this._element.querySelectorAll(".slim-result img")}},{key:"_getDrip",value:function(){return this._drip||(this._drip=this._element.querySelector(".slim-drip > span")),this._drip}},{key:"_throwError",value:function(t){this._addState("error"),this._element.querySelector(".slim-label").style.display="none";var e=this._element.querySelector(".slim-error");e||(e=_("div","slim-error"),this._element.querySelector(".slim-status").appendChild(e)),e.innerHTML=t}},{key:"_removeError",value:function(){this._removeState("error"),this._element.querySelector(".slim-label").style.display="";var t=this._element.querySelector(".slim-error");t&&t.parentNode.removeChild(t)}},{key:"_openFileDialog",value:function(){this._removeError(),this._input.click()}},{key:"_onClick",value:function(t){var e=this,n=t.target.classList,i=t.target;if(n.contains("slim-file-hopper"))return void this._openFileDialog();switch(i.getAttribute("data-action")){case"remove":this._options.willRemove.apply(this,[this.data,function(){e._doRemove()}]);break;case"edit":this._doEdit();break;case"download":this._doDownload();break;case"upload":this._doUpload()}}},{key:"_onInvalidFileDrop",value:function(){this._onInvalidFile(),this._removeState("file-over");var t=this._getDrip();u(t.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){O(t.firstChild)}})}},{key:"_onInvalidFile",value:function(){var t=this._imageHopper.accept.map(B),e=this._options.statusFileType.replace("$0",t.join(", "));this._throwError(e)}},{key:"_onImageTooSmall",value:function(){var t=this._options.statusImageTooSmall.replace("$0",this._options.minSize.width+" Ã "+this._options.minSize.height);this._throwError(t)}},{key:"_onOverWeightFile",value:function(){var t=this._options.statusFileSize.replace("$0",this._options.maxFileSize);this._throwError(t)}},{key:"_onRemoteURLProblem",value:function(t){this._throwError(t)}},{key:"_onFileOver",value:function(t){this._addState("file-over"),this._removeError();var e=this._getDrip(),n=u.createMatrix();n.translate(t.detail.x,t.detail.y,0),u.setElementTransform(e,n),1==this._imageHopper.dragPath.length&&(e.style.opacity=1,u(e.firstChild,{fromOpacity:0,opacity:.5,fromScale:[0,0],scale:[.5,.5],duration:150}))}},{key:"_onFileOut",value:function(t){this._removeState("file-over"),this._removeState("file-invalid"),this._removeError();var e=this._getDrip(),n=u.createMatrix();n.translate(t.detail.x,t.detail.y,0),u.setElementTransform(e,n),u(e.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){O(e.firstChild)}})}},{key:"_onDropFile",value:function(t){var e=this;this._removeState("file-over");var n=this._getDrip(),i=u.createMatrix();i.translate(t.detail.x,t.detail.y,0),u.setElementTransform(n,i);var o=this._imageHopper.dragPath.length,r=this._imageHopper.dragPath[o-Math.min(10,o)],s=t.detail.x-r.x,a=t.detail.y-r.y;u(n,{fromPosition:[t.detail.x,t.detail.y,0],position:[t.detail.x+s,t.detail.y+a,0],duration:200}),u(n.firstChild,{fromScale:[.5,.5],scale:[2,2],fromOpacity:1,opacity:0,duration:200,complete:function(){O(n.firstChild),e._load(t.target.files[0])}})}},{key:"_onChange",value:function(t){t.target.files.length&&this._load(t.target.files[0])}},{key:"_load",value:function(t,e){var n=this;if(!this._isBeingDestroyed){if(this.containsImage())return clearTimeout(this._replaceTimeout),void this._doRemove(function(){n._replaceTimeout=setTimeout(function(){n._load(t,e)},100)});this._removeState("empty"),this._addState("busy"),this._startProgressLoop(),this._imageHopper&&(this._imageHopper.enabled=!1),clearTimeout(this._loadTimeout);var i=function(){n._imageHopper&&(n._imageHopper.enabled=!0),n._removeState("loading"),n._removeState("busy"),n._addState("empty"),n._stopProgressLoop()};if("string"==typeof t)return void(X(t)?this._load(Z(t),e):(function(){clearTimeout(n._loadTimeout),n._loadTimeout=setTimeout(function(){n._isBeingDestroyed||(n._addState("loading"),u(n._element.querySelector(".slim-label-loading"),{fromOpacity:0,opacity:1,duration:250}))},500)}(),G(t,function(t){n._load(t,e)})));if(void 0!==t.remote&&this._options.fetcher)return void Y(this._options.fetcher,t.remote,function(t){i(),n._onRemoteURLProblem("<p>"+t+"</p>"),e&&e.apply(n,["remote-url-problem"])},function(t){n._load(t,e)});var o=t;if(this._imageHopper&&-1===this._imageHopper.accept.indexOf(o.type))return i(),this._onInvalidFile(),void(e&&e.apply(this,["file-invalid"]));if(o.size&&this._options.maxFileSize&&H(o.size)>this._options.maxFileSize)return i(),this._onOverWeightFile(),void(e&&e.apply(this,["file-too-big"]));this._imageEditor&&this._imageEditor.dirty(),this._data.input.name=q(o),this._data.input.type=U(o),this._data.input.size=o.size,this._data.input.file=o,tt(o,this._options.internalCanvasSize,function(t,i){var r=function(){n._imageHopper&&(n._imageHopper.enabled=!0),n._removeState("loading"),n._removeState("busy"),n._addState("empty"),n._stopProgressLoop(),n._resetData()};if(!t)return r(),void(e&&e.apply(n,["file-not-found"]));if(!ft(t,n._options.minSize))return r(),n._onImageTooSmall(),void(e&&e.apply(n,["image-too-small"]));var s=n._options.didLoad.apply(n,[o,t,i]);if(!0!==s)return r(),!1!==s&&n._throwError(s),void(e&&e.apply(n,[s]));n._removeState("loading");var a=function(t){n._imageHopper&&n._options.dropReplace&&(n._imageHopper.enabled=!0);var e=n._getIntro(),i={fromScale:[1.25,1.25],scale:[1,1],fromOpacity:0,opacity:1,complete:function(){O(e),e.style.opacity=1,t()}};n.isDetached()?i.duration=1:(i.easing="spring",i.springConstant=.3,i.springDeceleration=.7),n._canInstantEdit()&&(i.delay=500,i.duration=1,n._doEdit()),u(e,i)};n._loadCanvas(t,function(t){n._addState("preview"),a(function(){n._canInstantEdit()||t||n._showButtons(),t||(n._stopProgressLoop(),n._removeState("busy")),e&&e.apply(n,[null,n.data])})},function(){n._canInstantEdit()||n._showButtons(),n._removeState("busy")})})}}},{key:"_loadCanvas",value:function(t,e,n){var i=this;if(!this._isBeingDestroyed){this._data.input.image=t,this._data.input.width=t.width,this._data.input.height=t.height,this._initialRotation&&(this._data.actions.rotation=this._initialRotation,this._initialRotation=null);var o=this._data.actions.rotation%180!=0;this._isFixedRatio()||(this._initialCrop?this._ratio=this._initialCrop.height/this._initialCrop.width:this._ratio=o?t.width/t.height:t.height/t.width,this._scaleDropArea(this._ratio)),this._initialCrop?(this._data.actions.crop=vt(this._initialCrop),this._data.actions.crop.type=Ft.INITIAL,this._initialCrop=null):(this._data.actions.crop=et(o?t.height:t.width,o?t.width:t.height,this._ratio),this._data.actions.crop.type=Ft.AUTO),this._options.size&&(this._data.actions.size={width:this._options.size.width,height:this._options.size.height}),this._applyTransforms(t,function(t){var o=i._getIntro(),r=o.offsetWidth/t.width,s=!1;i._options.service&&i._options.push&&(i._hasInitialImage||i._canInstantEdit()||(s=!0,i._stopProgressLoop(function(){i._startProgress(function(){i._updateProgress(.1)})}))),i._canInstantEdit()||i._save(function(){i._isBeingDestroyed||s&&(i._stopProgress(),n())},s),o.src="",o.src=ct(t,r).toDataURL(),o.onload=function(){o.onload=null,i._isBeingDestroyed||e&&e(s)}})}}},{key:"_applyTransforms",value:function(t,e){var n=this,i=vt(this._data.actions);i.filters={sharpen:this._options.filterSharpen/100},nt(t,i,function(t){var i=t;(n._options.forceSize||n._options.size&&1==at(n._options.size,t))&&(i=_("canvas"),i.width=n._options.size.width,i.height=n._options.size.height,i.getContext("2d").drawImage(t,0,0,n._options.size.width,n._options.size.height)),n._data.output.width=i.width,n._data.output.height=i.height,n._data.output.image=i,n._onTransformCanvas(function(t){n._data=t,n._options.didTransform.apply(n,[n.data]),e(n._data.output.image)})})}},{key:"_onTransformCanvas",value:function(t){this._options.willTransform.apply(this,[this.data,t])}},{key:"_appendEditor",value:function(){var t=this;this._imageEditor||(this._imageEditor=new Nt(_("div"),{minSize:this._options.minSize,buttonConfirmClassName:this._options.buttonConfirmClassName,buttonCancelClassName:this._options.buttonCancelClassName,buttonRotateClassName:this._options.buttonRotateClassName,buttonConfirmLabel:this._options.buttonConfirmLabel,buttonCancelLabel:this._options.buttonCancelLabel,buttonRotateLabel:this._options.buttonRotateLabel,buttonConfirmTitle:this._options.buttonConfirmTitle,buttonCancelTitle:this._options.buttonCancelTitle,buttonRotateTitle:this._options.buttonRotateTitle}),Wt.forEach(function(e){t._imageEditor.element.addEventListener(e,t)}))}},{key:"_scaleDropArea",value:function(t){var e=this._getRatioSpacerElement();e&&this._element&&(e.style.marginBottom=100*t+"%",this._element.setAttribute("data-ratio","1:"+t))}},{key:"_onCancel",value:function(t){this._removeState("editor"),this._options.didCancel.apply(this),this._showButtons(),this._hideEditor(),this._options.instantEdit&&!this._hasInitialImage&&this._isAutoCrop()&&this._doRemove()}},{key:"_onConfirm",value:function(t){var e=this,n=this._options.service&&this._options.push;n?this._startProgress(function(){e._updateProgress(.1)}):this._startProgressLoop(),this._removeState("editor"),this._addState("busy"),this._output.value="",this._data.actions.rotation=t.detail.rotation,this._data.actions.crop=t.detail.crop,this._data.actions.crop.type=Ft.MANUAL,this._applyTransforms(this._data.input.image,function(t){e._options.didConfirm.apply(e,[e.data]);var i=e._getInOut(),o="out"===i[0].className?i[0]:i[1],r=o===i[0]?i[1]:i[0];o.className="in",o.style.opacity="0",o.style.zIndex="2",r.className="out",r.style.zIndex="1",o.src="",o.src=ct(t,o.offsetWidth/t.width).toDataURL(),o.onload=function(){o.onload=null,"free"===e._options.ratio&&(e._ratio=o.naturalHeight/o.naturalWidth,e._scaleDropArea(e._ratio)),e._hideEditor();var t=setTimeout(function(){e._showPreview(o,function(){e._save(function(t,i,o){e._toggleButton("upload",!0),n?e._stopProgress():e._stopProgressLoop(),e._removeState("busy"),e._showButtons()},n)})},250);e._timers.push(t)}})}},{key:"_cropAuto",value:function(){var t=arguments.length>0&&arguments[0]!==e?arguments[0]:function(t){},n=this._data.actions.rotation%180!=0,i=et(n?this._data.input.image.width:this._data.input.image.height,n?this._data.input.image.height:this._data.input.image.width,this._ratio);this._crop(i.x,i.y,i.width,i.height,t,Ft.AUTO)}},{key:"_crop",value:function(t,n,i,o){var r=arguments.length>4&&arguments[4]!==e?arguments[4]:function(t){},s=arguments.length>5&&arguments[5]!==e?arguments[5]:Ft.MANUAL;this._output.value="",this._data.actions.crop={x:t,y:n,width:i,height:o},this._data.actions.crop.type=s,this._manualTransform(r)}},{key:"_manualTransform",value:function(t){var e=this;this._startProgressLoop(),this._addState("busy"),this._applyTransforms(this._data.input.image,function(n){var i=e._getInOut(),o="out"===i[0].className?i[0]:i[1],r=o===i[0]?i[1]:i[0];o.className="in",o.style.opacity="1",o.style.zIndex="2",r.className="out",r.style.zIndex="0",o.src="",o.src=ct(n,o.offsetWidth/n.width).toDataURL(),o.onload=function(){o.onload=null,"free"===e._options.ratio&&(e._ratio=o.naturalHeight/o.naturalWidth,e._scaleDropArea(e._ratio));var n=e._options.service&&e._options.push,i=function(){e._save(function(i,o,r){n||e._stopProgressLoop(),e._removeState("busy"),t.apply(e,[e.data])},n)};n?e._startProgress(i):i()}})}},{key:"_save",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){},i=!(arguments.length>1&&arguments[1]!==e)||arguments[1];if(!this._isBeingDestroyed){var o=this.dataBase64;this._options.service||this._isInitialising&&!this._isImageOnly()||this._options.willSave.apply(this,[o,function(e){t._store(e),t._options.didSave.apply(t,[e])}]),this._isBeingDestroyed||(this._options.service&&i&&this._options.willSave.apply(this,[o,function(e){t._addState("upload"),t._imageHopper&&t._options.dropReplace&&(t._imageHopper.enabled=!1),t._upload(e,function(i,o){t._imageHopper&&t._options.dropReplace&&(t._imageHopper.enabled=!0),i||t._storeServerResponse(o),t._options.didUpload.apply(t,[i,e,o]),t._removeState("upload"),n(i,e,o)})}]),this._options.service&&i||n())}}},{key:"_storeServerResponse",value:function(t){this._isRequired&&(this._input.required=!1),this._data.server=t,this._output.value="object"===(void 0===t?"undefined":f(t))?JSON.stringify(this._data.server):t}},{key:"_store",value:function(t){this._isRequired&&(this._input.required=!1),this._output.value=JSON.stringify(t)}},{key:"_upload",value:function(t,e){var n=this,i=new FormData;if(null!==this._data.output.image&&!1===this._options.uploadBase64){var o=Z(t.output.image,t.output.name),r="slim_output_"+this._uid;t.output.image=null,t.output.field=r,i.append(r,o,t.output.name)}i.append(this._output.name,JSON.stringify(t)),D("input",this._options.post)&&i.append(this._inputReference,this._data.input.file,this._data.input.file.name);var s=this._element.querySelector(".slim-upload-status"),a=this._options.willRequest;I(this._options.service,i,a,function(t,e){n._updateProgress(Math.max(.1,t/e))},function(t){var i=setTimeout(function(){if(!n._isBeingDestroyed){s.innerHTML=n._options.statusUploadSuccess,s.setAttribute("data-state","success"),s.style.opacity=1;var t=setTimeout(function(){s.style.opacity=0},2e3);n._timers.push(t)}},250);n._timers.push(i),e(null,t)},function(t){var i="";i="file-too-big"===t?n._options.statusContentLength:n._options.didReceiveServerError.apply(n,[t,n._options.statusUnknownResponse]);var o=setTimeout(function(){s.innerHTML=i,s.setAttribute("data-state","error"),s.style.opacity=1},250);n._timers.push(o),e(t)})}},{key:"_showEditor",value:function(){zt.show(),this._imageEditor.show()}},{key:"_hideEditor",value:function(){this._imageEditor.hide();var t=setTimeout(function(){zt.hide()},250);this._timers.push(t)}},{key:"_showPreview",value:function(t,e){u(t,{fromPosition:[0,50,0],position:[0,0,0],fromScale:[1.5,1.5],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.7,complete:function(){O(t),e&&e()}})}},{key:"_hideResult",value:function(t){var e=this._getIntro();e&&u(e,{fromScale:[1,1],scale:[.5,.5],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,complete:function(){O(e),t&&t()}})}},{key:"_showButtons",value:function(t){if(this._btnGroup){this._btnGroup.style.display="";var e={fromScale:[.5,.5],scale:[1,1],fromPosition:[0,10,0],position:[0,0,0],fromOpacity:0,opacity:1,complete:function(){O(this)},allDone:function(){t&&t()}};this.isDetached()?e.duration=1:(e.delay=function(t){return 250+50*t},e.easing="spring",e.springConstant=.3,e.springDeceleration=.85),u(this._btnGroup.childNodes,e)}}},{key:"_hideButtons",value:function(t){var e=this;if(this._btnGroup){var n={fromScale:[1,1],scale:[.85,.85],fromOpacity:1,opacity:0,allDone:function(){e._btnGroup.style.display="none",t&&t()}};this.isDetached()?n.duration=1:(n.easing="spring",n.springConstant=.3,n.springDeceleration=.75),u(this._btnGroup.childNodes,n)}}},{key:"_hideStatus",value:function(){this._element.querySelector(".slim-upload-status").style.opacity=0}},{key:"_doEdit",value:function(){var t=this;this._data.input.image&&(this._addState("editor"),this._imageEditor||this._appendEditor(),this._imageEditor.showRotateButton=this._options.rotateButton,zt.inner=this._imageEditor.element,this._imageEditor.open(lt(this._data.input.image),"free"===this._options.ratio?null:this._ratio,this._data.actions.crop,this._data.actions.rotation,function(){t._showEditor(),t._hideButtons(),t._hideStatus()}))}},{key:"_doRemove",value:function(t){var e=this;if(!this._isImageOnly()){this._clearState(),this._addState("empty"),this._hasInitialImage=!1,this._imageHopper&&(this._imageHopper.enabled=!0),this._isRequired&&(this._input.required=!0);var n=this._getOutro();n&&(n.style.opacity="0");var i=this.data;this._resetData();var o=setTimeout(function(){e._isBeingDestroyed||(e._hideButtons(function(){e._toggleButton("upload",!0)}),e._hideStatus(),e._hideResult(),e._options.didRemove.apply(e,[i]),t&&t())},this.isDetached()?0:250);return this._timers.push(o),i}}},{key:"_doUpload",value:function(t){var e=this;this._data.input.image&&(this._addState("upload"),this._startProgress(),this._hideButtons(function(){e._toggleButton("upload",!1),e._save(function(n,i,o){e._removeState("upload"),e._stopProgress(),t&&t.apply(e,[n,i,o]),n&&e._toggleButton("upload",!0),e._showButtons()})}))}},{key:"_doDownload",value:function(){this._data.output.image&&_t(this._data,this._options.jpegCompression,this._options.forceType)}},{key:"_doDestroy",value:function(){function t(t,e){return 0!==e.filter(function(e){return t.name===e.name&&t.value===e.value}).length}var e=this;this._isBeingDestroyed=!0,this._timers.forEach(function(t){clearTimeout(t)}),this._timers=[],u(this._element,"detach"),this._imageHopper&&(Bt.forEach(function(t){e._imageHopper.element.removeEventListener(t,e)}),this._imageHopper.destroy(),this._imageHopper=null),this._imageEditor&&(Wt.forEach(function(t){e._imageEditor.element.removeEventListener(t,e)}),this._imageEditor.destroy(),this._imageEditor=null),kt(this._btnGroup.children).forEach(function(t){t.removeEventListener("click",e)}),this._input.removeEventListener("change",this),this._element!==this._originalElement&&this._element.parentNode&&this._element.parentNode.replaceChild(this._originalElement,this._element),this._originalElement.innerHTML=this._originalElementInner;var n=g(this._originalElement);n.forEach(function(n){t(n,e._originalElementAttributes)||e._originalElement.removeAttribute(n.name)}),this._originalElementAttributes.forEach(function(i){t(i,n)||e._originalElement.setAttribute(i.name,i.value)}),jt=Math.max(0,jt-1),zt&&0===jt&&(zt.destroy(),zt=null),this._originalElement=null,this._element=null,this._input=null,this._output=null,this._btnGroup=null,this._options=null}},{key:"dataBase64",get:function(){return Ct(this._data,this._options.post,this._options.jpegCompression,this._options.forceType,null!==this._options.service)}},{key:"data",get:function(){return bt(this._data)}},{key:"element",get:function(){return this._element}},{key:"service",set:function(t){this._options.service=t}},{key:"size",set:function(t){this.setSize(t,null)}},{key:"rotation",set:function(t){this.setRotation(t,null)}},{key:"ratio",set:function(t){this.setRatio(t,null)}}],[{key:"options",value:function(){var t={edit:!0,instantEdit:!1,uploadBase64:!1,meta:{},ratio:"free",size:null,rotation:null,crop:null,post:["output","actions"],service:null,filterSharpen:0,push:!1,defaultInputName:"slim[]",minSize:{width:100,height:100},maxFileSize:null,jpegCompression:null,download:!1,saveInitialImage:!1,forceType:!1,forceSize:null,dropReplace:!0,fetcher:null,internalCanvasSize:{width:4096,height:4096},rotateButton:!0,label:"<p>Drop your image here</p>",labelLoading:"<p>Loading image...</p>",statusFileType:"<p>Invalid file type, expects: $0.</p>",statusFileSize:"<p>File is too big, maximum file size: $0 MB.</p>",statusNoSupport:"<p>Your browser does not support image cropping.</p>",statusImageTooSmall:"<p>Image is too small, minimum size is: $0 pixels.</p>",
statusContentLength:'<span class="slim-upload-status-icon"></span> The file is probably too big',statusUnknownResponse:'<span class="slim-upload-status-icon"></span> An unknown error occurred',statusUploadSuccess:'<span class="slim-upload-status-icon"></span> Saved',didInit:function(t){},didLoad:function(t,e,n){return!0},didSave:function(t){},didUpload:function(t,e,n){},didReceiveServerError:function(t,e){return e},didRemove:function(t){},didTransform:function(t){},didConfirm:function(t){},didCancel:function(){},willTransform:function(t,e){e(t)},willSave:function(t,e){e(t)},willRemove:function(t,e){e()},willRequest:function(t){}};return $t.concat(Nt.Buttons).concat("rotate").forEach(function(e){var n=A(e);t["button"+n+"ClassName"]=null,t["button"+n+"Label"]=n,t["button"+n+"Title"]=n}),t}}]),n}();return function(){function t(t){return t?"<p>"+t+"</p>":null}function e(t){var e=window,n=t.split(".");return n.forEach(function(t,i){e[n[i]]&&(e=e[n[i]])}),e!==window?e:null}var n=[],i=function(t){for(var e=0,i=n.length;e<i;e++)if(n[e].isAttachedTo(t))return e;return-1},o=function(t){return t},r=function(t){return"true"===t},s=function(t){return!t||"true"===t},a=function(e){return t(e)},l=function(t){return t?e(t):null},c=function(t){if(!t)return null;var e=Ot(t,",");return{width:e[0],height:e[1]}},u=function(t){return t?parseFloat(t):null},h=function(t){return t?parseInt(t,10):null},d=function(t){if(!t)return null;var e={};return t.split(",").map(function(t){return parseInt(t,10)}).forEach(function(t,n){e[Rt[n]]=t}),e},f={download:r,edit:s,instantEdit:r,minSize:c,size:c,forceSize:c,internalCanvasSize:c,service:function(t){return void 0===t?null:t},fetcher:function(t){return void 0===t?null:t},push:r,rotation:function(t){return void 0===t?null:parseInt(t,10)},crop:d,post:function(t){return t?t.split(",").map(function(t){return t.trim()}):null},defaultInputName:o,ratio:function(t){return t||null},maxFileSize:u,filterSharpen:h,jpegCompression:h,uploadBase64:r,forceType:o,dropReplace:s,saveInitialImage:r,rotateButton:s,label:a,labelLoading:a};["FileSize","FileType","NoSupport","ImageTooSmall"].forEach(function(t){f["status"+t]=a}),["ContentLength","UnknownResponse","UploadSuccess"].forEach(function(t){f["status"+t]=o}),["Init","Load","Save","Upload","Remove","Transform","ReceiveServerError","Confirm","Cancel"].forEach(function(t){f["did"+t]=l}),["Transform","Save","Remove","Request"].forEach(function(t){f["will"+t]=l});var m=["ClassName","Label","Title"];$t.concat(Nt.Buttons).concat("rotate").forEach(function(t){var e=A(t);m.forEach(function(t){f["button"+e+t]=o})}),Vt.supported=function(){return!("[object OperaMini]"===Object.prototype.toString.call(window.operamini)||void 0===window.addEventListener||void 0===window.FileReader||void 0===window.URL||void 0===window.URL.createObjectURL)}(),Vt.parse=function(t){var e,n,i,o=[];for(e=t.querySelectorAll(".slim:not([data-state])"),i=e.length;i--;)n=e[i],o.push(Vt.create(n,Vt.getOptionsFromAttributes(n)));return o},Vt.getOptionsFromAttributes=function(t){var e=p(t),n={meta:{}};for(var i in e){var o=f[i],r=e[i];o?(r=o(r),r=null===r?vt(Vt.options()[i]):r,n[i]=r):0===i.indexOf("meta")&&(n.meta[P(i.substr(4))]=r)}return n},Vt.find=function(t){var e=n.filter(function(e){return e.isAttachedTo(t)});return e?e[0]:null},Vt.create=function(t,e){if(!Vt.find(t)){e||(e=Vt.getOptionsFromAttributes(t));var i=new Vt(t,e);return n.push(i),i}},Vt.destroy=function(t){var e=i(t);return!(e<0||(n[e].destroy(),n.splice(e,1),0))}}(),Vt}();t.fn.slim=function(){var t=i(arguments);if(o(t))return this.each(function(){l.create(this,t[0])});var e=t.shift();switch(e){case"supported":return l.supported;case"destroy":return this.each(function(){l.destroy(this)});case"parse":return this.each(function(){l.parse(this)});default:var n=[];return this.each(function(){var i=l.find(this);i&&(a(i,e)?n.push(i[e].apply(i,t)):r(i,e)?n.push(i[e]):s(i,e)&&n.push(i[e]=t[0]))}),n}}}}(window.jQuery)},function(t,e,n){!function(t){!function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};t.defineMode("xml",function(i,o){function r(t,e){function n(n){return e.tokenize=n,n(t,e)}var i=t.next();if("<"==i)return t.eat("!")?t.eat("[")?t.match("CDATA[")?n(l("atom","]]>")):null:t.match("--")?n(l("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(c(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=l("meta","?>"),"meta"):(T=t.eat("/")?"closeTag":"openTag",e.tokenize=s,"tag bracket");if("&"==i){var o;return o=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),o?"atom":"error"}return t.eatWhile(/[^&<]/),null}function s(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=r,T=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return T="equals",null;if("<"==n){e.tokenize=r,e.state=f,e.tagName=e.tagStart=null;var i=e.tokenize(t,e);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(e.tokenize=a(n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(t){var e=function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=s;break}return"string"};return e.isInAttribute=!0,e}function l(t,e){return function(n,i){for(;!n.eol();){if(n.match(e)){i.tokenize=r;break}n.next()}return t}}function c(t){return function(e,n){for(var i;null!=(i=e.next());){if("<"==i)return n.tokenize=c(t+1),n.tokenize(e,n);if(">"==i){if(1==t){n.tokenize=r;break}return n.tokenize=c(t-1),n.tokenize(e,n)}}return"meta"}}function u(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,(_.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function h(t){t.context&&(t.context=t.context.prev)}function d(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!_.contextGrabbers.hasOwnProperty(n)||!_.contextGrabbers[n].hasOwnProperty(e))return;h(t)}}function f(t,e,n){return"openTag"==t?(n.tagStart=e.column(),p):"closeTag"==t?m:f}function p(t,e,n){return"word"==t?(n.tagName=e.current(),E="tag",y):(E="error",p)}function m(t,e,n){if("word"==t){var i=e.current();return n.context&&n.context.tagName!=i&&_.implicitlyClosed.hasOwnProperty(n.context.tagName)&&h(n),n.context&&n.context.tagName==i||!1===_.matchClosing?(E="tag",g):(E="tag error",v)}return E="error",v}function g(t,e,n){return"endTag"!=t?(E="error",g):(h(n),f)}function v(t,e,n){return E="error",g(t,e,n)}function y(t,e,n){if("word"==t)return E="attribute",b;if("endTag"==t||"selfcloseTag"==t){var i=n.tagName,o=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||_.autoSelfClosers.hasOwnProperty(i)?d(n,i):(d(n,i),n.context=new u(n,i,o==n.indented)),f}return E="error",y}function b(t,e,n){return"equals"==t?w:(_.allowMissing||(E="error"),y(t,e,n))}function w(t,e,n){return"string"==t?x:"word"==t&&_.allowUnquoted?(E="string",y):(E="error",y(t,e,n))}function x(t,e,n){return"string"==t?x:y(t,e,n)}var C=i.indentUnit,_={},S=o.htmlMode?e:n;for(var k in S)_[k]=S[k];for(var k in o)_[k]=o[k];var T,E;return r.isInText=!0,{startState:function(t){var e={tokenize:r,state:f,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;T=null;var n=e.tokenize(t,e);return(n||T)&&"comment"!=n&&(E=null,e.state=e.state(T||n,t,e),E&&(n="error"==E?n+" error":E)),n},indent:function(e,n,i){var o=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+C;if(o&&o.noIndent)return t.Pass;if(e.tokenize!=s&&e.tokenize!=r)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==_.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+C*(_.multilineTagIndentFactor||1);if(_.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var a=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(a&&a[1])for(;o;){if(o.tagName==a[2]){o=o.prev;break}if(!_.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(a)for(;o;){var l=_.contextGrabbers[o.tagName];if(!l||!l.hasOwnProperty(a[2]))break;o=o.prev}for(;o&&o.prev&&!o.startOfLine;)o=o.prev;return o?o.indent+C:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:_.htmlMode?"html":"xml",helperType:_.htmlMode?"html":"xml",skipAttribute:function(t){t.state==w&&(t.state=y)}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n(6))}()},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){var e="ui-effects-animated",n=t;return t.effects={effect:{}},function(t,e){function n(t,e,n){var i=u[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function i(e){var n=l(),i=n._rgba=[];return e=e.toLowerCase(),f(a,function(t,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";if(a)return r=n[l](a),n[c[l].cache]=r[c[l].cache],i=n._rgba=r._rgba,!1}),i.length?("0,0,0,0"===i.join()&&t.extend(i,r.transparent),n):r[e]}function o(t,e,n){return n=(n+1)%1,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var r,s=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,n,i,o){return new t.Color.fn.parse(e,n,i,o)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=l.support={},d=t("<p>")[0],f=t.each;d.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=d.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(e,o,s,a){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(o),o=void 0);var u=this,h=t.type(e),d=this._rgba=[];return void 0!==o&&(e=[e,o,s,a],h="array"),"string"===h?this.parse(i(e)||r._default):"array"===h?(f(c.rgba.props,function(t,i){d[i.idx]=n(e[i.idx],i)}),this):"object"===h?(e instanceof l?f(c,function(t,n){e[n.cache]&&(u[n.cache]=e[n.cache].slice())}):f(c,function(i,o){var r=o.cache;f(o.props,function(t,i){if(!u[r]&&o.to){if("alpha"===t||null==e[t])return;u[r]=o.to(u._rgba)}u[r][i.idx]=n(e[t],i,!0)}),u[r]&&t.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,o.from&&(u._rgba=o.from(u[r])))}),this):void 0},is:function(t){var e=l(t),n=!0,i=this;return f(c,function(t,o){var r,s=e[o.cache];return s&&(r=i[o.cache]||o.to&&o.to(i._rgba)||[],f(o.props,function(t,e){if(null!=s[e.idx])return n=s[e.idx]===r[e.idx]})),n}),n},_space:function(){var t=[],e=this;return f(c,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=l(t),o=i._space(),r=c[o],s=0===this.alpha()?l("transparent"):this,a=s[r.cache]||r.to(s._rgba),h=a.slice();return i=i[r.cache],f(r.props,function(t,o){var r=o.idx,s=a[r],l=i[r],c=u[o.type]||{};null!==l&&(null===s?h[r]=l:(c.mod&&(l-s>c.mod/2?s+=c.mod:s-l>c.mod/2&&(s-=c.mod)),h[r]=n((l-s)*e+s,o)))}),this[o](h)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=l(e)._rgba;return l(t.map(n,function(t,e){return(1-i)*o[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(i,o,r),l=Math.min(i,o,r),c=a-l,u=a+l,h=.5*u;return e=l===a?0:i===a?60*(o-r)/c+360:o===a?60*(r-i)/c+120:60*(i-o)/c+240,n=0===c?0:h<=.5?c/u:c/(2-u),[Math.round(e)%360,n,h,null==s?1:s]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],s=i<=.5?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*o(a,s,e+1/3)),Math.round(255*o(a,s,e)),Math.round(255*o(a,s,e-1/3)),r]},f(c,function(e,i){var o=i.props,r=i.cache,a=i.to,c=i.from;l.fn[e]=function(e){if(a&&!this[r]&&(this[r]=a(this._rgba)),void 0===e)return this[r].slice();var i,s=t.type(e),u="array"===s||"object"===s?e:arguments,h=this[r].slice();return f(o,function(t,e){var i=u["object"===s?t:e.idx];null==i&&(i=h[e.idx]),h[e.idx]=n(i,e)}),c?(i=l(c(h)),i[r]=h,i):l(h)},f(o,function(n,i){l.fn[n]||(l.fn[n]=function(o){var r,a=t.type(o),l="alpha"===n?this._hsla?"hsla":"rgba":e,c=this[l](),u=c[i.idx];return"undefined"===a?u:("function"===a&&(o=o.call(this,u),a=t.type(o)),null==o&&i.empty?this:("string"===a&&(r=s.exec(o))&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1)),c[i.idx]=o,this[l](c)))})})}),l.hook=function(e){var n=e.split(" ");f(n,function(e,n){t.cssHooks[n]={set:function(e,o){var r,s,a="";if("transparent"!==o&&("string"!==t.type(o)||(r=i(o)))){if(o=l(r||o),!h.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(t){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{e.style[n]=o}catch(t){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=l(e.elem,n),e.end=l(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(n),function(){function e(e){var n,i,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)n=o[i],"string"==typeof o[n]&&(r[t.camelCase(n)]=o[n]);else for(n in o)"string"==typeof o[n]&&(r[n]=o[n]);return r}function i(e,n){var i,o,s={};for(i in n)o=n[i],e[i]!==o&&(r[i]||!t.fx.step[i]&&isNaN(parseFloat(o))||(s[i]=o));return s}var o=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(n.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(n,r,s,a){var l=t.speed(r,s,a);return this.queue(function(){var r,s=t(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){return{el:t(this),start:e(this)}}),r=function(){t.each(o,function(t,e){n[e]&&s[e+"Class"](n[e])})},r(),c=c.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var e=this,n=t.Deferred(),i=t.extend({},l,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,i),n.promise()}),t.when.apply(t,c.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(s[0])})})},t.fn.extend({addClass:function(e){return function(n,i,o,r){return i?t.effects.animateClass.call(this,{add:n},i,o,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,i,o,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},i,o,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,i,o,r,s){return"boolean"==typeof i||void 0===i?o?t.effects.animateClass.call(this,i?{add:n}:{remove:n},o,r,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},i,o,r)}}(t.fn.toggleClass),switchClass:function(e,n,i,o,r){return t.effects.animateClass.call(this,{add:n,remove:e},i,o,r)}})}(),function(){function n(e,n,i,o){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(o=i,i=n,n={}),t.isFunction(i)&&(o=i,i=null),n&&t.extend(e,n),i=i||n.duration,e.duration=t.fx.off?0:"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default,e.complete=o||n.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]||!!t.isFunction(e)||"object"==typeof e&&!e.effect}function o(t,e){var n=e.outerWidth(),i=e.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,r=o.exec(t)||["",0,n,i,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?n:parseFloat(r[2]),bottom:"auto"===r[3]?i:parseFloat(r[3]),left:parseFloat(r[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(n){return function(i){return!!t(i).data(e)||n(i)}}(t.expr.filters.animated)),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data("ui-effects-"+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,o=e.length;i<o;i++)null!==e[i]&&(n=t.data("ui-effects-"+e[i]),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return e.wrap(i),(e[0]===r||t.contains(e[0],r))&&t(r).trigger("focus"),i=e.parent(),"static"===e.css("position")?(i.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,n,i){return i||(i=n,n="effect"),t.effects.effect[e]=i,t.effects.effect[e].mode=n,i},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,o="vertical"!==n?(e||100)/100:1;return{height:t.height()*o,width:t.width()*i,outerHeight:t.outerHeight()*o,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();e>1&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data("ui-effects-style",t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data("ui-effects-style")||"",t.removeData("ui-effects-style")},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(e){var n,i=e.css("position"),o=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",n=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data("ui-effects-placeholder",n)),e.css({position:i,left:o.left,top:o.top}),n},removePlaceholder:function(t){var e="ui-effects-placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,n,i,o){return o=o||{},t.each(n,function(t,n){var r=e.cssUnit(n);r[0]>0&&(o[n]=r[0]*i+r[1])}),o}}),t.fn.extend({effect:function(){function i(n){function i(){l.removeData(e),t.effects.cleanUp(l),"hide"===o.mode&&l.hide(),a()}function a(){t.isFunction(c)&&c.call(l[0]),t.isFunction(n)&&n()}var l=t(this);o.mode=h.shift(),!1===t.uiBackCompat||s?"none"===o.mode?(l[u](),a()):r.call(l[0],o,i):(l.is(":hidden")?"hide"===u:"show"===u)?(l[u](),a()):r.call(l[0],o,a)}var o=n.apply(this,arguments),r=t.effects.effect[o.effect],s=r.mode,a=o.queue,l=a||"fx",c=o.complete,u=o.mode,h=[],d=function(n){var i=t(this),o=t.effects.mode(i,u)||s;i.data(e,!0),h.push(o),s&&("show"===o||o===s&&"hide"===o)&&i.show(),s&&"none"===o||t.effects.saveStyle(i),t.isFunction(n)&&n()};return t.fx.off||!r?u?this[u](o.duration,c):this.each(function(){c&&c.call(this)}):!1===a?this.each(d).each(i):this.queue(l,d).queue(l,i)},show:function(t){return function(e){if(i(e))return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(t.fn.show),hide:function(t){return function(e){if(i(e))return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(t.fn.hide),toggle:function(t){return function(e){if(i(e)||"boolean"==typeof e)return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),i=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):o(this.css("clip"),this)},transfer:function(e,n){var i=t(this),o=t(e.to),r="fixed"===o.css("position"),s=t("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},h=i.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:h.top-a,left:h.left-l,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){d.remove(),t.isFunction(n)&&n()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=o(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?n(2*t)/2:1-n(-2*t+2)/2}})}(),t.effects})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1),n(26)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.effects.define("slide","show",function(e,n){var i,o,r=t(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h=e.distance||r["top"===c?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(r),i=r.cssClip(),o=r.position()[c],d[c]=(u?-1:1)*h+o,d.clip=r.cssClip(),d.clip[s[l][1]]=d.clip[s[l][0]],"show"===a&&(r.cssClip(d.clip),r.css(c,d[c]),d.clip=i,d[c]=o),r.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:n})})})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui.plugin={add:function(e,n,i){var o,r=t.ui[e].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(t,e,n,i){var o,r=t.plugins[e];if(r&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,n)}}})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(10),n(7),n(28),n(29),n(30),n(9),n(1),n(5)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(n).length||t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",e)&&n._clear()
}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),o=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=t(o.containment),void((i=n[0])&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var o=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n,i){var o=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))})},drag:function(e,n,i){t.each(i.sortables,function(){var o=!1,r=this;r.positionAbs=i.positionAbs,r.helperProportions=i.helperProportions,r.offset.click=i.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,i._parent=n.helper.parent(),r.currentItem=n.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return n.helper[0]},e.target=r.currentItem[0],r._mouseCapture(e,!0),r._mouseStart(e,!0,!0),r.offset.click.top=i.offset.click.top,r.offset.click.left=i.offset.click.left,r.offset.parent.left-=i.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=i.offset.parent.top-r.offset.parent.top,i._trigger("toSortable",e),i.dropped=r.element,t.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,r.fromOutside=i),r.currentItem&&(r._mouseDrag(e),n.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",e,r._uiHash(r)),r._mouseStop(e,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var o=t("body"),r=i.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(e,n,i){var o=i.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var o=t(n.helper),r=i.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(e,n,i){var o=i.options;o._opacity&&t(n.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var o=i.options,r=!1,s=i.scrollParentNotHidden[0],a=i.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+s.offsetHeight-e.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:e.pageY-i.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+s.offsetWidth-e.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:e.pageX-i.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(a).scrollTop()<o.scrollSensitivity?r=t(a).scrollTop(t(a).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<o.scrollSensitivity&&(r=t(a).scrollTop(t(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(a).scrollLeft()<o.scrollSensitivity?r=t(a).scrollLeft(t(a).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<o.scrollSensitivity&&(r=t(a).scrollLeft(t(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var o=i.options;i.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,i){var o,r,s,a,l,c,u,h,d,f,p=i.options,m=p.snapTolerance,g=n.offset.left,v=g+i.helperProportions.width,y=n.offset.top,b=y+i.helperProportions.height;for(d=i.snapElements.length-1;d>=0;d--)l=i.snapElements[d].left-i.margins.left,c=l+i.snapElements[d].width,u=i.snapElements[d].top-i.margins.top,h=u+i.snapElements[d].height,v<l-m||g>c+m||b<u-m||y>h+m||!t.contains(i.snapElements[d].item.ownerDocument,i.snapElements[d].item)?(i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(o=Math.abs(u-b)<=m,r=Math.abs(h-y)<=m,s=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),f=o||r||s||a,"outer"!==p.snapMode&&(o=Math.abs(u-y)<=m,r=Math.abs(h-b)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[d].snapping&&(o||r||s||a||f)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=o||r||s||a||f)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var o,r=i.options,s=t.makeArray(t(r.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});s.length&&(o=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var o=t(n.helper),r=i.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(e,n,i){var o=i.options;o._zIndex&&t(n.helper).css("zIndex",o._zIndex)}}),t.ui.draggable})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(10),n(7),n(8),n(9),n(1),n(5)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var i=null,o=!1,r=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,r.widgetName+"-item")===r)return i=t(this),!1}),t.data(e.target,r.widgetName+"-item")===r&&(i=t(e.target)),!i||this.options.handle&&!n&&(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(o=!0)}),!o)||(this.currentItem=i,this._removeCurrentsFromItems(),0)))},_mouseStart:function(e,n,i){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),e.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],o=i.item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||t.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>a&&i+c<l,d="y"===this.options.axis||e+u>r&&e+u<s,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!i||!o)&&(e=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function n(){a.push(this)}var i,o,r,s,a=[],l=[],c=this._connectWith();if(c&&e)for(i=c.length-1;i>=0;i--)for(r=t(c[i],this.document[0]),o=r.length-1;o>=0;o--)(s=t.data(r[o],this.widgetFullName))&&s!==this&&!s.options.disabled&&l.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,o,r,s,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(o=t(d[n],this.document[0]),i=o.length-1;i>=0;i--)(r=t.data(o[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(h.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(n=h.length-1;n>=0;n--)for(s=h[n][1],a=h[n][0],i=0,c=a.length;i<c;i++)l=t(a[i]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,o,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+i+">",e.document[0]);return e._addClass(o,"ui-sortable-placeholder",n||e.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===i?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(o)):"tr"===i?e._createTrPlaceholder(e.currentItem,o):"img"===i&&o.attr("src",e.currentItem.attr("src")),n||o.css("visibility","hidden"),o},update:function(t,o){n&&!i.forcePlaceholderSize||(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each(function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(e){var n,i,o,r,s,a,l,c,u,h,d=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&t.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(o=1e4,r=null,u=d.floating||this._isFloating(this.currentItem),s=u?"left":"top",a=u?"width":"height",h=u?"pageX":"pageY",i=this.items.length-1;i>=0;i--)t.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[s],c=!1,e[h]-l>this.items[i][a]/2&&(c=!0),Math.abs(e[h]-l)<o&&(o=Math.abs(e[h]-l),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[f].element,!0),this._trigger("change",e,this._uiHash()),this.containers[f]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),
left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],n=t(o.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(e){var n,i,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||o.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<o.length;i++)o[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})})},function(t,e,n){(function(i){var o;"classList"in document.createElement("_")||function(t){"use strict";if("Element"in t){var e=t.Element.prototype,n=Object,i=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},s=function(t,e){if(""===e)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},a=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],o=0,r=n.length;o<r;o++)this.push(n[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=a.prototype=[],c=function(){return new a(this)};if(r.prototype=Error.prototype,l.item=function(t){return this[t]||null},l.contains=function(t){return t+="",-1!==s(this,t)},l.add=function(){var t,e=arguments,n=0,i=e.length,o=!1;do{t=e[n]+"",-1===s(this,t)&&(this.push(t),o=!0)}while(++n<i);o&&this._updateClassName()},l.remove=function(){var t,e,n=arguments,i=0,o=n.length,r=!1;do{for(t=n[i]+"",e=s(this,t);-1!==e;)this.splice(e,1),r=!0,e=s(this,t)}while(++i<o);r&&this._updateClassName()},l.toggle=function(t,e){t+="";var n=this.contains(t),i=n?!0!==e&&"remove":!1!==e&&"add";return i&&this[i](t),!0===e||!1===e?e:!n},l.toString=function(){return this.join(" ")},n.defineProperty){var u={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",u)}catch(t){-2146823252===t.number&&(u.enumerable=!1,n.defineProperty(e,"classList",u))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",c)}}(self),function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},o=n.prototype,r=i.prototype,s=t.FileReaderSync,a=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,u=t.URL||t.webkitURL||t,h=u.createObjectURL,d=u.revokeObjectURL,f=u,p=t.btoa,m=t.atob,g=t.ArrayBuffer,v=t.Uint8Array;for(i.fake=r.fake=!0;c--;)a.prototype[l[c]]=c+1;return u.createObjectURL||(f=t.URL=function(t){var e,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/),n.origin=e&&e[1])),n}),f.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof i?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):h?h.call(u,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&d&&d.call(u,t)},o.append=function(t){var n=this.data;if(v&&(t instanceof g||t instanceof v)){for(var o="",r=new v(t),l=0,c=r.length;l<c;l++)o+=String.fromCharCode(r[l]);n.push(o)}else if("Blob"===e(t)||"File"===e(t)){if(!s)throw new a("NOT_READABLE_ERR");var u=new s;n.push(u.readAsBinaryString(t))}else t instanceof i?"base64"===t.encoding&&m?n.push(m(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},o.getBlob=function(t){return arguments.length||(t=null),new i(this.data.join(""),t,"raw")},o.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,e,n){var o=arguments.length;return o<3&&(n=null),new i(this.data.slice(t,o>1?e:this.data.length),n,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,n){var i=n?n.type||"":"",o=new e;if(t)for(var r=0,s=t.length;r<s;r++)Uint8Array&&t[r]instanceof Uint8Array?o.append(t[r].buffer):o.append(t[r]);var a=o.getBlob(i);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(r,s){"use strict";"object"==typeof t&&void 0!==i&&i&&i.versions&&i.versions.electron||"object"!=typeof t?void 0!==(o=function(){return s}.call(e,n,e,t))&&(t.exports=o):t.exports=s}(0,function(){"use strict";function t(t,e){return this.init(t,e)}return t.extensions={},function(e){function n(t,e){var n,i=Array.prototype.slice.call(arguments,2);e=e||{};for(var o=0;o<i.length;o++){var r=i[o];if(r)for(n in r)r.hasOwnProperty(n)&&void 0!==r[n]&&(t||!1===e.hasOwnProperty(n))&&(e[n]=r[n])}return e}var i=!1;try{var o=document.createElement("div"),r=document.createTextNode(" ");o.appendChild(r),i=o.contains(r)}catch(t){}var s={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:e.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(t){return!!(s.isMac&&t.metaKey||!s.isMac&&t.ctrlKey)},isKey:function(t,e){var n=s.getKeyCode(t);return!1===Array.isArray(e)?n===e:-1!==e.indexOf(n)},getKeyCode:function(t){var e=t.which;return null===e&&(e=null!==t.charCode?t.charCode:t.keyCode),e},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var t=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},defaults:function(){var t=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},createLink:function(t,e,n,i){var o=t.createElement("a");return s.moveTextRangeIntoElement(e[0],e[e.length-1],o),o.setAttribute("href",n),i&&o.setAttribute("target",i),o},findOrCreateMatchingTextNodes:function(t,e,n){for(var i=t.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),o=[],r=0,a=!1,l=null,c=null;null!==(l=i.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!a&&n.start<r+l.nodeValue.length&&(a=!0,c=s.splitStartNodeIfNeeded(l,n.start,r)),a&&s.splitEndNodeIfNeeded(l,c,n.end,r),a&&r===n.end)break;if(a&&r>n.end+1)throw new Error("PerformLinking overshot the target!");a&&o.push(c||l),r+=l.nodeValue.length,null!==c&&(r+=c.nodeValue.length,i.nextNode()),c=null}else"img"===l.tagName.toLowerCase()&&(!a&&n.start<=r&&(a=!0),a&&o.push(l));return o},splitStartNodeIfNeeded:function(t,e,n){return e!==n?t.splitText(e-n):null},splitEndNodeIfNeeded:function(t,e,n,i){var o,r;o=i+t.nodeValue.length+(e?e.nodeValue.length:0)-1,r=n-i-(e?t.nodeValue.length:0),o>=n&&i!==o&&0!==r&&(e||t).splitText(r)},splitByBlockElements:function(e){if(3!==e.nodeType&&1!==e.nodeType)return[];var n=[],i=t.util.blockContainerElementNames.join(",");if(3===e.nodeType||0===e.querySelectorAll(i).length)return[e];for(var o=0;o<e.childNodes.length;o++){var r=e.childNodes[o];if(3===r.nodeType)n.push(r);else if(1===r.nodeType){var s=r.querySelectorAll(i);0===s.length?n.push(r):n=n.concat(t.util.splitByBlockElements(r))}}return n},findAdjacentTextNodeWithContent:function(t,e,n){var i,o=!1,r=n.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);for(i=r.nextNode();i;){if(i===e)o=!0;else if(o&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=r.nextNode()}return i},findPreviousSibling:function(t){if(!t||s.isMediumEditorElement(t))return!1;for(var e=t.previousSibling;!e&&!s.isMediumEditorElement(t.parentNode);)t=t.parentNode,e=t.previousSibling;return e},isDescendant:function(t,e,n){if(!t||!e)return!1;if(t===e)return!!n;if(1!==t.nodeType)return!1;if(i||3!==e.nodeType)return t.contains(e);for(var o=e.parentNode;null!==o;){if(o===t)return!0;o=o.parentNode}return!1},isElement:function(t){return!(!t||1!==t.nodeType)},throttle:function(t,e){var n,i,o,r=null,s=0,a=function(){s=Date.now(),r=null,o=t.apply(n,i),r||(n=i=null)};return e||0===e||(e=50),function(){var l=Date.now(),c=e-(l-s);return n=this,i=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,o=t.apply(n,i),r||(n=i=null)):r||(r=setTimeout(a,c)),o}},traverseUp:function(t,e){if(!t)return!1;do{if(1===t.nodeType){if(e(t))return t;if(s.isMediumEditorElement(t))return!1}t=t.parentNode}while(t);return!1},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,n){var i,o,r,a,l,c,u,h=!1,d=["insertHTML",!1,n];if(!t.util.isEdge&&e.queryCommandSupported("insertHTML"))try{return e.execCommand.apply(e,d)}catch(t){}if(i=e.getSelection(),i.rangeCount){if(o=i.getRangeAt(0),u=o.commonAncestorContainer,s.isMediumEditorElement(u)&&!u.firstChild)o.selectNode(u.appendChild(e.createTextNode("")));else if(3===u.nodeType&&0===o.startOffset&&o.endOffset===u.nodeValue.length||3!==u.nodeType&&u.innerHTML===o.toString()){for(;!s.isMediumEditorElement(u)&&u.parentNode&&1===u.parentNode.childNodes.length&&!s.isMediumEditorElement(u.parentNode);)u=u.parentNode;o.selectNode(u)}for(o.deleteContents(),r=e.createElement("div"),r.innerHTML=n,a=e.createDocumentFragment();r.firstChild;)l=r.firstChild,c=a.appendChild(l);o.insertNode(a),c&&(o=o.cloneRange(),o.setStartAfter(c),o.collapse(!0),t.selection.selectRange(e,o)),h=!0}return e.execCommand.callListeners&&e.execCommand.callListeners(d,h),h},execFormatBlock:function(e,n){var i,o=s.getTopBlockContainer(t.selection.getSelectionStart(e));if("blockquote"===n){if(o&&(i=Array.prototype.slice.call(o.childNodes),i.some(function(t){return s.isBlockContainer(t)})))return e.execCommand("outdent",!1,null);if(s.isIE)return e.execCommand("indent",!1,n)}if(o&&n===o.nodeName.toLowerCase()&&(n="p"),s.isIE&&(n="<"+n+">"),o&&"blockquote"===o.nodeName.toLowerCase()){if(s.isIE&&"<p>"===n)return e.execCommand("outdent",!1,n);if((s.isFF||s.isEdge)&&"p"===n)return i=Array.prototype.slice.call(o.childNodes),i.some(function(t){return!s.isBlockContainer(t)})&&e.execCommand("formatBlock",!1,n),e.execCommand("outdent",!1,n)}return e.execCommand("formatBlock",!1,n)},setTargetBlank:function(t,e){var n,i=e||!1;if("a"===t.nodeName.toLowerCase())t.target="_blank";else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)!1!==i&&i!==t[n].attributes.href.value||(t[n].target="_blank")},removeTargetBlank:function(t,e){var n;if("a"===t.nodeName.toLowerCase())t.removeAttribute("target");else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)e===t[n].attributes.href.value&&t[n].removeAttribute("target")},addClassToAnchors:function(t,e){var n,i,o=e.split(" ");if("a"===t.nodeName.toLowerCase())for(i=0;i<o.length;i+=1)t.classList.add(o[i]);else{var r=t.getElementsByTagName("a");if(0===r.length){var a=s.getClosestTag(t,"a");t=a?[a]:[]}else t=r;for(n=0;n<t.length;n+=1)for(i=0;i<o.length;i+=1)t[n].classList.add(o[i])}},isListItem:function(t){if(!t)return!1;if("li"===t.nodeName.toLowerCase())return!0;for(var e=t.parentNode,n=e.nodeName.toLowerCase();"li"===n||!s.isBlockContainer(e)&&"div"!==n;){if("li"===n)return!0;if(!(e=e.parentNode))return!1;n=e.nodeName.toLowerCase()}return!1},cleanListDOM:function(e,n){if("li"===n.nodeName.toLowerCase()){var i=n.parentElement;"p"===i.parentElement.nodeName.toLowerCase()&&(s.unwrap(i.parentElement,e),t.selection.moveCursor(e,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(t,e,n){for(var i=e,o=null,r=!n;i!==t;){var s,a=i.parentNode,l=a.cloneNode(!1),c=r?i:a.firstChild;for(o&&(r?l.appendChild(o):s=o),o=l;c;){var u=c.nextSibling;c===i?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&o.appendChild(c),c=r?u:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&o.appendChild(c),c=u)}s&&o.appendChild(s),i=a}return o},moveTextRangeIntoElement:function(t,e,n){if(!t||!e)return!1;var i=s.findCommonRoot(t,e);if(!i)return!1;if(e===t){var o=t.parentNode,r=t.nextSibling;return o.removeChild(t),n.appendChild(t),r?o.insertBefore(n,r):o.appendChild(n),n.hasChildNodes()}for(var a,l,c,u=[],h=0;h<i.childNodes.length;h++)if(c=i.childNodes[h],a){if(s.isDescendant(c,e,!0)){l=c;break}u.push(c)}else s.isDescendant(c,t,!0)&&(a=c);var d=l.nextSibling,f=i.ownerDocument.createDocumentFragment();return a===t?(a.parentNode.removeChild(a),f.appendChild(a)):f.appendChild(s.splitOffDOMTree(a,t)),u.forEach(function(t){t.parentNode.removeChild(t),f.appendChild(t)}),l===e?(l.parentNode.removeChild(l),f.appendChild(l)):f.appendChild(s.splitOffDOMTree(l,e,!0)),n.appendChild(f),l.parentNode===i?i.insertBefore(n,l):d?i.insertBefore(n,d):i.appendChild(n),n.hasChildNodes()},depthOfNode:function(t){for(var e=0,n=t;null!==n.parentNode;)n=n.parentNode,e++;return e},findCommonRoot:function(t,e){for(var n=s.depthOfNode(t),i=s.depthOfNode(e),o=t,r=e;n!==i;)n>i?(o=o.parentNode,n-=1):(r=r.parentNode,i-=1);for(;o!==r;)o=o.parentNode,r=r.parentNode;return o},isElementAtBeginningOfBlock:function(t){for(var e,n;!s.isBlockContainer(t)&&!s.isMediumEditorElement(t);){for(n=t;n=n.previousSibling;)if(e=3===n.nodeType?n.nodeValue:n.textContent,e.length>0)return!1;t=t.parentNode}return!0},isMediumEditorElement:function(t){return t&&t.getAttribute&&!!t.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(t){return s.traverseUp(t,function(t){return s.isMediumEditorElement(t)})},isBlockContainer:function(t){return t&&3!==t.nodeType&&-1!==s.blockContainerElementNames.indexOf(t.nodeName.toLowerCase())},getClosestBlockContainer:function(t){return s.traverseUp(t,function(t){return s.isBlockContainer(t)||s.isMediumEditorElement(t)})},getTopBlockContainer:function(t){var e=!!s.isBlockContainer(t)&&t;return s.traverseUp(t,function(t){return s.isBlockContainer(t)&&(e=t),!(e||!s.isMediumEditorElement(t)||(e=t,0))}),e},getFirstSelectableLeafNode:function(t){for(;t&&t.firstChild;)t=t.firstChild;if(t=s.traverseUp(t,function(t){return-1===s.emptyElementNames.indexOf(t.nodeName.toLowerCase())}),"table"===t.nodeName.toLowerCase()){var e=t.querySelector("th, td");e&&(t=e)}return t},getFirstTextNode:function(t){return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),s._getFirstTextNode(t)},_getFirstTextNode:function(t){if(3===t.nodeType)return t;for(var e=0;e<t.childNodes.length;e++){var n=s._getFirstTextNode(t.childNodes[e]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(t){return-1===t.indexOf("://")?"http://"+t:t},warn:function(){void 0!==e.console&&"function"==typeof e.console.warn&&e.console.warn.apply(e.console,arguments)},deprecated:function(t,e,n){var i=t+" is deprecated, please use "+e+" instead.";n&&(i+=" Will be removed in "+n),s.warn(i)},deprecatedMethod:function(t,e,n,i){s.deprecated(t,e,i),"function"==typeof this[e]&&this[e].apply(this,n)},cleanupAttrs:function(t,e){e.forEach(function(e){t.removeAttribute(e)})},cleanupTags:function(t,e){-1!==e.indexOf(t.nodeName.toLowerCase())&&t.parentNode.removeChild(t)},unwrapTags:function(e,n){-1!==n.indexOf(e.nodeName.toLowerCase())&&t.util.unwrap(e,document)},getClosestTag:function(t,e){return s.traverseUp(t,function(t){return t.nodeName.toLowerCase()===e.toLowerCase()})},unwrap:function(t,e){for(var n=e.createDocumentFragment(),i=Array.prototype.slice.call(t.childNodes),o=0;o<i.length;o++)n.appendChild(i[o]);n.childNodes.length?t.parentNode.replaceChild(n,t):t.parentNode.removeChild(t)},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}};t.util=s}(window),function(){var e=function(e){t.util.extend(this,e)};e.extend=function(e){var n,i=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},t.util.extend(n,i);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,e&&t.util.extend(n.prototype,e),n},e.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(t){return this.base.options[t]}},["execAction","on","off","subscribe","trigger"].forEach(function(t){e.prototype[t]=function(){return this.base[t].apply(this.base,arguments)}}),t.Extension=e}(),function(){function e(e){return t.util.isBlockContainer(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(e,n){var i,o,r=n.getSelection();return 0!==r.rangeCount&&(i=r.getRangeAt(0),o=i.commonAncestorContainer,t.util.traverseUp(o,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent(function(e){return t.util.isMediumEditorElement(e)},e)},exportSelection:function(t,e){if(!t)return null;var n=null,i=e.getSelection();if(i.rangeCount>0){var o,r=i.getRangeAt(0),s=r.cloneRange();s.selectNodeContents(t),s.setEnd(r.startContainer,r.startOffset),o=s.toString().length,n={start:o,end:o+r.toString().length},this.doesRangeStartWithImages(r,e)&&(n.startsWithImage=!0);var a=this.getTrailingImageCount(t,n,r.endContainer,r.endOffset);if(a&&(n.trailingImageCount=a),0!==o){var l=this.getIndexRelativeToAdjacentEmptyBlocks(e,t,r.startContainer,r.startOffset);-1!==l&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(t,e,n,i){if(t&&e){var o=n.createRange();o.setStart(e,0),o.collapse(!0);var r,s=e,a=[],l=0,c=!1,u=!1,h=0,d=!1,f=!1,p=null;for((i||t.startsWithImage||void 0!==t.emptyBlocksIndex)&&(f=!0);!d&&s;)if(s.nodeType>3)s=a.pop();else{if(3!==s.nodeType||u){if(t.trailingImageCount&&u&&("img"===s.nodeName.toLowerCase()&&h++,h===t.trailingImageCount)){for(var m=0;s.parentNode.childNodes[m]!==s;)m++;o.setEnd(s.parentNode,m+1),d=!0}if(!d&&1===s.nodeType)for(var g=s.childNodes.length-1;g>=0;)a.push(s.childNodes[g]),g-=1}else r=l+s.length,!c&&t.start>=l&&t.start<=r&&(f||t.start<r?(o.setStart(s,t.start-l),c=!0):p=s),c&&t.end>=l&&t.end<=r&&(t.trailingImageCount?u=!0:(o.setEnd(s,t.end-l),d=!0)),l=r;d||(s=a.pop())}!c&&p&&(o.setStart(p,p.length),o.setEnd(p,p.length)),void 0!==t.emptyBlocksIndex&&(o=this.importSelectionMoveCursorPastBlocks(n,e,t.emptyBlocksIndex,o)),i&&(o=this.importSelectionMoveCursorPastAnchor(t,o)),this.selectRange(n,o)}},importSelectionMoveCursorPastAnchor:function(e,n){var i=function(t){return"a"===t.nodeName.toLowerCase()};if(e.start===e.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&t.util.traverseUp(n.startContainer,i)){for(var o=n.startContainer,r=n.startContainer.parentNode;null!==r&&"a"!==r.nodeName.toLowerCase();)r.childNodes[r.childNodes.length-1]!==o?r=null:(o=r,r=r.parentNode);if(null!==r&&"a"===r.nodeName.toLowerCase()){for(var s=null,a=0;null===s&&a<r.parentNode.childNodes.length;a++)r.parentNode.childNodes[a]===r&&(s=a);n.setStart(r.parentNode,s+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,i,o,r){var s,a,l=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,e,!1),c=r.startContainer,u=0;for(o=o||1,s=3===c.nodeType&&t.util.isBlockContainer(c.previousSibling)?c.previousSibling:t.util.getClosestBlockContainer(c);l.nextNode();)if(a){if(a=l.currentNode,++u===o)break;if(a.textContent.length>0)break}else s===l.currentNode&&(a=l.currentNode);return a||(a=s),r.setStart(t.util.getFirstSelectableLeafNode(a),0),r},getIndexRelativeToAdjacentEmptyBlocks:function(n,i,o,r){if(o.textContent.length>0&&r>0)return-1;var s=o;if(3!==s.nodeType&&(s=o.childNodes[r]),s){if(!t.util.isElementAtBeginningOfBlock(s))return-1;var a=t.util.findPreviousSibling(s);if(!a)return-1;if(a.nodeValue)return-1}for(var l=t.util.getClosestBlockContainer(o),c=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,e,!1),u=0;c.nextNode();){var h=""===c.currentNode.textContent;if((h||u>0)&&(u+=1),c.currentNode===l)return u;h||(u=0)}return u},doesRangeStartWithImages:function(t,e){if(0!==t.startOffset||1!==t.startContainer.nodeType)return!1;if("img"===t.startContainer.nodeName.toLowerCase())return!0;var n=t.startContainer.querySelector("img");if(!n)return!1;for(var i=e.createTreeWalker(t.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var o=i.currentNode;if(o===n)break;if(o.nodeValue)return!1}return!0},getTrailingImageCount:function(t,e,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var o=n.childNodes[i-1];o.hasChildNodes();)o=o.lastChild;for(var r,s=t,a=[],l=0,c=!1,u=!1,h=!1,d=0;!h&&s;)if(s.nodeType>3)s=a.pop();else{if(3!==s.nodeType||u){if("img"===s.nodeName.toLowerCase()&&d++,s===o)h=!0;else if(1===s.nodeType)for(var f=s.childNodes.length-1;f>=0;)a.push(s.childNodes[f]),f-=1}else d=0,r=l+s.length,!c&&e.start>=l&&e.start<=r&&(c=!0),c&&e.end>=l&&e.end<=r&&(u=!0),l=r;h||(s=a.pop())}return d},selectionContainsContent:function(t){var e=t.getSelection();if(!e||e.isCollapsed||!e.rangeCount)return!1;if(""!==e.toString().trim())return!0;var n=this.getSelectedParentElement(e.getRangeAt(0));return!(!n||!("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img")))},selectionInContentEditableFalse:function(t){var e,n=this.findMatchingSelectionParent(function(t){var n=t&&t.getAttribute("contenteditable");return"true"===n&&(e=!0),"#text"!==t.nodeName&&"false"===n},t);return!e&&n},getSelectionHtml:function(t){var e,n,i,o="",r=t.getSelection();if(r.rangeCount){for(i=t.createElement("div"),e=0,n=r.rangeCount;e<n;e+=1)i.appendChild(r.getRangeAt(e).cloneContents());o=i.innerHTML}return o},getCaretOffsets:function(t,e){var n,i;return e||(e=window.getSelection().getRangeAt(0)),n=e.cloneRange(),i=e.cloneRange(),n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset),i.selectNodeContents(t),i.setStart(e.endContainer,e.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(t){return t?this.rangeSelectsSingleNode(t)&&3!==t.startContainer.childNodes[t.startOffset].nodeType?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer:null},getSelectedElements:function(t){var e,n,i,o=t.getSelection();if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(e=o.getRangeAt(0),3===e.commonAncestorContainer.nodeType){for(n=[],i=e.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(e.commonAncestorContainer.getElementsByTagName("*"),function(t){return"function"!=typeof o.containsNode||o.containsNode(t,!0)})},selectNode:function(t,e){var n=e.createRange();n.selectNodeContents(t),this.selectRange(e,n)},select:function(t,e,n,i,o){var r=t.createRange();return r.setStart(e,n),i?r.setEnd(i,o):r.collapse(!0),this.selectRange(t,r),r},clearSelection:function(t,e){e?t.getSelection().collapseToStart():t.getSelection().collapseToEnd()},moveCursor:function(t,e,n){this.select(t,e,n)},getSelectionRange:function(t){var e=t.getSelection();return 0===e.rangeCount?null:e.getRangeAt(0)},selectRange:function(t,e){var n=t.getSelection();n.removeAllRanges(),n.addRange(e)},getSelectionStart:function(t){var e=t.getSelection().anchorNode;return e&&3===e.nodeType?e.parentNode:e}};t.selection=n}(),function(){function e(e,n){return e.some(function(e){if("function"!=typeof e.getInteractionElements)return!1;var i=e.getInteractionElements();return!!i&&(Array.isArray(i)||(i=[i]),i.some(function(e){return t.util.isDescendant(e,n,!0)}))})}var n=function(t){this.base=t,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!t.util.isIE&&!t.util.isEdge,attachDOMEvent:function(e,n,i,o){var r=this.base.options.contentWindow,s=this.base.options.ownerDocument;e=t.util.isElement(e)||[r,s].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){t.addEventListener(n,i,o),this.events.push([t,n,i,o])}.bind(this))},detachDOMEvent:function(e,n,i,o){var r,s,a=this.base.options.contentWindow,l=this.base.options.ownerDocument;null!==e&&(e=t.util.isElement(e)||[a,l].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){
-1!==(r=this.indexOfListener(t,n,i,o))&&(s=this.events.splice(r,1)[0],s[0].removeEventListener(s[1],s[2],s[3]))}.bind(this)))},indexOfListener:function(t,e,n,i){var o,r,s;for(o=0,r=this.events.length;o<r;o+=1)if(s=this.events[o],s[0]===t&&s[1]===e&&s[2]===n&&s[3]===i)return o;return-1},detachAllDOMEvents:function(){for(var t=this.events.pop();t;)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},detachAllEventsFromElement:function(t){for(var e=this.events.filter(function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===t.getAttribute("medium-editor-index")}),n=0,i=e.length;n<i;n++){var o=e[n];this.detachDOMEvent(o[0],o[1],o[2],o[3])}},attachAllEventsToElement:function(t){this.listeners.editableInput&&(this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(e){this.attachDOMEvent(t,e.name,e.handler.bind(this))},this)},enableCustomEvent:function(t){void 0!==this.disabledEvents[t]&&delete this.disabledEvents[t]},disableCustomEvent:function(t){this.disabledEvents[t]=!0},attachCustomEvent:function(t,e){this.setupListener(t),this.customEvents[t]||(this.customEvents[t]=[]),this.customEvents[t].push(e)},detachCustomEvent:function(t,e){var n=this.indexOfCustomListener(t,e);-1!==n&&this.customEvents[t].splice(n,1)},indexOfCustomListener:function(t,e){return this.customEvents[t]&&this.customEvents[t].length?this.customEvents[t].indexOf(e):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(t,e,n){this.customEvents[t]&&!this.disabledEvents[t]&&this.customEvents[t].forEach(function(t){t(e,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(t){t.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(t){this.handleDocumentExecCommand(t)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var t=this.options.ownerDocument;if(this.execCommandListener&&t.execCommand.listeners){var e=t.execCommand.listeners.indexOf(this.execCommandListener);-1!==e&&t.execCommand.listeners.splice(e,1),t.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var t=this.options.ownerDocument;if(!t.execCommand.listeners){var e=function(e,n){t.execCommand.listeners&&t.execCommand.listeners.forEach(function(t){t({command:e[0],value:e[2],args:e,result:n})})},n=function(){var n=t.execCommand.orig.apply(this,arguments);if(!t.execCommand.listeners)return n;var i=Array.prototype.slice.call(arguments);return e(i,n),n};n.orig=t.execCommand,n.listeners=[],n.callListeners=e,t.execCommand=n}},unwrapExecCommand:function(){var t=this.options.ownerDocument;t.execCommand.orig&&(t.execCommand=t.execCommand.orig)},setupListener:function(t){if(!this.listeners[t]){switch(t){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(t){this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":case"editableKeydownEnter":case"editableKeydownTab":case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[t]=!0}},attachToEachElement:function(t,e){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(n){this.attachDOMEvent(n,t,e.bind(this))},this),this.eventsCache.push({name:t,handler:e})},cleanupElement:function(t){var e=t.getAttribute("medium-editor-index");e&&(this.detachAllEventsFromElement(t),this.contentCache&&delete this.contentCache[e])},focusElement:function(t){t.focus(),this.updateFocus(t,{target:t,type:"focus"})},updateFocus:function(n,i){var o,r=this.base.getFocusedElement();r&&"click"===i.type&&this.lastMousedownTarget&&(t.util.isDescendant(r,this.lastMousedownTarget,!0)||e(this.base.extensions,this.lastMousedownTarget))&&(o=r),o||this.base.elements.some(function(e){return!o&&t.util.isDescendant(e,n,!0)&&(o=e),!!o},this);var s=!t.util.isDescendant(r,n,!0)&&!e(this.base.extensions,n);o!==r&&(r&&s&&(r.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,r)),o&&(o.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,o))),s&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(t,e){if(this.contentCache){var n=t.getAttribute("medium-editor-index"),i=t.innerHTML;i!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",e,t),this.contentCache[n]=i}},handleDocumentSelectionChange:function(e){if(e.currentTarget&&e.currentTarget.activeElement){var n,i=e.currentTarget.activeElement;this.base.elements.some(function(e){return!!t.util.isDescendant(e,i,!0)&&(n=e,!0)},this),n&&this.updateInput(n,{target:i,currentTarget:n})}},handleDocumentExecCommand:function(){var t=this.base.getFocusedElement();t&&this.updateInput(t,{target:t,currentTarget:t})},handleBodyClick:function(t){this.updateFocus(t.target,t)},handleBodyFocus:function(t){this.updateFocus(t.target,t)},handleBodyMousedown:function(t){this.lastMousedownTarget=t.target},handleInput:function(t){this.updateInput(t.currentTarget,t)},handleClick:function(t){this.triggerCustomEvent("editableClick",t,t.currentTarget)},handleBlur:function(t){this.triggerCustomEvent("editableBlur",t,t.currentTarget)},handleKeypress:function(t){if(this.triggerCustomEvent("editableKeypress",t,t.currentTarget),this.keypressUpdateInput){var e={target:t.target,currentTarget:t.currentTarget};setTimeout(function(){this.updateInput(e.currentTarget,e)}.bind(this),0)}},handleKeyup:function(t){this.triggerCustomEvent("editableKeyup",t,t.currentTarget)},handleMouseover:function(t){this.triggerCustomEvent("editableMouseover",t,t.currentTarget)},handleDragging:function(t){this.triggerCustomEvent("editableDrag",t,t.currentTarget)},handleDrop:function(t){this.triggerCustomEvent("editableDrop",t,t.currentTarget)},handlePaste:function(t){this.triggerCustomEvent("editablePaste",t,t.currentTarget)},handleKeydown:function(e){return this.triggerCustomEvent("editableKeydown",e,e.currentTarget),t.util.isKey(e,t.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.ENTER)||e.ctrlKey&&t.util.isKey(e,t.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget):t.util.isKey(e,[t.util.keyCode.DELETE,t.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget):void 0}},t.Events=n}(),function(){var e=t.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){e.isBuiltInButton(n)?t.Extension.call(this,this.defaults[n]):t.Extension.call(this,n)},init:function(){t.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var t=this.document.createElement("button"),e=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return t.classList.add("medium-editor-action"),t.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(e){t.classList.add(e)}),t.setAttribute("data-action",this.getAction()),n&&(t.setAttribute("title",n),t.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(e){t.setAttribute(e,this.attrs[e])},this),"fontawesome"===i&&this.contentFA&&(e=this.contentFA),t.innerHTML=e,t},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.getAction();e&&this.execAction(e)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var t=null;return this.useQueryState&&(t=this.base.queryCommandState(this.getAction())),t},isAlreadyApplied:function(t){var e,n,i=!1,o=this.getTagNames();return!1===this.knownState||!0===this.knownState?this.knownState:(o&&o.length>0&&(i=-1!==o.indexOf(t.nodeName.toLowerCase())),!i&&this.style&&(e=this.style.value.split("|"),n=this.window.getComputedStyle(t,null).getPropertyValue(this.style.prop),e.forEach(function(t){this.knownState||((i=-1!==n.indexOf(t))||"text-decoration"!==this.style.prop)&&(this.knownState=i)},this)),i)}});e.isBuiltInButton=function(e){return"string"==typeof e&&t.extensions.button.prototype.defaults.hasOwnProperty(e)},t.extensions.button=e}(),function(){t.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var e=t.extensions.button.extend({init:function(){t.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.hideToolbarDefaultActions()},setToolbarPosition:function(){var t=this.base.getExtensionByName("toolbar");t&&t.setToolbarPosition()}});t.extensions.form=e}(),function(){var e=t.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var n=t.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||t.util.getClosestTag(t.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){t.util.isKey(e,t.util.keyCode.K)&&t.util.isMetaCtrlKey(e)&&!e.shiftKey&&this.handleClick(e)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var t=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return t.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),t.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),t.join("")},isDisplayed:function(){return t.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){t.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(e){var n=this.getInput(),i=this.getAnchorTargetCheckbox(),o=this.getAnchorButtonCheckbox();if(e=e||{value:""},"string"==typeof e&&(e={value:e}),this.base.saveSelection(),this.hideToolbarDefaultActions(),t.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=e.value,n.focus(),i&&(i.checked="_blank"===e.target),o){var r=e.buttonClass?e.buttonClass.split(" "):[];o.checked=-1!==r.indexOf(this.customClassOption)}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var t=this.getAnchorTargetCheckbox(),e=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",t&&t.checked&&(n.target="_blank"),e&&e.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var t=this.getFormOpts();this.completeFormSave(t)},completeFormSave:function(t){this.base.restoreSelection(),this.execAction(this.action,t),this.base.checkSelection()},ensureEncodedUri:function(t){return t===decodeURI(t)?encodeURI(t):t},ensureEncodedUriComponent:function(t){return t===decodeURIComponent(t)?encodeURIComponent(t):t},ensureEncodedParam:function(t){var e=t.split("="),n=e[0],i=e[1];return n+(void 0===i?"":"="+this.ensureEncodedUriComponent(i))},ensureEncodedQuery:function(t){return t.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(t){var e=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,n=e.test(t),i="",o=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,r=t.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),s=r[1],a=r[2],l=r[3];if(o.test(t))return"tel:"+t;if(!n){var c=s.split("/")[0];(c.match(/.+(\.|:).+/)||"localhost"===c)&&(i="http://")}return i+this.ensureEncodedUri(s)+(void 0===a?"":"?"+this.ensureEncodedQuery(a))+(void 0===l?"":"#"+l)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(t){var e=t.querySelector(".medium-editor-toolbar-close"),n=t.querySelector(".medium-editor-toolbar-save"),i=t.querySelector(".medium-editor-toolbar-input");this.on(t,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(e,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var t=this.document,e=t.createElement("div");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),e.innerHTML=this.getTemplate(),this.attachFormEvents(e),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(e){if(e.keyCode===t.util.keyCode.ENTER)return e.preventDefault(),void this.doFormSave();e.keyCode===t.util.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel())},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.anchor=e}(),function(){var e=t.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var t=this.document.createElement("div");return t.id="medium-editor-anchor-preview-"+this.getEditorId(),t.className="medium-editor-anchor-preview",t.innerHTML=this.getTemplate(),this.on(t,"click",this.handleClick.bind(this)),t},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(t){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!t.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=t.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=t.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=t,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(t){t=t||this.activeAnchor;var e,n,i,o,r,s=this.window.innerWidth,a=this.anchorPreview.offsetHeight,l=t.getBoundingClientRect(),c=this.diffLeft,u=this.diffTop,h=this.getEditorOption("elementsContainer"),d=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,f={};e=this.anchorPreview.offsetWidth/2;var p=this.base.getExtensionByName("toolbar");p&&(c=p.diffLeft,u=p.diffTop),n=c-e,d?(o=h.getBoundingClientRect(),["top","left"].forEach(function(t){f[t]=l[t]-o[t]}),f.width=l.width,f.height=l.height,l=f,s=o.width,r=h.scrollTop):r=this.window.pageYOffset,i=l.left+l.width/2,r+=a+l.top+l.height-u-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(r)+"px",this.anchorPreview.style.right="initial",i<e?(this.anchorPreview.style.left=n+e+"px",this.anchorPreview.style.right="initial"):s-i<e?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+i+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(t){var e=this.base.getExtensionByName("anchor"),n=this.activeAnchor;e&&n&&(t.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var t={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};e.showForm(t),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var n=t.util.getClosestTag(e.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var i=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&i&&i.isDisplayed&&i.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;(new Date).getTime()-this.lastOver>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});t.extensions.anchorPreview=e}(),function(){function e(e){return!t.util.getClosestTag(e,"a")}var n,i,o,r,s;n=[" ","\t","\n","\r","Â ","â","â","â","â","\u2028","\u2029"],i="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",o="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+i+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?Â«Â»ââââ])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+i+"))",r=new RegExp("^("+i+")$","i"),s=new RegExp(o,"gi");var a=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var t=0,e=0;e<this.window._mediumEditors.length;e++){var n=this.window._mediumEditors[e];null!==n&&void 0!==n.getExtensionByName("autoLink")&&t++}return 1===t},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(t,e){this.performLinking(e)},onKeypress:function(e){this.disableEventHandling||t.util.isKey(e,[t.util.keyCode.SPACE,t.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var t=this.base.exportSelection();this.performLinking(e.target)&&this.base.importSelection(t,!0)}catch(t){window.console&&window.console.error("Failed to perform linking",t),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(e){var n=t.util.splitByBlockElements(e),i=!1;0===n.length&&(n=[e]);for(var o=0;o<n.length;o++)i=this.removeObsoleteAutoLinkSpans(n[o])||i,i=this.performLinkingWithinElement(n[o])||i;return this.base.events.updateInput(e,{target:e,currentTarget:e}),i},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var i=n.querySelectorAll('span[data-auto-link="true"]'),o=!1,r=0;r<i.length;r++){var s=i[r].textContent;if(-1===s.indexOf("://")&&(s=t.util.ensureUrlHasProtocol(s)),i[r].getAttribute("data-href")!==s&&e(i[r])){o=!0;var a=s.replace(/\s+$/,"");if(i[r].getAttribute("data-href")===a){var l=s.length-a.length,c=t.util.splitOffDOMTree(i[r],this.splitTextBeforeEnd(i[r],l));i[r].parentNode.insertBefore(c,i[r].nextSibling)}else t.util.unwrap(i[r],this.document)}}return o},splitTextBeforeEnd:function(t,e){for(var n=this.document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),i=!0;i;)i=null!==n.lastChild();for(var o,r,s;e>0&&null!==s;)o=n.currentNode,r=o.nodeValue,r.length>e?(s=o.splitText(r.length-e),e=0):(s=n.previousNode(),e-=r.length);return s},performLinkingWithinElement:function(e){for(var n=this.findLinkableText(e),i=0;i<n.length;i++){var o=t.util.findOrCreateMatchingTextNodes(this.document,e,n[i]);this.shouldNotLink(o)||this.createAutoLink(o,n[i].href)}return!1},shouldNotLink:function(e){for(var n=!1,i=0;i<e.length&&!1===n;i++)n=!!t.util.traverseUp(e[i],function(t){return"a"===t.nodeName.toLowerCase()||t.getAttribute&&"true"===t.getAttribute("data-auto-link")});return n},findLinkableText:function(t){for(var e=t.textContent,i=null,o=[];null!==(i=s.exec(e));){var a=!0,l=i.index+i[0].length;a=!(0!==i.index&&-1===n.indexOf(e[i.index-1])||l!==e.length&&-1===n.indexOf(e[l])),(a=a&&(-1!==i[0].indexOf("/")||r.test(i[0].split(".").pop().split("?").shift())))&&o.push({href:i[0],start:i.index,end:l})}return o},createAutoLink:function(e,n){n=t.util.ensureUrlHasProtocol(n);var i=t.util.createLink(this.document,e,n,this.getEditorOption("targetBlank")?"_blank":null),o=this.document.createElement("span");for(o.setAttribute("data-auto-link","true"),o.setAttribute("data-href",n),i.insertBefore(o,i.firstChild);i.childNodes.length>1;)o.appendChild(i.childNodes[1])}});t.extensions.autoLink=a}(),function(){function e(e){var i=t.util.getContainerEditorElement(e);Array.prototype.slice.call(i.parentElement.querySelectorAll("."+n)).forEach(function(t){
t.classList.remove(n)})}var n="medium-editor-dragover",i=t.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var i=t.target.classList?t.target:t.target.parentElement;e(i),"dragover"===t.type&&i.classList.add(n)},handleDrop:function(t){t.preventDefault(),t.stopPropagation(),this.base.selectElement(t.target);var n=this.base.exportSelection();n.start=n.end,this.base.importSelection(n),t.dataTransfer.files&&Array.prototype.slice.call(t.dataTransfer.files).forEach(function(t){this.isAllowedFile(t)&&t.type.match("image")&&this.insertImageFile(t)},this),e(t.target)},isAllowedFile:function(t){return this.allowedTypes.some(function(e){return!!t.type.match(e)})},insertImageFile:function(e){if("function"==typeof FileReader){var n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",function(e){var n=this.document.createElement("img");n.src=e.target.result,t.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});t.extensions.fileDragging=i}(),function(){var e=t.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(t){var e=t.key.charCodeAt(0);this.keys[e]||(this.keys[e]=[]),this.keys[e].push(t)},this)},handleKeydown:function(e){var n=t.util.getKeyCode(e);if(this.keys[n]){var i=t.util.isMetaCtrlKey(e),o=!!e.shiftKey,r=!!e.altKey;this.keys[n].forEach(function(t){t.meta!==i||t.shift!==o||t.alt!==r&&void 0!==t.alt||(e.preventDefault(),e.stopPropagation(),"function"==typeof t.command?t.command.apply(this):!1!==t.command&&this.execAction(t.command))},this)}}});t.extensions.keyboardCommands=e}(),function(){var e=t.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontName")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(t){var e=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var t,e=this.document,n=e.createElement("div"),i=e.createElement("select"),o=e.createElement("a"),r=e.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var s=0;s<this.fonts.length;s++)t=e.createElement("option"),t.innerHTML=this.fonts[s],t.value=this.fonts[s],i.appendChild(t);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),r.setAttribute("href","#"),r.className="medium-editor-toobar-save",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(r),this.on(r,"click",this.handleSaveClick.bind(this),!0),o.setAttribute("href","#"),o.className="medium-editor-toobar-close",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(o),this.on(o,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){t.selection.getSelectedElements(this.document).forEach(function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("face")&&t.removeAttribute("face")})},handleFontChange:function(){var t=this.getSelect().value;""===t?this.clearFontName():this.execAction("fontName",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontName=e}(),function(){var e=t.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontSize")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var t=this.document,e=t.createElement("div"),n=t.createElement("input"),i=t.createElement("a"),o=t.createElement("a");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(e,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",e.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",e.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",e.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){t.selection.getSelectedElements(this.document).forEach(function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("size")&&t.removeAttribute("size")})},handleSliderChange:function(){var t=this.getInput().value;"4"===t?this.clearFontSize():this.execAction("fontSize",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontSize=e}(),function(){function e(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|â|â)(((?!&quot;|&rdquo;|&ldquo;|"|â|â).)*)(?:&quot;|&rdquo;|&ldquo;|"|â|â)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function n(t,e,n){var i=t.clipboardData||e.clipboardData||n.dataTransfer,o={};if(!i)return o;if(i.getData){var r=i.getData("Text");r&&r.length>0&&(o["text/plain"]=r)}if(i.types)for(var s=0;s<i.types.length;s++){var a=i.types[s];o[a]=i.getData(a)}return o}var i=null,o=null,r=function(t){t.stopPropagation()},s=t.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){t.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(t){this.on(t,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(t,e){this.on(e,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(t,e){if(!t.defaultPrevented){var i=n(t,this.window,this.document),o=i["text/html"],r=i["text/plain"];this.window.clipboardData&&void 0===t.clipboardData&&!o&&(o=r),(o||r)&&(t.preventDefault(),this.doPaste(o,r,e))}},doPaste:function(e,n,i){var o,r,s="";if(this.cleanPastedHTML&&e)return this.cleanPaste(e);if(this.getEditorOption("disableReturn")||i&&i.getAttribute("data-disable-return"))s=t.util.htmlEntities(n);else if(o=n.split(/[\r\n]+/g),o.length>1)for(r=0;r<o.length;r+=1)""!==o[r]&&(s+="<p>"+t.util.htmlEntities(o[r])+"</p>");else s=t.util.htmlEntities(o[0]);t.util.insertHTMLCommand(this.document,s)},handlePasteBinPaste:function(t){if(t.defaultPrevented)return void this.removePasteBin();var e=n(t,this.window,this.document),i=e["text/html"],r=e["text/plain"],s=o;if(!this.cleanPastedHTML||i)return t.preventDefault(),this.removePasteBin(),this.doPaste(i,r,s),void this.trigger("editablePaste",{currentTarget:s,target:s},s);setTimeout(function(){this.cleanPastedHTML&&(i=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(i,r,s),this.trigger("editablePaste",{currentTarget:s,target:s},s)}.bind(this),0)},handleKeydown:function(e,n){t.util.isKey(e,t.util.keyCode.V)&&t.util.isMetaCtrlKey(e)&&(e.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(e){var n,s=t.selection.getSelectionRange(this.document),a=this.window.pageYOffset;o=e,s&&(n=s.getClientRects(),n.length?a+=n[0].top:a+=s.startContainer.getBoundingClientRect().top),i=s;var l=this.document.createElement("div");l.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),l.setAttribute("style","border: 1px red solid; position: absolute; top: "+a+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),l.setAttribute("contentEditable",!0),l.innerHTML="%ME_PASTEBIN%",this.document.body.appendChild(l),this.on(l,"focus",r),this.on(l,"focusin",r),this.on(l,"focusout",r),l.focus(),t.selection.selectNode(l,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(l,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==i&&(t.selection.selectRange(this.document,i),i=null),null!==o&&(o=null);var e=this.getPasteBin();e&&e&&(this.off(e,"focus",r),this.off(e,"focusin",r),this.off(e,"focusout",r),this.off(e,"paste",this.boundHandlePaste),e.parentElement.removeChild(e))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var t=this.getPasteBin();if(!t)return!1;if(t.firstChild&&"mcepastebin"===t.firstChild.id)return!1;var e=t.innerHTML;return!(!e||"%ME_PASTEBIN%"===e)&&e},cleanPaste:function(t){var n,i,o,r,s=/<p|<br|<div/.test(t),a=[].concat(this.preCleanReplacements||[],e(),this.cleanReplacements||[]);for(n=0;n<a.length;n+=1)t=t.replace(a[n][0],a[n][1]);if(!s)return this.pasteHTML(t);for(o=this.document.createElement("div"),o.innerHTML="<p>"+t.split("<br><br>").join("</p><p>")+"</p>",i=o.querySelectorAll("a,p,div,br"),n=0;n<i.length;n+=1)switch(r=i[n],r.innerHTML=r.innerHTML.replace(/\n/gi," "),r.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(r);break;case"br":this.filterLineBreak(r)}this.pasteHTML(o.innerHTML)},pasteHTML:function(e,n){n=t.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var i,o,r,s,a=this.document.createDocumentFragment();for(a.appendChild(this.document.createElement("body")),s=a.querySelector("body"),s.innerHTML=e,this.cleanupSpans(s),i=s.querySelectorAll("*"),r=0;r<i.length;r+=1)o=i[r],"a"===o.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&t.util.setTargetBlank(o),t.util.cleanupAttrs(o,n.cleanAttrs),t.util.cleanupTags(o,n.cleanTags),t.util.unwrapTags(o,n.unwrapTags);t.util.insertHTMLCommand(this.document,s.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.nodeName.toLowerCase()||"div"===t.nodeName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.textContent)&&t.parentNode&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?this.removeWithParent(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?t.parentNode&&1===t.parentNode.childElementCount&&""===t.parentNode.textContent&&this.removeWithParent(t):this.removeWithParent(t)},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t))},cleanupSpans:function(e){var n,i,o,r=e.querySelectorAll(".replace-with"),s=function(t){return t&&"#text"!==t.nodeName&&"false"===t.getAttribute("contenteditable")};for(n=0;n<r.length;n+=1)i=r[n],o=this.document.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?o.innerHTML="<i>"+i.innerHTML+"</i>":o.innerHTML=i.innerHTML,i.parentNode.replaceChild(o,i);for(r=e.querySelectorAll("span"),n=0;n<r.length;n+=1){if(i=r[n],t.util.traverseUp(i,s))return!1;t.util.unwrap(i,this.document)}}});t.extensions.paste=s}(),function(){var e=t.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(t,e){this.initElement(e)},initElement:function(t){t.getAttribute("data-placeholder")||t.setAttribute("data-placeholder",this.text),this.updatePlaceholder(t)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(t,e){this.cleanupElement(e)},cleanupElement:function(t){t.getAttribute("data-placeholder")===this.text&&t.removeAttribute("data-placeholder")},showPlaceholder:function(e){e&&(t.util.isFF&&0===e.childNodes.length?(e.classList.add("medium-editor-placeholder-relative"),e.classList.remove("medium-editor-placeholder")):(e.classList.add("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(t){t&&(t.classList.remove("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(t,e){if(t.querySelector("img, blockquote, ul, ol, table")||""!==t.textContent.replace(/^\s+|\s+$/g,""))return this.hidePlaceholder(t);e||this.showPlaceholder(t)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(t,e){var n=this.hideOnClick&&e===this.base.getFocusedElement();this.updatePlaceholder(e,n)},handleFocus:function(t,e){this.hidePlaceholder(e)},handleBlur:function(t,e){this.updatePlaceholder(e)}});t.extensions.placeholder=e}(),function(){var e=t.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(t,e){return this.base.extensions.forEach(function(n){if(n!==this)return t.apply(e||this,arguments)},this)},createToolbar:function(){var t=this.document.createElement("div");return t.id="medium-editor-toolbar-"+this.getEditorId(),t.className="medium-editor-toolbar",this.static?t.className+=" static-toolbar":this.relativeContainer?t.className+=" medium-editor-relative-toolbar":t.className+=" medium-editor-stalker-toolbar",t.appendChild(this.createToolbarButtons()),this.forEachExtension(function(e){e.hasForm&&t.appendChild(e.getForm())}),this.attachEventHandlers(),t},createToolbarButtons:function(){var e,n,i,o,r,s,a=this.document.createElement("ul");return a.id="medium-editor-toolbar-actions"+this.getEditorId(),a.className="medium-editor-toolbar-actions",a.style.display="block",this.buttons.forEach(function(i){"string"==typeof i?(r=i,s=null):(r=i.name,s=i),(o=this.base.addBuiltInExtension(r,s))&&"function"==typeof o.getButton&&(n=o.getButton(this.base),e=this.document.createElement("li"),t.util.isElement(n)?e.appendChild(n):e.innerHTML=n,a.appendChild(e))},this),i=a.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),a},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){if(e&&e.target&&t.util.isDescendant(this.getToolbarElement(),e.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(t){t.hasForm&&t.isDisplayed()&&t.hideForm()})},multipleBlockElementsSelected:function(){var e=new RegExp("<("+t.util.blockContainerElementNames.join("|")+")[^>]*>","g"),n=t.selection.getSelectionHtml(this.document).replace(/<[^\/>][^>]*><\/[^>]+>/gim,""),i=n.match(e);return!!i&&i.length>1},modifySelection:function(){var e=this.window.getSelection(),n=e.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=t.util.findAdjacentTextNodeWithContent(t.selection.getSelectionElement(this.window),n.startContainer,this.document);if(i){for(var o=0;0===i.nodeValue.substr(o,1).trim().length;)o+=1;n=t.selection.select(this.document,i,o,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||t.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var e=t.selection.getSelectionElement(this.window);return!e||-1===this.getEditorElements().indexOf(e)||e.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!t.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(t){"function"==typeof t.isActive&&"function"==typeof t.setInactive&&t.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var e,n=[],i=null,o=t.selection.getSelectionRange(this.document),r=function(t){"function"==typeof t.checkState?t.checkState(e):"function"==typeof t.isActive&&"function"==typeof t.isAlreadyApplied&&"function"==typeof t.setActive&&!t.isActive()&&t.isAlreadyApplied(e)&&t.setActive()};if(o&&(this.forEachExtension(function(t){if("function"==typeof t.queryCommandState&&null!==(i=t.queryCommandState()))return void(i&&"function"==typeof t.setActive&&t.setActive());n.push(t)}),e=t.selection.getSelectedParentElement(o),this.getEditorElements().some(function(n){return t.util.isDescendant(n,e,!0)})))for(;e&&(n.forEach(r),!t.util.isMediumEditorElement(e));)e=e.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var t=this.base.getFocusedElement(),e=this.window.getSelection();if(!t)return this;!this.static&&e.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(t):this.positionToolbar(e)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(t){this.getToolbarElement().style.left="0";var e,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,o=this.getToolbarElement(),r=t.getBoundingClientRect(),s=r.top+n,a=r.left+r.width/2,l=o.offsetHeight,c=o.offsetWidth,u=c/2;switch(this.sticky?n>s+t.offsetHeight-l-this.stickyTopOffset?(o.style.top=s+t.offsetHeight-l+"px",o.classList.remove("medium-editor-sticky-toolbar")):n>s-l-this.stickyTopOffset?(o.classList.add("medium-editor-sticky-toolbar"),o.style.top=this.stickyTopOffset+"px"):(o.classList.remove("medium-editor-sticky-toolbar"),o.style.top=s-l+"px"):o.style.top=s-l+"px",this.align){case"left":e=r.left;break;case"right":e=r.right-c;break;case"center":e=a-u}e<0?e=0:e+c>i&&(e=i-Math.ceil(c)-1),o.style.left=e+"px"},positionToolbar:function(t){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var e=t.getRangeAt(0),n=e.getBoundingClientRect();(!n||0===n.height&&0===n.width&&e.startContainer===e.endContainer)&&(n=1===e.startContainer.nodeType&&e.startContainer.querySelector("img")?e.startContainer.querySelector("img").getBoundingClientRect():e.startContainer.getBoundingClientRect());var i,o,r=this.window.innerWidth,s=this.getToolbarElement(),a=s.offsetHeight,l=s.offsetWidth,c=l/2,u=this.diffLeft-c,h=this.getEditorOption("elementsContainer"),d=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,f={},p={};d?(o=h.getBoundingClientRect(),["top","left"].forEach(function(t){p[t]=n[t]-o[t]}),p.width=n.width,p.height=n.height,n=p,r=o.width,f.top=h.scrollTop):f.top=this.window.pageYOffset,i=n.left+n.width/2,f.top+=n.top-a,n.top<50?(s.classList.add("medium-toolbar-arrow-over"),s.classList.remove("medium-toolbar-arrow-under"),f.top+=50+n.height-this.diffTop):(s.classList.add("medium-toolbar-arrow-under"),s.classList.remove("medium-toolbar-arrow-over"),f.top+=this.diffTop),i<c?(f.left=u+c,f.right="initial"):r-i<c?(f.left="auto",f.right=0):(f.left=u+i,f.right="initial"),["top","left","right"].forEach(function(t){s.style[t]=f[t]+(isNaN(f[t])?"":"px")})}});t.extensions.toolbar=e}(),function(){var e=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy","dragover"===t.type?t.target.classList.add("medium-editor-dragover"):"dragleave"===t.type&&t.target.classList.remove("medium-editor-dragover")},handleDrop:function(e){var n;e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&(n=Array.prototype.slice.call(e.dataTransfer.files,0),n.some(function(e){if(e.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(e),i="medium-img-"+ +new Date,t.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+i+'" />'),n.onload=function(){var t=this.document.getElementById(i);t&&(t.removeAttribute("id"),t.removeAttribute("class"),t.src=n.result)}.bind(this)}}.bind(this))),e.target.classList.remove("medium-editor-dragover")}});t.extensions.imageDragging=e}(),function(){function e(e){var n=t.selection.getSelectionStart(this.options.ownerDocument),i=n.textContent,o=t.selection.getCaretOffsets(n);(void 0===i[o.left-1]||""===i[o.left-1].trim()||void 0!==i[o.left]&&""===i[o.left].trim())&&e.preventDefault()}function n(e,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))e.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var i=t.selection.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()&&"li"!==i.nodeName.toLowerCase()||i.previousElementSibling&&"br"!==i.previousElementSibling.nodeName.toLowerCase()&&""===i.previousElementSibling.textContent.trim())&&e.preventDefault()}}function i(e){var n=t.selection.getSelectionStart(this.options.ownerDocument);"pre"===(n&&n.nodeName.toLowerCase())&&(e.preventDefault(),t.util.insertHTMLCommand(this.options.ownerDocument,"    ")),t.util.isListItem(n)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(e){var n,i=t.selection.getSelectionStart(this.options.ownerDocument),o=i.nodeName.toLowerCase(),r=/^(\s+|<br\/?>)?$/i,s=/h\d/i;t.util.isKey(e,[t.util.keyCode.BACKSPACE,t.util.keyCode.ENTER])&&i.previousElementSibling&&s.test(o)&&0===t.selection.getCaretOffsets(i).left?t.util.isKey(e,t.util.keyCode.BACKSPACE)&&r.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),e.preventDefault()):!this.options.disableDoubleReturn&&t.util.isKey(e,t.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(n,i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!s.test(o)&&r.test(i.innerHTML)&&s.test(i.nextElementSibling.nodeName.toLowerCase())?(t.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&"li"===o&&r.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&"li"===i.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.parentElement.insertBefore(n,i.parentElement),t.selection.moveCursor(this.options.ownerDocument,n),i.parentElement.removeChild(i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&!1!==t.util.getClosestTag(i,"blockquote")&&0===t.selection.getCaretOffsets(i).left?(e.preventDefault(),t.util.execFormatBlock(this.options.ownerDocument,"p")):t.util.isKey(e,t.util.keyCode.ENTER)&&!1!==t.util.getClosestTag(i,"blockquote")&&0===t.selection.getCaretOffsets(i).right?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.insertBefore(n,i.nextSibling),t.selection.moveCursor(this.options.ownerDocument,n),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&t.util.isMediumEditorElement(i.parentElement)&&!i.previousElementSibling&&i.nextElementSibling&&r.test(i.innerHTML)&&(e.preventDefault(),t.selection.moveCursor(this.options.ownerDocument,i.nextSibling),i.parentElement.removeChild(i))}function r(e){var n,i=t.selection.getSelectionStart(this.options.ownerDocument);i&&(t.util.isMediumEditorElement(i)&&0===i.children.length&&!t.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!t.util.isKey(e,t.util.keyCode.ENTER)||t.util.isListItem(i)||t.util.isBlockContainer(i)||(n=i.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||e.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function s(t,e){var n=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=e.innerHTML.trim())}function a(t){t._mediumEditors||(t._mediumEditors=[null]),this.id||(this.id=t._mediumEditors.length),t._mediumEditors[this.id]=this}function l(t){t._mediumEditors&&t._mediumEditors[this.id]&&(t._mediumEditors[this.id]=null)}function c(e,n,i){var o=[];if(e||(e=[]),"string"==typeof e&&(e=n.querySelectorAll(e)),t.util.isElement(e)&&(e=[e]),i)for(var r=0;r<e.length;r++){var s=e[r]
;!t.util.isElement(s)||s.getAttribute("data-medium-editor-element")||s.getAttribute("medium-editor-textarea-id")||o.push(s)}else o=Array.prototype.slice.apply(e);return o}function u(t){var e=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');e&&(e.classList.remove("medium-editor-hidden"),e.removeAttribute("medium-editor-textarea-id")),t.parentNode&&t.parentNode.removeChild(t)}function h(t,e){return Object.keys(e).forEach(function(n){void 0===t[n]&&(t[n]=e[n])}),t}function d(t,e,n){return t=h(t,{window:n.options.contentWindow,document:n.options.ownerDocument,base:n}),"function"==typeof t.init&&t.init(),t.name||(t.name=e),t}function f(){return!this.elements.every(function(t){return!!t.getAttribute("data-disable-toolbar")})&&!1!==this.options.toolbar}function p(){return!!f.call(this)&&!1!==this.options.anchorPreview}function m(){return!1!==this.options.placeholder}function g(){return!1!==this.options.autoLink}function v(){return!1!==this.options.imageDragging}function y(){return!1!==this.options.keyboardCommands}function b(){return!this.options.extensions.imageDragging}function w(t){for(var e=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,o=t.attributes;this.options.ownerDocument.getElementById(i);)n++,i="medium-editor-"+n;e.className=t.className,e.id=i,e.innerHTML=t.value,t.setAttribute("medium-editor-textarea-id",i);for(var r=0,s=o.length;r<s;r++)e.hasAttribute(o[r].nodeName)||e.setAttribute(o[r].nodeName,o[r].nodeValue);return t.form&&this.on(t.form,"reset",function(t){t.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),t.classList.add("medium-editor-hidden"),t.parentNode.insertBefore(e,t),e}function x(e,i){if(!e.getAttribute("data-medium-editor-element")){"textarea"===e.nodeName.toLowerCase()&&(e=w.call(this,e),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=s.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||e.getAttribute("data-disable-editing")||(e.setAttribute("contentEditable",!0),e.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(e.getAttribute("data-disable-return")||e.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||e.getAttribute("data-disable-return")||this.on(e,"keyup",r.bind(this));var o=t.util.guid();e.setAttribute("data-medium-editor-element",!0),e.classList.add("medium-editor-element"),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.setAttribute("data-medium-editor-editor-index",i),e.setAttribute("medium-editor-index",o),E[o]=e.innerHTML,this.events.attachAllEventsToElement(e)}return e}function C(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",e.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function _(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(t){"toolbar"!==t&&this.options.extensions[t]&&this.extensions.push(d(this.options.extensions[t],t,this))},this),b.call(this)){var e=this.options.fileDragging;e||(e={},v.call(this)||(e.allowedTypes=[])),this.addBuiltInExtension("fileDragging",e)}var n={paste:!0,"anchor-preview":p.call(this),autoLink:g.call(this),keyboardCommands:y.call(this),placeholder:m.call(this)};Object.keys(n).forEach(function(t){n[t]&&this.addBuiltInExtension(t)},this);var i=this.options.extensions.toolbar;if(!i&&f.call(this)){var o=t.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});i=new t.extensions.toolbar(o)}i&&this.extensions.push(d(i,"toolbar",this))}function S(e,n){var i=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&i.forEach(function(e){n.hasOwnProperty(e[0])&&void 0!==n[e[0]]&&t.util.deprecated(e[0],e[1],"v6.0.0")}),t.util.defaults({},n,e)}function k(e,n){var i,o,r=/^append-(.+)$/gi,s=/justify([A-Za-z]*)$/g;if(i=r.exec(e))return t.util.execFormatBlock(this.options.ownerDocument,i[1]);if("fontSize"===e)return n.size&&t.util.deprecated(".size option for fontSize command",".value","6.0.0"),o=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,o);if("fontName"===e)return n.name&&t.util.deprecated(".name option for fontName command",".value","6.0.0"),o=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,o);if("createLink"===e)return this.createLink(n);if("image"===e){var a=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,a)}if("html"===e){var l=this.options.contentWindow.getSelection().toString().trim();return t.util.insertHTMLCommand(this.options.ownerDocument,l)}if(s.exec(e)){var c=this.options.ownerDocument.execCommand(e,!1,null),u=t.selection.getSelectedParentElement(t.selection.getSelectionRange(this.options.ownerDocument));return u&&T.call(this,t.util.getTopBlockContainer(u)),c}return o=n&&n.value,this.options.ownerDocument.execCommand(e,!1,o)}function T(e){if(e){var n,i=Array.prototype.slice.call(e.childNodes).filter(function(t){var e="div"===t.nodeName.toLowerCase();return e&&!n&&(n=t.style.textAlign),e});i.length&&(this.saveSelection(),i.forEach(function(e){if(e.style.textAlign===n){var i=e.lastChild;if(i){t.util.unwrap(e,this.options.ownerDocument);var o=this.options.ownerDocument.createElement("BR");i.parentNode.insertBefore(o,i.nextSibling)}}},this),e.style.textAlign=n,this.restoreSelection())}}var E={};t.prototype={init:function(t,e){return this.options=S.call(this,this.defaults,e),this.origElements=t,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(a.call(this,this.options.contentWindow),this.events=new t.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,_.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(t){"function"==typeof t.destroy&&t.destroy()},this),this.events.destroy(),this.elements.forEach(function(t){this.options.spellcheck&&(t.innerHTML=t.innerHTML),t.removeAttribute("contentEditable"),t.removeAttribute("spellcheck"),t.removeAttribute("data-medium-editor-element"),t.classList.remove("medium-editor-element"),t.removeAttribute("role"),t.removeAttribute("aria-multiline"),t.removeAttribute("medium-editor-index"),t.removeAttribute("data-medium-editor-editor-index"),t.getAttribute("medium-editor-textarea-id")&&u(t)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(t,e,n,i){return this.events.attachDOMEvent(t,e,n,i),this},off:function(t,e,n,i){return this.events.detachDOMEvent(t,e,n,i),this},subscribe:function(t,e){return this.events.attachCustomEvent(t,e),this},unsubscribe:function(t,e){return this.events.detachCustomEvent(t,e),this},trigger:function(t,e,n){return this.events.triggerCustomEvent(t,e,n),this},delay:function(t){var e=this;return setTimeout(function(){e.isActive&&t()},this.options.delay)},serialize:function(){var t,e,n={},i=this.elements.length;for(t=0;t<i;t+=1)e=""!==this.elements[t].id?this.elements[t].id:"element-"+t,n[e]={value:this.elements[t].innerHTML.trim()};return n},getExtensionByName:function(t){var e;return this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===t&&(e=n,!0)}),e},addBuiltInExtension:function(e,n){var i,o=this.getExtensionByName(e);if(o)return o;switch(e){case"anchor":i=t.util.extend({},this.options.anchor,n),o=new t.extensions.anchor(i);break;case"anchor-preview":o=new t.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":o=new t.extensions.autoLink;break;case"fileDragging":o=new t.extensions.fileDragging(n);break;case"fontname":o=new t.extensions.fontName(this.options.fontName);break;case"fontsize":o=new t.extensions.fontSize(n);break;case"keyboardCommands":o=new t.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":o=new t.extensions.paste(this.options.paste);break;case"placeholder":o=new t.extensions.placeholder(this.options.placeholder);break;default:t.extensions.button.isBuiltInButton(e)&&(n?(i=t.util.defaults({},n,t.extensions.button.prototype.defaults[e]),o=new t.extensions.button(i)):o=new t.extensions.button(e))}return o&&this.extensions.push(d(o,e,this)),o},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var t=this.getExtensionByName("toolbar");return t&&t.checkState(),this},queryCommandState:function(t){var e,n=/^full-(.+)$/gi,i=null;(e=n.exec(t))&&(t=e[1]);try{i=this.options.ownerDocument.queryCommandState(t)}catch(t){i=null}return i},execAction:function(e,n){var i,o;return i=/^full-(.+)$/gi.exec(e),i?(this.saveSelection(),this.selectAllContents(),o=k.call(this,i[1],n),this.restoreSelection()):o=k.call(this,e,n),"insertunorderedlist"!==e&&"insertorderedlist"!==e||t.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),o},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),t.selection.getSelectedParentElement(e)},selectAllContents:function(){var e=t.selection.getSelectionElement(this.options.contentWindow);if(e){for(;1===e.children.length;)e=e.children[0];this.selectElement(e)}},selectElement:function(e){t.selection.selectNode(e,this.options.ownerDocument);var n=t.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var t;return this.elements.some(function(e){return!t&&e.getAttribute("data-medium-focused")&&(t=e),!!t},this),t},exportSelection:function(){var e=t.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(e),i=null;return n>=0&&(i=t.selection.exportSelection(e,this.options.ownerDocument)),null!==i&&0!==n&&(i.editableElementIndex=n),i},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(e,n){if(e){var i=this.elements[e.editableElementIndex||0];t.selection.importSelection(e,i,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(e){var n,i=t.selection.getSelectionElement(this.options.contentWindow),o={};if(-1!==this.elements.indexOf(i)){try{if(this.events.disableCustomEvent("editableInput"),e.url&&t.util.deprecated(".url option for createLink",".value","6.0.0"),(n=e.url||e.value)&&n.trim().length>0){var r=this.options.contentWindow.getSelection();if(r){var s,a,l,c,u=r.getRangeAt(0),h=u.commonAncestorContainer;if(3===u.endContainer.nodeType&&3!==u.startContainer.nodeType&&0===u.startOffset&&u.startContainer.firstChild===u.endContainer&&(h=u.endContainer),a=t.util.getClosestBlockContainer(u.startContainer),l=t.util.getClosestBlockContainer(u.endContainer),3!==h.nodeType&&0!==h.textContent.length&&a===l){var d=a||i,f=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),s=this.exportSelection(),f.appendChild(d.cloneNode(!0)),i===d?t.selection.select(this.options.ownerDocument,d.firstChild,0,d.lastChild,3===d.lastChild.nodeType?d.lastChild.nodeValue.length:d.lastChild.childNodes.length):t.selection.select(this.options.ownerDocument,d,0,d,d.childNodes.length);var p=this.exportSelection();c=t.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,f,{start:s.start-p.start,end:s.end-p.start,editableElementIndex:s.editableElementIndex}),0===c.length&&(f=this.options.ownerDocument.createDocumentFragment(),f.appendChild(h.cloneNode(!0)),c=[f.firstChild.firstChild,f.firstChild.lastChild]),t.util.createLink(this.options.ownerDocument,c,n.trim());var m=(f.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;t.util.insertHTMLCommand(this.options.ownerDocument,f.firstChild.innerHTML.replace(/^\s+/,"")),s.start-=m,s.end-=m,this.importSelection(s)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===e.target?t.util.setTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),n):t.util.removeTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),n),e.buttonClass&&t.util.addClassToAnchors(t.selection.getSelectionStart(this.options.ownerDocument),e.buttonClass)}}if(this.options.targetBlank||"_blank"===e.target||e.buttonClass){o=this.options.ownerDocument.createEvent("HTMLEvents"),o.initEvent("input",!0,!0,this.options.contentWindow);for(var g=0,v=this.elements.length;g<v;g+=1)this.elements[g].dispatchEvent(o)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",o,i)}},cleanPaste:function(t){this.getExtensionByName("paste").cleanPaste(t)},pasteHTML:function(t,e){this.getExtensionByName("paste").pasteHTML(t,e)},setContent:function(t,e){if(e=e||0,this.elements[e]){var n=this.elements[e];n.innerHTML=t,this.checkContentChanged(n)}},getContent:function(t){return t=t||0,this.elements[t]?this.elements[t].innerHTML.trim():null},checkContentChanged:function(e){e=e||t.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(e,{target:e,currentTarget:e})},resetContent:function(t){if(t){var e=this.elements.indexOf(t);return void(-1!==e&&this.setContent(E[t.getAttribute("medium-editor-index")],e))}this.elements.forEach(function(t,e){this.setContent(E[t.getAttribute("medium-editor-index")],e)},this)},addElements:function(t){var e=c(t,this.options.ownerDocument,!0);if(0===e.length)return!1;e.forEach(function(t){t=x.call(this,t,this.id),this.elements.push(t),this.trigger("addElement",{target:t,currentTarget:t},t)},this)},removeElements:function(t){var e=c(t,this.options.ownerDocument),n=e.map(function(t){return t.getAttribute("medium-editor-textarea-id")&&t.parentNode?t.parentNode.querySelector('div[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]'):t});this.elements=this.elements.filter(function(t){return-1===n.indexOf(t)||(this.events.cleanupElement(t),t.getAttribute("medium-editor-textarea-id")&&u(t),this.trigger("removeElement",{target:t,currentTarget:t},t),!1)},this)}},t.getEditorFromElement=function(t){var e=t.getAttribute("data-medium-editor-editor-index"),n=t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[e]?n._mediumEditors[e]:null}}(),function(){t.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),t.parseVersionString=function(t){var e=t.split("-"),n=e[0].split("."),i=e.length>1?e[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:i,toString:function(){return[n[0],n[1],n[2]].join(".")+(i?"-"+i:"")}}},t.version=t.parseVersionString.call(this,{version:"5.23.0"}.version),t}())}).call(e,n(34))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!m){var t=o(s);m=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,m=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,h,d=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var f,p=[],m=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new l(t,e)),1!==p.length||m||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=(n(3),n(2)),r=function(t,e,n){function r(t){f&&e.confirmButtonColor&&(d.style.backgroundColor=t)}var l,c,u,h=t||window.event,d=h.target||h.srcElement,f=-1!==d.className.indexOf("confirm"),p=-1!==d.className.indexOf("sweet-overlay"),m=o.hasClass(n,"visible"),g=e.doneFunction&&"true"===n.getAttribute("data-has-done-function");switch(f&&e.confirmButtonColor&&(l=e.confirmButtonColor,c=i.colorLuminance(l,-.04),u=i.colorLuminance(l,-.14)),h.type){case"mouseover":r(c);break;case"mouseout":r(l);break;case"mousedown":r(u);break;case"mouseup":r(c);break;case"focus":var v=n.querySelector("button.confirm"),y=n.querySelector("button.cancel");f?y.style.boxShadow="none":v.style.boxShadow="none";break;case"click":var b=n===d,w=o.isDescendant(n,d);if(!b&&!w&&m&&!e.allowOutsideClick)break;f&&g&&m?s(n,e):g&&m||p?a(n,e):o.isDescendant(n,d)&&"BUTTON"===d.tagName&&sweetAlert.close()}},s=function(t,e){var n=!0;o.hasClass(t,"show-input")&&((n=t.querySelector("input").value)||(n="")),e.doneFunction(n),e.closeOnConfirm&&sweetAlert.close(),e.showLoaderOnConfirm&&sweetAlert.disableButtons()},a=function(t,e){var n=String(e.doneFunction).replace(/\s/g,"");"function("===n.substring(0,9)&&")"!==n.substring(9,10)&&e.doneFunction(!1),e.closeOnCancel&&sweetAlert.close()};e.default={handleButton:r,handleConfirm:s,handleCancel:a},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(3),r=function(t,e,n){var r=t||window.event,s=r.keyCode||r.which,a=n.querySelector("button.confirm"),l=n.querySelector("button.cancel"),c=n.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(s)){for(var u=r.target||r.srcElement,h=-1,d=0;d<c.length;d++)if(u===c[d]){h=d;break}9===s?(u=-1===h?a:h===c.length-1?c[0]:c[h+1],i.stopEventPropagation(r),u.focus(),e.confirmButtonColor&&o.setFocusStyle(u,e.confirmButtonColor)):13===s?("INPUT"===u.tagName&&(u=a,a.focus()),u=-1===h?a:void 0):27===s&&!0===e.allowEscapeKey?(u=l,i.fireClick(u,r)):u=void 0}};e.default=r,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>',t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=n(3),r=n(2),s=["error","warning","info","success","input","prompt"],a=function(t){var e=o.getModal(),n=e.querySelector("h2"),a=e.querySelector("p"),l=e.querySelector("button.cancel"),c=e.querySelector("button.confirm");if(n.innerHTML=t.html?t.title:r.escapeHtml(t.title).split("\n").join("<br>"),a.innerHTML=t.html?t.text:r.escapeHtml(t.text||"").split("\n").join("<br>"),t.text&&r.show(a),t.customClass)r.addClass(e,t.customClass),e.setAttribute("data-custom-class",t.customClass);else{var u=e.getAttribute("data-custom-class");r.removeClass(e,u),e.setAttribute("data-custom-class","")}if(r.hide(e.querySelectorAll(".sa-icon")),t.type&&!i.isIE8()){var h=function(){for(var n=!1,i=0;i<s.length;i++)if(t.type===s[i]){n=!0;break}if(!n)return logStr("Unknown alert type: "+t.type),{v:!1};var a=["success","error","warning","info"],l=void 0;-1!==a.indexOf(t.type)&&(l=e.querySelector(".sa-icon.sa-"+t.type),r.show(l));var c=o.getInput();switch(t.type){case"success":r.addClass(l,"animate"),r.addClass(l.querySelector(".sa-tip"),"animateSuccessTip"),r.addClass(l.querySelector(".sa-long"),"animateSuccessLong");break;case"error":r.addClass(l,"animateErrorIcon"),r.addClass(l.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":r.addClass(l,"pulseWarning"),r.addClass(l.querySelector(".sa-body"),"pulseWarningIns"),r.addClass(l.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":c.setAttribute("type",t.inputType),c.value=t.inputValue,c.setAttribute("placeholder",t.inputPlaceholder),r.addClass(e,"show-input"),setTimeout(function(){c.focus(),c.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof h)return h.v}if(t.imageUrl){var d=e.querySelector(".sa-icon.sa-custom");d.style.backgroundImage="url("+t.imageUrl+")",r.show(d);var f=80,p=80;if(t.imageSize){var m=t.imageSize.toString().split("x"),g=m[0],v=m[1];g&&v?(f=g,p=v):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+t.imageSize)}d.setAttribute("style",d.getAttribute("style")+"width:"+f+"px; height:"+p+"px")}e.setAttribute("data-has-cancel-button",t.showCancelButton),t.showCancelButton?l.style.display="inline-block":r.hide(l),e.setAttribute("data-has-confirm-button",t.showConfirmButton),t.showConfirmButton?c.style.display="inline-block":r.hide(c),t.cancelButtonText&&(l.innerHTML=r.escapeHtml(t.cancelButtonText)),t.confirmButtonText&&(c.innerHTML=r.escapeHtml(t.confirmButtonText)),t.confirmButtonColor&&(c.style.backgroundColor=t.confirmButtonColor,c.style.borderLeftColor=t.confirmLoadingButtonColor,c.style.borderRightColor=t.confirmLoadingButtonColor,o.setFocusStyle(c,t.confirmButtonColor)),e.setAttribute("data-allow-outside-click",t.allowOutsideClick);var y=!!t.doneFunction;e.setAttribute("data-has-done-function",y),t.animation?"string"==typeof t.animation?e.setAttribute("data-animation",t.animation):e.setAttribute("data-animation","pop"):e.setAttribute("data-animation","none"),e.setAttribute("data-timer",t.timer)};e.default=a,t.exports=e.default},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,r,s,a,l=n(2),c=n(4),u=n(3),h=n(35),d=n(36),f=i(d),p=n(11),m=i(p),g=n(38),v=i(g);e.default=s=a=function(){function t(t){var n=e;return void 0===n[t]?m.default[t]:n[t]}var e=arguments[0];if(l.addClass(document.body,"stop-scrolling"),u.resetInput(),void 0===e)return c.logStr("SweetAlert expects at least 1 attribute!"),!1;var n=c.extend({},m.default);switch(typeof e){case"string":n.title=e,n.text=arguments[1]||"",n.type=arguments[2]||"";break;case"object":if(void 0===e.title)return c.logStr('Missing "title" argument!'),!1;n.title=e.title;for(var i in m.default)n[i]=t(i);n.confirmButtonText=n.showCancelButton?"Confirm":m.default.confirmButtonText,n.confirmButtonText=t("confirmButtonText"),n.doneFunction=arguments[1]||null;break;default:return c.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof e),!1}v.default(n),u.fixVerticalPosition(),u.openModal(arguments[1]);for(var s=u.getModal(),d=s.querySelectorAll("button"),p=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],g=function(t){return h.handleButton(t,n,s)},y=0;y<d.length;y++)for(var b=0;b<p.length;b++){var w=p[b];d[y][w]=g}u.getOverlay().onclick=g,o=window.onkeydown;var x=function(t){return f.default(t,n,s)};window.onkeydown=x,window.onfocus=function(){setTimeout(function(){void 0!==r&&(r.focus(),r=void 0)},0)},a.enableButtons()},s.setDefaults=a.setDefaults=function(t){if(!t)throw new Error("userParams is required");if("object"!=typeof t)throw new Error("userParams has to be a object");c.extend(m.default,t)},s.close=a.close=function(){var t=u.getModal();l.fadeOut(u.getOverlay(),5),l.fadeOut(t,5),l.removeClass(t,"showSweetAlert"),l.addClass(t,"hideSweetAlert"),l.removeClass(t,"visible");var e=t.querySelector(".sa-icon.sa-success");l.removeClass(e,"animate"),l.removeClass(e.querySelector(".sa-tip"),"animateSuccessTip"),l.removeClass(e.querySelector(".sa-long"),"animateSuccessLong");var n=t.querySelector(".sa-icon.sa-error");l.removeClass(n,"animateErrorIcon"),l.removeClass(n.querySelector(".sa-x-mark"),"animateXMark");var i=t.querySelector(".sa-icon.sa-warning");return l.removeClass(i,"pulseWarning"),l.removeClass(i.querySelector(".sa-body"),"pulseWarningIns"),l.removeClass(i.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=t.getAttribute("data-custom-class");l.removeClass(t,e)},300),l.removeClass(document.body,"stop-scrolling"),window.onkeydown=o,window.previousActiveElement&&window.previousActiveElement.focus(),r=void 0,clearTimeout(t.timeout),!0},s.showInputError=a.showInputError=function(t){var e=u.getModal(),n=e.querySelector(".sa-input-error");l.addClass(n,"show");var i=e.querySelector(".sa-error-container");l.addClass(i,"show"),i.querySelector("p").innerHTML=t,setTimeout(function(){s.enableButtons()},1),e.querySelector("input").focus()},s.resetInputError=a.resetInputError=function(t){if(t&&13===t.keyCode)return!1;var e=u.getModal(),n=e.querySelector(".sa-input-error");l.removeClass(n,"show");var i=e.querySelector(".sa-error-container");l.removeClass(i,"show")},s.disableButtons=a.disableButtons=function(t){var e=u.getModal(),n=e.querySelector("button.confirm"),i=e.querySelector("button.cancel");n.disabled=!0,i.disabled=!0},s.enableButtons=a.enableButtons=function(t){var e=u.getModal(),n=e.querySelector("button.confirm"),i=e.querySelector("button.cancel");n.disabled=!1,i.disabled=!1},"undefined"!=typeof window?window.sweetAlert=window.swal=s:c.logStr("SweetAlert is a frontend module!"),t.exports=e.default},,function(t,e,n){n(13),t.exports=n(14)}]);